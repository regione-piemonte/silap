"use strict";(self.webpackChunkcolmirwcl=self.webpackChunkcolmirwcl||[]).push([[766],{8766:(Xn,j,C)=>{C.r(j),C.d(j,{ColmirModule:()=>jn});var I=C(9808),L=C(4202),s=C(4854),x=C(5861),T=C(7520),le=C(5908),_=C(7225),e=C(5e3),U=C(3071),ce=C(2595),D=C(2698),N=C(72),R=C(2405),P=C(2684),V=C(5277),S=C(1062);function ue(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",3)(1,"div",4)(2,"div",5),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return o.goToFunzioneById(o.DICHIARAZIONE_VERSAMENTO_ESONERI_ID)}),e.TgZ(3,"div",6)(4,"div",7),e._UZ(5,"i",8),e.qZA(),e.TgZ(6,"div",9)(7,"div",10),e._UZ(8,"span",11),e.qZA(),e.TgZ(9,"div",12),e._UZ(10,"span",11),e.qZA()()()()()()}if(2&i){const t=e.oxw(2);e.xp6(5),e.Q6J("ngClass",t.getIconByIdFunzione(t.DICHIARAZIONE_VERSAMENTO_ESONERI_ID)),e.xp6(3),e.Q6J("innerHTML",t.getTitleByIdFunzione(t.DICHIARAZIONE_VERSAMENTO_ESONERI_ID),e.oJD),e.xp6(2),e.Q6J("innerHTML",t.getSubTitleByIdFunzione(t.DICHIARAZIONE_VERSAMENTO_ESONERI_ID),e.oJD)}}function de(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",3)(1,"div",4)(2,"div",5),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return o.goToFunzioneById(o.AUTORIZZA_DICHIARAZIONI_ID)}),e.TgZ(3,"div",6)(4,"div",7),e._UZ(5,"i",8),e.qZA(),e.TgZ(6,"div",9)(7,"div",10),e._UZ(8,"span",11),e.qZA(),e.TgZ(9,"div",12),e._UZ(10,"span",11),e.qZA()()()()()()}if(2&i){const t=e.oxw(2);e.xp6(5),e.Q6J("ngClass",t.getIconByIdFunzione(t.AUTORIZZA_DICHIARAZIONI_ID)),e.xp6(3),e.Q6J("innerHTML",t.getTitleByIdFunzione(t.AUTORIZZA_DICHIARAZIONI_ID),e.oJD),e.xp6(2),e.Q6J("innerHTML",t.getSubTitleByIdFunzione(t.AUTORIZZA_DICHIARAZIONI_ID),e.oJD)}}function me(i,a){if(1&i&&(e.TgZ(0,"div",1),e.YNc(1,ue,11,3,"div",2),e.YNc(2,de,11,3,"div",2),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.templateMenu[t.DICHIARAZIONE_VERSAMENTO_ESONERI_ID]),e.xp6(1),e.Q6J("ngIf",t.templateMenu[t.AUTORIZZA_DICHIARAZIONI_ID])}}function pe(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",3)(1,"div",4)(2,"div",5),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return o.goToFunzioneById(o.PREVISIONE_DICHIARAZIONI_ID)}),e.TgZ(3,"div",6)(4,"div",7),e._UZ(5,"i",8),e.qZA(),e.TgZ(6,"div",9)(7,"div",10),e._UZ(8,"span",11),e.qZA(),e.TgZ(9,"div",12),e._UZ(10,"span",11),e.qZA()()()()()()}if(2&i){const t=e.oxw(2);e.xp6(5),e.Q6J("ngClass",t.getIconByIdFunzione(t.PREVISIONE_DICHIARAZIONI_ID)),e.xp6(3),e.Q6J("innerHTML",t.getTitleByIdFunzione(t.PREVISIONE_DICHIARAZIONI_ID),e.oJD),e.xp6(2),e.Q6J("innerHTML",t.getSubTitleByIdFunzione(t.PREVISIONE_DICHIARAZIONI_ID),e.oJD)}}function _e(i,a){if(1&i&&(e.TgZ(0,"div",1),e.YNc(1,pe,11,3,"div",2),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.templateMenu[t.PREVISIONE_DICHIARAZIONI_ID])}}let fe=(()=>{class i{constructor(t,n,o,r,c,u,d,f,g,m,p){this.userService=t,this.router=n,this.route=o,this.leftSideBarService=r,this.versamentoEsnoreiService=c,this.spinner=u,this.alertMessageService=d,this.messageService=f,this.promptModalService=g,this.translateService=m,this.config=p,this.profiloAbilitato=this.config.ambiente===s.zC.DEV||this.config.ambiente===s.zC.TEST}get DICHIARAZIONE_VERSAMENTO_ESONERI_ID(){return s.kl.DICHIARAZIONE_VERSAMENTO_ESONERI.ID}get AUTORIZZA_DICHIARAZIONI_ID(){return s.kl.AUTORIZZA_DICHIARAZIONI.ID}get PREVISIONE_DICHIARAZIONI_ID(){return s.kl.PREVISIONE_DICHIARAZIONI.ID}ngOnDestroy(){this.alertMessageService.emptyMessages()}ngOnInit(){this.ruolo=this.userService.getRuoloSessione(),this.leftSideBarService.showLeftSideBar(),_.c.isNullOrUndefined(this.ruolo)&&this.router.navigate([this.router.navigate([s.ln.MODULE.APP.ACCESSO_RUOLO])]),this.buildMenu()}buildMenu(){let n=[];this.ruolo.ruoloFunzioni.forEach(o=>{let r=o.funzione.idSilapDFunzione;r===s.kl.DICHIARAZIONE_VERSAMENTO_ESONERI.ID&&(n[r]=Object.assign({},o.funzione)),r===s.kl.AUTORIZZA_DICHIARAZIONI.ID&&(n[r]=Object.assign({},o.funzione)),r===s.kl.PREVISIONE_DICHIARAZIONI.ID&&this.profiloAbilitato&&(n[r]=Object.assign({},o.funzione))}),this.templateMenu=Object.assign({},n)}getIconByIdFunzione(t){return this.templateMenu[t].iconaSilapDFunzione||s.On}goToFunzioneById(t){t===s.kl.DICHIARAZIONE_VERSAMENTO_ESONERI.ID?this.router.navigate(["ricerca-versamento-esoneri"],{relativeTo:this.route.parent}):t===s.kl.AUTORIZZA_DICHIARAZIONI.ID?this.openModalConferma():t===s.kl.PREVISIONE_DICHIARAZIONI.ID&&this.router.navigate(["previsione-dichiarazione"],{relativeTo:this.route.parent})}openModalConferma(){var t=this;return(0,x.Z)(function*(){const n=t.translate((0,T.J)("AUTORIZZA.MODAL.TITLE")),r=t.messageService.getMessaggioByCod("100102").dsSilapDMessaggio,c=t.translate((0,T.J)("APP.YES")),u=t.translate((0,T.J)("APP.NO"));(yield t.promptModalService.openPrompt(n,r,c,u,"warning"))&&t.autorizzaDichiarazione()})()}autorizzaDichiarazione(){this.versamentoEsnoreiService.autorizzaDichiarazioniBatch().subscribe({next:t=>{t.esitoPositivo?this.alertMessageService.setSingleSuccessMessage(t.msg.dsSilapDMessaggio):this.alertMessageService.setApiMessages(t.apiMessages),this.spinner.hide()},error:t=>{console.error(this.constructor.name,`errore autorizzaDichiarazioniBatch: ${JSON.stringify(t)}`),this.spinner.hide()}})}translate(t){return this.translateService.instant(t)}getTitleByIdFunzione(t){return this.templateMenu[t].dsSilapDFunzione}getSubTitleByIdFunzione(t){return this.templateMenu[t].noteSilapDFunzione}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(U.K),e.Y36(L.F0),e.Y36(L.gz),e.Y36(ce.J),e.Y36(D.gt),e.Y36(N.t2),e.Y36(R.O),e.Y36(P.e),e.Y36(V.p),e.Y36(S.sK),e.Y36(le.D,8))},i.\u0275cmp=e.Xpm({type:i,selectors:[["colmirwcl-home-page"]],decls:2,vars:2,consts:[["class","row home",4,"ngIf"],[1,"row","home"],["class","card col-auto",4,"ngIf"],[1,"card","col-auto"],[1,"card-body"],[1,"btn","btn-outline-secondary","btn-sm",3,"click"],[1,"row"],[1,"col-3"],[3,"ngClass"],[1,"col-9"],[1,"title"],[3,"innerHTML"],[1,"sub_title"]],template:function(t,n){1&t&&(e.YNc(0,me,3,2,"div",0),e.YNc(1,_e,2,1,"div",0)),2&t&&(e.Q6J("ngIf",n.templateMenu),e.xp6(1),e.Q6J("ngIf",n.templateMenu))},directives:[I.O5,I.mk],styles:[".btn-sm[_ngcontent-%COMP%]{width:24rem}.card[_ngcontent-%COMP%]   col[_ngcontent-%COMP%]{width:40rem}i[_ngcontent-%COMP%]{color:#016cb4;padding-top:5px}button[_ngcontent-%COMP%]{font-size:16pt;color:#000;font-weight:700;padding-bottom:2rem}.sub_title[_ngcontent-%COMP%], .title[_ngcontent-%COMP%]{color:#000;font-weight:700}.title[_ngcontent-%COMP%]{font-size:16pt}.sub_title[_ngcontent-%COMP%]{padding-top:3px;font-size:10pt}"]}),i})();var b=C(5362),M=C(6579),ve=C(8929);let ge=(()=>{class i{constructor(t){this.messageService=t,this.infoMessaggioSubject=new ve.xQ}get infoMessaggio$(){return this.infoMessaggioSubject.asObservable()}setMessaggioByCod(t){const n=this.messageService.getMessaggioByCod(t);this.infoMessaggioSubject.next(n)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(P.e))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var A=C(2446);function he(i,a){if(1&i&&(e.TgZ(0,"div",5),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t._messaggio?null:t._messaggio.dsTitolo," ")}}function Ie(i,a){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t._messaggio?null:t._messaggio.dsSilapDMessaggio," ")}}let H=(()=>{class i{constructor(t){this.accordionInfoService=t}set messaggio(t){this._messaggio=t}get TITLE(){return _.c.isNullOrUndefined(this._messaggio)?"":this._messaggio.dsTitolo}get CONTENT(){return _.c.isNullOrUndefined(this._messaggio)?"":this._messaggio.dsSilapDMessaggio}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(ge))},i.\u0275cmp=e.Xpm({type:i,selectors:[["colmirwcl-accordion-info"]],inputs:{messaggio:"messaggio"},decls:5,vars:0,consts:[["activeIds","custom-panel-1",1,"alert-accordion-info",2,"background-color","#dbeef7"],["a","ngbAccordion"],["aria-atomic","true",2,"background-color","#dbeef7"],["ngbPanelTitle",""],["ngbPanelContent",""],["role","alert","aria-atomic","true",1,"alert-info"]],template:function(t,n){1&t&&(e.TgZ(0,"ngb-accordion",0,1)(2,"ngb-panel",2),e.YNc(3,he,2,1,"ng-template",3),e.YNc(4,Ie,2,1,"ng-template",4),e.qZA()())},directives:[A.gY,A.Gk,A.Cu,A.gW],styles:[""]}),i})();var l=C(3075);let B=(()=>{class i{constructor(t,n){this.elementRef=t,this.renderer=n}onInputChange(t){const n=function Ae(i){return i.replace(/[^0-9]*/g,"")}(t);this.updateTextInput(n,this.value!==n)}onBlur(){this.onTouched()}updateTextInput(t,n){this.renderer.setProperty(this.elementRef.nativeElement,"value",t),n&&this.onChange(t),this.value=t}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.renderer.setProperty(this.elementRef.nativeElement,"disabled",t)}writeValue(t){t=t?String(t):"",this.updateTextInput(t,!1)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(e.Qsj))},i.\u0275dir=e.lG2({type:i,selectors:[["","colmirwclOnlyNumber",""]],hostBindings:function(t,n){1&t&&e.NdJ("input",function(r){return n.onInputChange(r.target.value)})("blur",function(){return n.onBlur()})},features:[e._Bn([{provide:l.JU,useExisting:(0,e.Gpc)(()=>i),multi:!0}])]}),i})();const Ce=["d_dataFine"],Te=["d_dataInizio"];function Ze(i,a){if(1&i&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Oqu(t.getMsgValidazioneByCode("100002"))}}function Se(i,a){if(1&i&&(e.TgZ(0,"div",38),e.YNc(1,Ze,2,1,"p",39),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.f||null==t.f.codFisc||null==t.f.codFisc.errors?null:t.f.codFisc.errors.minlength)}}function Oe(i,a){if(1&i&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Oqu(t.getMsgValidazioneByCode("100005"))}}function Ee(i,a){if(1&i&&(e.TgZ(0,"div",38),e.YNc(1,Oe,2,1,"p",39),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.f||null==t.f.denomAzienda||null==t.f.denomAzienda.errors?null:t.f.denomAzienda.errors.minlength)}}function xe(i,a){if(1&i&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Oqu(t.getMsgValidazioneByCode("100004"))}}function De(i,a){if(1&i&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Oqu(t.getMsgValidazioneByCode("100003"))}}function Pe(i,a){if(1&i&&(e.TgZ(0,"div",38),e.YNc(1,xe,2,1,"p",39),e.YNc(2,De,2,1,"p",39),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!(null!=t.f&&null!=t.f.dataInizio&&null!=t.f.dataInizio.errors&&t.f.dataInizio.errors.invalidDataRange)),e.xp6(1),e.Q6J("ngIf",null==t.f||null==t.f.dataInizio||null==t.f.dataInizio.errors?null:t.f.dataInizio.errors.invalidDataRange)}}function Ne(i,a){if(1&i&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Oqu(t.getMsgValidazioneByCode("100004"))}}function Re(i,a){if(1&i&&(e.TgZ(0,"div",38),e.YNc(1,Ne,2,1,"p",39),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!(null!=t.f&&null!=t.f.dataFine&&null!=t.f.dataFine.errors&&t.f.dataFine.errors.invalidDataRange))}}function ze(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"li",40)(1,"input",41),e.NdJ("change",function(){const r=e.CHM(t).$implicit;return e.oxw(2).selectRemoveStato(null==r?null:r.id)}),e.qZA(),e.TgZ(2,"label",42),e._uU(3),e.qZA()()}if(2&i){const t=a.$implicit,n=a.index;e.xp6(1),e.s9C("id","option"+n),e.Q6J("formControlName",n),e.xp6(1),e.s9C("for","option"+n),e.xp6(1),e.Oqu(null==t?null:t.descr)}}function Le(i,a){1&i&&(e.TgZ(0,"p"),e._uU(1,"Anno non valido"),e.qZA())}function be(i,a){if(1&i&&(e.TgZ(0,"div",38),e.YNc(1,Le,2,0,"p",39),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.f||null==t.f.annoProtocollo||null==t.f.annoProtocollo.errors?null:t.f.annoProtocollo.errors.minlength)}}function Ve(i,a){1&i&&(e.TgZ(0,"span",4),e._uU(1,"*"),e.qZA())}const Me=function(i,a,t){return{year:i,month:a,day:t}};function qe(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"form",2)(1,"p",3),e._uU(2),e.ALo(3,"translate"),e.TgZ(4,"span",4),e._uU(5,"*"),e.qZA(),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"div",5)(9,"div",6)(10,"label",7),e._uU(11),e.ALo(12,"translate"),e.qZA(),e._UZ(13,"input",8),e.YNc(14,Se,2,1,"div",9),e.qZA(),e.TgZ(15,"div",10)(16,"label",11),e._uU(17),e.ALo(18,"translate"),e.qZA(),e._UZ(19,"input",12),e.YNc(20,Ee,2,1,"div",9),e.qZA()(),e.TgZ(21,"div",5)(22,"div",13)(23,"div",14)(24,"label",15),e._uU(25),e.ALo(26,"translate"),e.TgZ(27,"span",4),e._uU(28,"*"),e.qZA()(),e.TgZ(29,"div",16)(30,"input",17,18),e.NdJ("keyup",function(){e.CHM(t);const o=e.oxw();return o.updateValueAndValidity(null==o.f?null:o.f.dataFine),o.updateValueAndValidity(null==o.f?null:o.f.dataInizio)})("dateSelect",function(){e.CHM(t);const o=e.oxw();return o.updateValueAndValidity(null==o.f?null:o.f.dataFine),o.updateValueAndValidity(null==o.f?null:o.f.dataInizio)}),e.qZA(),e.TgZ(32,"div",19)(33,"button",20),e.NdJ("click",function(){return e.CHM(t),e.MAs(31).toggle()}),e.TgZ(34,"span",21),e._uU(35),e.ALo(36,"translate"),e.qZA(),e._UZ(37,"i",22),e.qZA()()(),e.YNc(38,Pe,3,2,"div",9),e.qZA()(),e.TgZ(39,"div",13)(40,"div",14)(41,"label",23),e._uU(42),e.ALo(43,"translate"),e.TgZ(44,"span",4),e._uU(45,"*"),e.qZA()(),e.TgZ(46,"div",24)(47,"input",25,26),e.NdJ("keyup",function(){e.CHM(t);const o=e.oxw();return o.updateValueAndValidity(null==o.f?null:o.f.dataFine),o.updateValueAndValidity(null==o.f?null:o.f.dataInizio)})("dateSelect",function(){e.CHM(t);const o=e.oxw();return o.updateValueAndValidity(null==o.f?null:o.f.dataFine),o.updateValueAndValidity(null==o.f?null:o.f.dataInizio)}),e.qZA(),e.TgZ(49,"div",19)(50,"button",20),e.NdJ("click",function(){return e.CHM(t),e.MAs(48).toggle()}),e.TgZ(51,"span",21),e._uU(52),e.ALo(53,"translate"),e.qZA(),e._UZ(54,"i",22),e.qZA()()(),e.YNc(55,Re,2,1,"div",9),e.qZA()(),e.TgZ(56,"div",27)(57,"label",28),e._uU(58),e.ALo(59,"translate"),e.qZA(),e.TgZ(60,"ul",29),e.YNc(61,ze,4,4,"li",30),e.qZA()()(),e.TgZ(62,"div",5)(63,"div",31)(64,"label",32),e._uU(65),e.ALo(66,"translate"),e.qZA(),e.TgZ(67,"input",33),e.NdJ("change",function(){return e.CHM(t),e.oxw().setNumeroProtocolloControlState()}),e.qZA(),e.YNc(68,be,2,1,"div",9),e.qZA(),e.TgZ(69,"div",34)(70,"label",35),e._uU(71),e.ALo(72,"translate"),e.qZA(),e.YNc(73,Ve,2,0,"span",36),e._UZ(74,"input",37),e.qZA()()()}if(2&i){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(2),e.hij("",e.lcZ(3,20,"APP.GENERICO.CAMPI_CONTR")," "),e.xp6(4),e.hij(" ",e.lcZ(7,22,"APP.GENERICO.OBBLIGO"),""),e.xp6(5),e.Oqu(e.lcZ(12,24,"FORM_RICERCA_DICH.LABEL.CF")),e.xp6(3),e.Q6J("ngIf",null==t.f||null==t.f.codFisc?null:t.f.codFisc.invalid),e.xp6(3),e.Oqu(e.lcZ(18,26,"FORM_RICERCA_DICH.LABEL.DENOM")),e.xp6(3),e.Q6J("ngIf",null==t.f||null==t.f.denomAzienda?null:t.f.denomAzienda.invalid),e.xp6(5),e.Oqu(e.lcZ(26,28,"FORM_RICERCA_DICH.LABEL.DATA_STATO_DICH_INIZIO")),e.xp6(5),e.Q6J("maxDate",e.kEZ(42,Me,t.sysDate.getFullYear(),t.sysDate.getMonth()+1,t.sysDate.getDate())),e.xp6(5),e.Oqu(e.lcZ(36,30,"APP.GENERICO.BTN.APRI_CAL")),e.xp6(3),e.Q6J("ngIf",null==t.f||null==t.f.dataInizio?null:t.f.dataInizio.invalid),e.xp6(4),e.Oqu(e.lcZ(43,32,"FORM_RICERCA_DICH.LABEL.DATA_STATO_DICH_FINE")),e.xp6(10),e.Oqu(e.lcZ(53,34,"APP.GENERICO.BTN.APRI_CAL")),e.xp6(3),e.Q6J("ngIf",null==t.f||null==t.f.dataFine?null:t.f.dataFine.invalid),e.xp6(3),e.Oqu(e.lcZ(59,36,"FORM_RICERCA_DICH.LABEL.STATO_DICH")),e.xp6(3),e.Q6J("ngForOf",t.stati),e.xp6(4),e.Oqu(e.lcZ(66,38,"FORM_RICERCA_DICH.LABEL.ANNO_PROT")),e.xp6(3),e.Q6J("ngIf",null==t.f||null==t.f.annoProtocollo?null:t.f.annoProtocollo.invalid),e.xp6(3),e.Oqu(e.lcZ(72,40,"FORM_RICERCA_DICH.LABEL.NUM_PROT")),e.xp6(2),e.Q6J("ngIf",null==t.f||null==t.f.numProtocollo||null==t.f.numProtocollo.errors?null:t.f.numProtocollo.errors.required)}}function ye(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",5)(1,"div",43)(2,"button",44),e.NdJ("click",function(){return e.CHM(t),e.oxw().onClickReset()}),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",45)(6,"button",46),e.NdJ("click",function(){return e.CHM(t),e.oxw().onSubmit()}),e._uU(7),e.ALo(8,"translate"),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,3,"APP.GENERICO.BTN.RIMUOVI_FILTRI_UPPER_C")),e.xp6(3),e.Q6J("disabled",!(null!=t.form&&t.form.valid)),e.xp6(1),e.Oqu(e.lcZ(8,5,"APP.GENERICO.BTN.CERCA_UPPER_C"))}}let Ue=(()=>{class i{constructor(t,n,o,r,c){this.fb=t,this.logService=n,this.userService=o,this.decodificaService=r,this.messageService=c,this.sysDate=new Date,this.datiRicerca=new e.vpe,this.resetForm=new e.vpe,this.statiSelezionati=[],this.toDayDaRangeValidator=()=>{let u=!1;const d=this.form.controls.dataInizio.value;if(d){const f=new Date(d);f.setHours(0,0,0,0),u=f.valueOf()>this.sysDate.valueOf()}return u?{today:{dataInizio:d}}:null},this.dataRangeValidator=()=>{let u=!1;const d=this.form.controls.dataInizio.value,f=this.form.controls.dataFine.value;if(d&&f){const g=new Date(d),m=new Date(f);g.setHours(0,0,0,0),m.setHours(0,0,0,0),u=g.valueOf()>m.valueOf()}return u?{invalidDataRange:{dataInizio:d,dataFine:f}}:null}}get f(){return this.form.controls}get statoControls(){return this.form.controls.statoDichiarazione}ngOnInit(){var t=this;return(0,x.Z)(function*(){t.logService.info(t.constructor.name,"ngOnInit"),t.loadStati(),t.sysDate.setHours(0,0,0,0),t.ruolo=t.userService.getRuoloSessione(),t.initForm(),t.setFormMode(),t.statiSelezionati=_.c.clone(t.formRicerca.statoDichiarazione),t.formRicerca.goSearch?t.patchParamsInForm(t.formRicerca):t.form.patchValue(t.formRicerca),t.setFormState()})()}loadStati(){this.decodificaService.findfindDStatoVersamento().subscribe({next:t=>{t.esitoPositivo&&(this.stati=t.list)},error:t=>{}})}initForm(){this.form=this.fb.group({codFisc:this.fb.control(null),denomAzienda:this.fb.control(null),dataInizio:this.fb.control(null),dataFine:this.fb.control(null),annoProtocollo:this.fb.control(null),numProtocollo:this.fb.control(null),statoDichiarazione:this.fb.array([this.fb.control(null),this.fb.control(null),this.fb.control(null),this.fb.control(null),this.fb.control(null),this.fb.control(null),this.fb.control(null)])})}onClickReset(){this.form.patchValue(this.formPristine),this.setFormState(),this.statiSelezionati=_.c.clone(this.formPristine.statoDichiarazione),this.resetForm.emit()}onSubmit(){let t=this.form.getRawValue(),n=[];this.statiSelezionati.forEach(o=>{o&&n.push(o)}),t.statoDichiarazione=n,this.logService.info(this.constructor.name,`onSubmit:: ricercaPerInvio :: ${JSON.stringify(t)}`),this.datiRicerca.emit(t)}setFormMode(){this.form.controls.codFisc.setValidators(l.kI.minLength(3)),this.form.controls.denomAzienda.setValidators(l.kI.minLength(2)),this.form.controls.annoProtocollo.setValidators(l.kI.minLength(4)),this.form.controls.dataInizio.setValidators([l.kI.required,this.toDayDaRangeValidator,this.dataRangeValidator]),this.form.controls.dataFine.setValidators([l.kI.required,this.dataRangeValidator]),this.form.controls.dataInizio.updateValueAndValidity(),this.form.controls.dataFine.updateValueAndValidity()}setFormState(){this.setNumeroProtocolloControlState(),(this.ruolo.idSilapDRuolo===s.gD.LEGALE_RAPPRESENTANTE.ID||this.ruolo.idSilapDRuolo===s.gD.DELEGATO.ID||this.ruolo.idSilapDRuolo===s.gD.PERSONA_AUTORIZZATA.ID)&&(this.form.controls.codFisc[s.UI.DISABLE](),this.form.controls.denomAzienda[s.UI.DISABLE]())}setNumeroProtocolloControlState(){const t=this.form.controls.annoProtocollo.value;this.form.controls.numProtocollo.removeValidators(l.kI.required),_.c.isNullOrUndefinedOrEmptyField(t)||t.length<4?(this.form.controls.numProtocollo.reset(),this.form.controls.numProtocollo[s.UI.DISABLE]()):4===t.length&&(this.form.controls.numProtocollo[s.UI.ENABLE](),this.form.controls.numProtocollo.setValidators(l.kI.required)),this.form.controls.numProtocollo.updateValueAndValidity()}selectRemoveStato(t){if(this.statiSelezionati)if(this.statiSelezionati.length>0){const n=this.statiSelezionati.find(r=>r===t),o=this.statiSelezionati.indexOf(n);o>=0?this.statiSelezionati.splice(o,1):this.statiSelezionati.push(t)}else this.statiSelezionati.push(t)}updateValueAndValidity(t){t.updateValueAndValidity()}patchParamsInForm(t){if(!t)return;let n={dataInizio:new Date(t.dataInizio),dataFine:new Date(t.dataFine),codFisc:t.codFisc,denomAzienda:t.denomAzienda,annoProtocollo:t.annoProtocollo,numProtocollo:t.numProtocollo,statoDichiarazione:[]};this.statiSelezionati=JSON.parse(t.statoDichiarazione);const o=this.statoControls;this.statiSelezionati.forEach((r,c)=>{r===s.uT.ACCETTATA.ID?o.at(0).patchValue(!0):r===s.uT.ANNULLATA.ID?o.at(1).patchValue(!0):r===s.uT.AUTORIZZATA.ID?o.at(2).patchValue(!0):r===s.uT.BOZZA.ID?o.at(3).patchValue(!0):r===s.uT.ELIMINATA.ID?o.at(4).patchValue(!0):r===s.uT.MODIFICATA.ID?o.at(5).patchValue(!0):r===s.uT.NON_AUTORIZZATA.ID&&o.at(6).patchValue(!0)}),this.form.patchValue(n),this.onSubmit()}getMsgValidazioneByCode(t){return(this.messageService.getMessaggioByCod(t)||{}).dsSilapDMessaggio}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(l.qu),e.Y36(b.$),e.Y36(U.K),e.Y36(D.wN),e.Y36(P.e))},i.\u0275cmp=e.Xpm({type:i,selectors:[["colmirwcl-form-ricerca-dichiarazione-ver-eso"]],viewQuery:function(t,n){if(1&t&&(e.Gf(Ce,5),e.Gf(Te,5)),2&t){let o;e.iGM(o=e.CRH())&&(n.d_dataFine=o.first),e.iGM(o=e.CRH())&&(n.d_dataInizio=o.first)}},inputs:{formPristine:"formPristine",formRicerca:"formRicerca"},outputs:{datiRicerca:"datiRicerca",resetForm:"resetForm"},decls:2,vars:2,consts:[[3,"formGroup",4,"ngIf"],["class","row",4,"ngIf"],[3,"formGroup"],[1,"text-muted"],[1,"oblg"],[1,"row"],[1,"mb-3","col-sm-12","col-md-4"],["for","codFiscRicercaAzi"],["type","text","formControlName","codFisc","oninput","this.value = this.value.toUpperCase().trim()","id","codFiscRicercaAzi","maxlength","16",1,"form-control"],["class","text-danger",4,"ngIf"],[1,"mb-3","col-sm-12","col-md-8"],["for","denomAzi"],["type","text","formControlName","denomAzienda","oninput","this.value = this.value.toUpperCase()","id","denomAzi",1,"form-control"],[1,"col-sm-4","col-md-3","col-lg-3"],[1,"mb-3"],["for","dataInizio"],[1,"input-group"],["type","text","data-provide","datepicker","formControlName","dataInizio","id","dataInizio","placeholder","Data da","ngbDatepicker","","maxlength","10",1,"form-control",3,"maxDate","keyup","dateSelect"],["d_dataInizio","ngbDatepicker"],[1,"input-group-addon"],["type","button",1,"btn","btn-outline-primary","calendar",3,"click"],[1,"sr-only"],[1,"far","fa-calendar-alt","fa-lg"],["for","dataFine"],[1,"input-group","date"],["type","text","formControlName","dataFine","id","dataFine","placeholder","Data a","ngbDatepicker","","maxlength","10",1,"form-control",3,"keyup","dateSelect"],["d_dataFine","ngbDatepicker"],[1,"mb-3","col-sm-6","col-md-6"],["for","statoVersamento"],["formArrayName","statoDichiarazione",1,"list-inline"],["class","list-inline-item",4,"ngFor","ngForOf"],[1,"mb-3","col-sm-2","col-md-2"],["for","annoProtocollo",1,"form-label"],["colmirwclOnlyNumber","","maxlength","4","type","text","formControlName","annoProtocollo","id","annoProtocollo",1,"form-control",3,"change"],[1,"mb-3","col-sm-12","col-md-2"],["for","numeroProtocollo",1,"form-label"],["class","oblg",4,"ngIf"],["type","text","colmirwclOnlyNumber","","formControlName","numProtocollo","id","numeroProtocollo",1,"form-control"],[1,"text-danger"],[4,"ngIf"],[1,"list-inline-item"],["type","checkbox",1,"form-check-input",3,"formControlName","id","change"],[3,"for"],[1,"col"],["type","button",1,"btn","btn-outline-secondary","btn-sm",3,"click"],[1,"col-auto"],["type","button",1,"btn","btn-primary","ml-auto","btn-lg",3,"disabled","click"]],template:function(t,n){1&t&&(e.YNc(0,qe,75,46,"form",0),e.YNc(1,ye,9,7,"div",1)),2&t&&(e.Q6J("ngIf",n.form),e.xp6(1),e.Q6J("ngIf",n.form))},directives:[I.O5,l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,l.nD,A.J4,l.CE,I.sg,l.Wl,B],pipes:[S.X$],styles:[""]}),i})();var k=C(520),X=C(1707);let K=(()=>{class i extends D.gt{constructor(t,n,o){super(t,n,o),this.httpClient=t}canConsumeFormCustom(t){for(const o of t)if("multipart/form-data"===o)return!0;return!1}stampaVersamento(t,n="body",o=!1){if(null==t)throw new Error("Required parameter idEsoTVersamento was null or undefined when calling stampaVersamento.");let r=this.defaultHeaders;const u=this.configuration.selectHeaderAccept(["application/pdf"]);return null!=u&&(r=r.set("Accept",u)),this.httpClient.get(`${this.basePath}/versamento-esoneri/stampa-versamento/${encodeURIComponent(String(t))}`,{responseType:"blob",withCredentials:this.configuration.withCredentials,headers:r,observe:n,reportProgress:o})}stampaRicercaVersamentoEsoneri(t,n,o="body",r=!1){let c=new k.LE({encoder:new X.i});null!=n&&(c=c.set("format",n));let u=this.defaultHeaders;const f=this.configuration.selectHeaderAccept(["application/pdf"]);null!=f&&(u=u.set("Accept",f));const m=this.configuration.selectHeaderContentType(["application/json"]);return null!=m&&(u=u.set("Content-Type",m)),this.httpClient.post(`${this.basePath}/versamento-esoneri/stampa-ricerca`,t,{responseType:"blob",params:c,withCredentials:this.configuration.withCredentials,headers:u,observe:o,reportProgress:r})}downloadPrevisioneDichiarazioniTemplate(t="body",n=!1){let o=this.defaultHeaders;const c=this.configuration.selectHeaderAccept(["application/pdf"]);return null!=c&&(o=o.set("Accept",c)),this.httpClient.get(`${this.basePath}/versamento-esoneri/download-previsione-dichiarazioni-template`,{withCredentials:this.configuration.withCredentials,headers:o,observe:t,reportProgress:n,responseType:"blob"})}uploadPrevisioneDichiarazioniCustom(t,n,o,r="body",c=!1){let u=this.defaultHeaders;const f=this.configuration.selectHeaderAccept(["application/json"]);let p;return null!=f&&(u=u.set("Accept",f)),p=this.canConsumeFormCustom(["multipart/form-data"])?new FormData:new k.LE({encoder:new X.i}),void 0!==n&&(p=p.append("attachment",n)||p),void 0!==o&&(p=p.append("email",o)||p),void 0!==t&&(p=p.append("anno",t)||p),this.httpClient.post(`${this.basePath}/versamento-esoneri/upload-previsione-dichiarazioni`,p,{withCredentials:this.configuration.withCredentials,headers:u,observe:r,reportProgress:c})}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(k.eN),e.LFG(D.GW,8),e.LFG(D.VK,8))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var Y=C(9004),Q=C(5555),G=C(1064),Fe=C(5979);function we(i,a){}function Je(i,a){}const He=function(i,a,t,n,o,r,c){return{$implicit:i,el:a,index:t,first:n,last:o,even:r,odd:c}};function Be(i,a){if(1&i&&e.YNc(0,Je,0,0,"ng-template",17),2&i){const t=a.$implicit,n=a.index,o=a.first,r=a.last,c=a.even,u=a.odd,d=e.oxw(2);e.Q6J("ngTemplateOutlet",null==d.tplBody?null:d.tplBody.templateRef)("ngTemplateOutletContext",e.Hh0(2,He,t,t,n,o,r,c,u))}}function Ye(i,a){if(1&i&&(e.TgZ(0,"tbody"),e.YNc(1,Be,1,10,null,16),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.pagedResponse.list)}}function ke(i,a){if(1&i&&(e.TgZ(0,"tr")(1,"td",19),e._uU(2,"Non ci sono dati"),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("colSpan",t.columnNumber)}}function Qe(i,a){if(1&i&&(e.TgZ(0,"tbody"),e.YNc(1,ke,3,1,"tr",18),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.columnNumber>0)}}function Ge(i,a){1&i&&e._uU(0,"Inizio")}function $e(i,a){1&i&&e._uU(0,"Fine")}function We(i,a){1&i&&e._uU(0,"Prec.")}function je(i,a){1&i&&e._uU(0,"Succ.")}let Xe=(()=>{class i{constructor(){this.columnNumber=0,this.limit=10,this.changePaginationData=new e.vpe,this.pageSizes=[1,5,10,20,50]}ngOnInit(){this.page=this.pagedResponse.currentPage+1,this.columnNumber||(this.columnNumber=0)}changePageSize(t){console.log("paginated",t);const n=(this.page-1)*this.limit;this.limit=t;const o=Math.floor(n/this.limit),r=o*this.limit;this.page=o+1,this.changePaginationData.emit({limit:this.limit,sort:this.sort,page:o,offset:r})}onSort(t){this.headers.filter(n=>n.sortable!==t.column).forEach(n=>n.direction=""),this.sort=t,this.changePaginationData.emit({limit:this.limit,sort:this.sort,page:this.page-1,offset:(this.page-1)*this.limit})}goToPage(t){this.page=Math.max(1,Math.min(this.pagedResponse.totalPage,t)),this.changePaginationData.emit({limit:this.limit,sort:this.sort,page:this.page-1,offset:(this.page-1)*this.limit})}get paginationHeader(){return 0===this.pagedResponse.totalResult?"":`Record ${Math.min((this.page-1)*this.limit+1,this.pagedResponse.totalResult)} - ${Math.min(this.page*this.limit,this.pagedResponse.totalResult)} di ${this.pagedResponse.totalResult}`}get paginationFooter(){return 0===this.pagedResponse.totalResult?"":(Math.min((this.page-1)*this.limit+1,this.pagedResponse.totalResult),Math.min(this.page*this.limit,this.pagedResponse.totalResult),`Record totali ${this.pagedResponse.totalResult}`)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["colmirwcl-paginated-table"]],contentQueries:function(t,n,o){if(1&t&&(e.Suo(o,G.Q,5),e.Suo(o,Q.Q,5)),2&t){let r;e.iGM(r=e.CRH())&&(n.tplHead=r.first),e.iGM(r=e.CRH())&&(n.tplBody=r.first)}},viewQuery:function(t,n){if(1&t&&e.Gf(Fe.H,5),2&t){let o;e.iGM(o=e.CRH())&&(n.headers=o)}},inputs:{pagedResponse:"pagedResponse",columnNumber:"columnNumber",limit:"limit"},outputs:{changePaginationData:"changePaginationData"},decls:20,vars:11,consts:[[1,"colmirwcl-testata-lista"],[1,"scrollbar-table","scrollbar-primary"],["id","infoTable",1,"table","table-hover","table-sortable","colmirwcl-table"],[3,"ngTemplateOutlet"],[4,"ngIf","ngIfElse"],["noData",""],["aria-label","Navigazione"],[1,"container","row","colmirwcl-pagination-footer"],[1,"col-12","col-sm-3","col-md-2"],[1,"col-12","col-sm-3","col-md-2","mt-2"],[1,"col-12","col-sm-6","col-md-4","float-right"],[1,"d-flex","justify-content-end",3,"collectionSize","page","pageSize","maxSize","rotate","ellipses","boundaryLinks","pageChange"],["ngbPaginationFirst",""],["ngbPaginationLast",""],["ngbPaginationPrevious",""],["ngbPaginationNext",""],[4,"ngFor","ngForOf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngIf"],[3,"colSpan"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"table",2)(3,"thead"),e.YNc(4,we,0,0,"ng-template",3),e.qZA(),e.YNc(5,Ye,2,1,"tbody",4),e.YNc(6,Qe,2,1,"ng-template",null,5,e.W1O),e.qZA()()(),e.TgZ(8,"nav",6)(9,"div",7),e._UZ(10,"div",8),e.TgZ(11,"div",9)(12,"span"),e._uU(13),e.qZA()(),e.TgZ(14,"div",10)(15,"ngb-pagination",11),e.NdJ("pageChange",function(r){return n.page=r})("pageChange",function(r){return n.goToPage(r)}),e.YNc(16,Ge,1,0,"ng-template",12),e.YNc(17,$e,1,0,"ng-template",13),e.YNc(18,We,1,0,"ng-template",14),e.YNc(19,je,1,0,"ng-template",15),e.qZA()()()()),2&t){const o=e.MAs(7);e.xp6(4),e.Q6J("ngTemplateOutlet",null==n.tplHead?null:n.tplHead.templateRef),e.xp6(1),e.Q6J("ngIf",n.pagedResponse.totalResult>0)("ngIfElse",o),e.xp6(8),e.Oqu(n.paginationHeader),e.xp6(2),e.Q6J("collectionSize",n.pagedResponse.totalResult)("page",n.page)("pageSize",n.limit)("maxSize",5)("rotate",!0)("ellipses",!1)("boundaryLinks",!0)}},directives:[I.tP,I.O5,I.sg,A.N9,A.eC,A.pV,A.ju,A.GZ],styles:[".colmirwcl-testata-lista[_ngcontent-%COMP%]{background-color:#fff!important;padding:15px;margin-bottom:20px}.colmirwcl-table[_ngcontent-%COMP%]{font-size:13px}.colmirwcl-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#f0f0f0!important}.colmirwcl-select-page[_ngcontent-%COMP%]{width:60px}.colmirwcl-pagination-footer[_ngcontent-%COMP%]{margin-top:30px;font-size:13px}"]}),i})(),Ke=(()=>{class i{transform(t){if("number"==typeof t&&!_.c.isNullOrUndefined(t))return t===s.uT.BOZZA.ID?s.uT.BOZZA.DS:t===s.uT.ACCETTATA.ID?s.uT.ACCETTATA.DS:t===s.uT.MODIFICATA.ID?s.uT.MODIFICATA.DS:t===s.uT.AUTORIZZATA.ID?s.uT.AUTORIZZATA.DS:t===s.uT.NON_AUTORIZZATA.ID?s.uT.NON_AUTORIZZATA.DS:t===s.uT.ANNULLATA.ID?s.uT.ANNULLATA.DS:t===s.uT.ELIMINATA.ID?s.uT.ELIMINATA.DS:""}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275pipe=e.Yjl({name:"statoDVersamento",type:i,pure:!0}),i})();function et(i,a){if(1&i&&(e.TgZ(0,"label"),e._UZ(1,"i",13),e._uU(2),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.hij(" ","Codice Fiscale: "+(null==t.formRicerca?null:t.formRicerca.codFisc)," ")}}function tt(i,a){if(1&i&&(e.TgZ(0,"label"),e._UZ(1,"i",13),e._uU(2),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.hij(" ","Denominazione Azienda: "+(null==t.formRicerca?null:t.formRicerca.denomAzienda)," ")}}function it(i,a){if(1&i&&(e.TgZ(0,"label"),e._UZ(1,"i",13),e._uU(2),e.ALo(3,"date"),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.hij(" ","Data stato dichiarazione: Da: "+e.xi3(3,1,null==t.formRicerca?null:t.formRicerca.dataInizio,"dd/MM/yyyy")," ")}}function nt(i,a){if(1&i&&(e.TgZ(0,"label"),e._UZ(1,"i",13),e._uU(2),e.ALo(3,"date"),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.hij(" ","Data stato dichiarazione: a: "+e.xi3(3,1,null==t.formRicerca?null:t.formRicerca.dataFine,"dd/MM/yyyy")," ")}}function ot(i,a){if(1&i&&(e.TgZ(0,"div",15),e._uU(1),e.ALo(2,"statoDVersamento"),e.qZA()),2&i){const t=a.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t)," ")}}function at(i,a){if(1&i&&(e.TgZ(0,"label"),e._UZ(1,"i",13),e._uU(2," Stato: "),e.YNc(3,ot,3,3,"div",14),e.qZA()),2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("ngForOf",null==t.formRicerca?null:t.formRicerca.statoDichiarazione)}}function rt(i,a){if(1&i&&(e.TgZ(0,"label"),e._UZ(1,"i",13),e._uU(2),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.hij(" ","Anno protocollo: "+(null==t.formRicerca?null:t.formRicerca.annoProtocollo)," ")}}function st(i,a){if(1&i&&(e.TgZ(0,"label"),e._UZ(1,"i",13),e._uU(2),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.hij(" ","Anno protocollo: "+(null==t.formRicerca?null:t.formRicerca.numProtocollo)," ")}}function lt(i,a){if(1&i&&(e.TgZ(0,"div",11),e.YNc(1,et,3,1,"label",12),e.YNc(2,tt,3,1,"label",12),e.YNc(3,it,4,4,"label",12),e.YNc(4,nt,4,4,"label",12),e.YNc(5,at,4,1,"label",12),e.YNc(6,rt,3,1,"label",12),e.YNc(7,st,3,1,"label",12),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.formRicerca?null:t.formRicerca.codFisc),e.xp6(1),e.Q6J("ngIf",null==t.formRicerca?null:t.formRicerca.denomAzienda),e.xp6(1),e.Q6J("ngIf",null==t.formRicerca?null:t.formRicerca.dataInizio),e.xp6(1),e.Q6J("ngIf",null==t.formRicerca?null:t.formRicerca.dataFine),e.xp6(1),e.Q6J("ngIf",(null==t.formRicerca?null:t.formRicerca.statoDichiarazione)&&(null==t.formRicerca?null:t.formRicerca.statoDichiarazione.length)>0),e.xp6(1),e.Q6J("ngIf",null==t.formRicerca?null:t.formRicerca.annoProtocollo),e.xp6(1),e.Q6J("ngIf",null==t.formRicerca?null:t.formRicerca.numProtocollo)}}function ct(i,a){1&i&&(e.TgZ(0,"tr")(1,"th"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"th"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"th"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"th"),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"th"),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"th"),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"th"),e._uU(20),e.ALo(21,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,7,"RISULTATI_RICERCA_DICHIARAZIONE_VERS_ESO.TABLE.HEAD.AZIENDA")),e.xp6(3),e.Oqu(e.lcZ(6,9,"RISULTATI_RICERCA_DICHIARAZIONE_VERS_ESO.TABLE.HEAD.ANNO_RIF")),e.xp6(3),e.Oqu(e.lcZ(9,11,"RISULTATI_RICERCA_DICHIARAZIONE_VERS_ESO.TABLE.HEAD.DT_STATO")),e.xp6(3),e.Oqu(e.lcZ(12,13,"RISULTATI_RICERCA_DICHIARAZIONE_VERS_ESO.TABLE.HEAD.STATO")),e.xp6(3),e.Oqu(e.lcZ(15,15,"RISULTATI_RICERCA_DICHIARAZIONE_VERS_ESO.TABLE.HEAD.N_PROT")),e.xp6(3),e.Oqu(e.lcZ(18,17,"RISULTATI_RICERCA_DICHIARAZIONE_VERS_ESO.TABLE.HEAD.IMPORTO")),e.xp6(3),e.Oqu(e.lcZ(21,19,"RISULTATI_RICERCA_DICHIARAZIONE_VERS_ESO.TABLE.HEAD.AZIONI")))}function ut(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"a",23),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit;return e.oxw().onClickGoToNavMain(null==o?null:o.idEsoTVersamento,"edit")}),e._UZ(1,"i",24),e.qZA()}}function dt(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"a",25),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit;return e.oxw().onClickEliminaAnnulla(o,!0)}),e._UZ(1,"i",26),e.qZA()}}function mt(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"a",27),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit;return e.oxw().onClickEliminaAnnulla(o,!1)}),e._UZ(1,"i",26),e.qZA()}}function pt(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"a",28),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit;return e.oxw().onClickStampa(null==o?null:o.idEsoTVersamento)}),e._UZ(1,"i",29),e.qZA()}}function _t(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.ALo(7,"date"),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.ALo(14,"number"),e.qZA(),e.TgZ(15,"td",16)(16,"a",17),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.oxw().onClickGoToNavMain(null==r?null:r.idEsoTVersamento,"view")}),e._UZ(17,"i",18),e.qZA(),e.YNc(18,ut,2,0,"a",19),e.YNc(19,dt,2,0,"a",20),e.YNc(20,mt,2,0,"a",21),e.YNc(21,pt,2,0,"a",22),e.qZA()()}if(2&i){const t=a.$implicit,n=e.oxw();e.xp6(2),e.Oqu(null==t?null:t.codFiscale),e.xp6(2),e.Oqu(null==t?null:t.annoRiferimento),e.xp6(2),e.Oqu(e.xi3(7,10,null==t?null:t.dtStato,"dd/MM/yyyy")),e.xp6(3),e.Oqu(null==t?null:t.descStato),e.xp6(2),e.Oqu(null==t?null:t.numProtocollo),e.xp6(2),e.Oqu(e.xi3(14,13,null==t?null:t.importo,"0.2-2")),e.xp6(5),e.Q6J("ngIf",n.showModifica(t)),e.xp6(1),e.Q6J("ngIf",n.showElimina(t)),e.xp6(1),e.Q6J("ngIf",n.showAnnulla(t)),e.xp6(1),e.Q6J("ngIf",n.showStampa(t))}}let ft=(()=>{class i{constructor(t,n,o,r,c,u,d,f,g,m,p,v,h){this.logService=t,this.spinner=n,this.userService=o,this.customVersamentoEsoneriService=r,this.utilitiesService=c,this.translateService=u,this.promptModalService=d,this.alertMessageService=f,this.versamentoEsoneriService=g,this.messageService=m,this.sessionStorageService=p,this.router=v,this.route=h,this.changePaginationData=new e.vpe,this.eliminaDichiarazioneNotify=new e.vpe}ngOnInit(){this.logService.info(this.constructor.name,"ngOnInit"),this.ruolo=this.userService.getRuoloSessione()}onChangePaginationData(t){this.currentPaginationData=t,this.changePaginationData.emit(t)}showModifica(t){return t.idEsoDVersamentoStato===s.uT.BOZZA.ID}showElimina(t){return t.idEsoDVersamentoStato===s.uT.BOZZA.ID&&this.ruolo.idSilapDRuolo!==s.gD.REGIONE.ID}showAnnulla(t){return this.ruolo.idSilapDRuolo===s.gD.REGIONE.ID?t.idEsoDVersamentoStato===s.uT.AUTORIZZATA.ID:t.idEsoDVersamentoStato===s.uT.MODIFICATA.ID||t.idEsoDVersamentoStato===s.uT.ACCETTATA.ID}showStampa(t){return t.idEsoDVersamentoStato!==s.uT.ANNULLATA.ID&&t.idEsoDVersamentoStato!==s.uT.ELIMINATA.ID}onClickStampa(t){this.spinner.show(),this.customVersamentoEsoneriService.stampaVersamento(t,"response").subscribe({next:n=>{this.utilitiesService.downloadBlobFile(`${s.UK.DICHIARAZIONE_VERSAMENTO}.pdf`,n.body),this.spinner.hide()},error:n=>{console.log(this.constructor.name,`errore onClickEsportaFile: ${JSON.stringify(n)}`),this.spinner.hide()}})}onClickEsportaFile(t){this.spinner.show(),this.customVersamentoEsoneriService.stampaRicercaVersamentoEsoneri(this.formRicerca,t,"response").subscribe({next:n=>{console.log(`res esporta file: ${JSON.stringify(n)}`),"xls"===t&&(t="xlsx"),this.utilitiesService.downloadBlobFile(`${s.UK.RICERCA_VE}.${t}`,n.body),this.spinner.hide()},error:n=>{console.log(this.constructor.name,`errore onClickEsportaFile: ${JSON.stringify(n)}`),this.spinner.hide()}})}onClickEliminaAnnulla(t,n){var o=this;return(0,x.Z)(function*(){const r=o.translate((0,T.J)(n?"MODAL.TITLE.ELIMINA_DICH":"MODAL.TITLE.ANNULLA_DICH")),c=o.getMessageByCodDecodificato(t,n?"100022":"100023"),u=o.translate((0,T.J)("APP.YES")),d=o.translate((0,T.J)("APP.NO"));(yield o.promptModalService.openPrompt(r,c,u,d,"warning"))&&o.updateStato(t,n?s.uT.ELIMINATA.ID:s.uT.ANNULLATA.ID,n)})()}translate(t){return this.translateService.instant(t)}getMessageByCodDecodificato(t,n){const o=this.messageService.getMessaggioByCod(n);return _.c.replacePlaceHolder(o.dsSilapDMessaggio,{0:t.annoRiferimento,1:t.dsDenominazioneAzienda,2:t.codFiscale})}updateStato(t,n,o){this.alertMessageService.emptyMessages(),this.spinner.show();const r=this.getMessageByCodDecodificato(t,o?"100045":"100044");this.versamentoEsoneriService.updateStatoVersamento(t.idEsoTVersamento,n).subscribe({next:c=>{this.logService.info(this.constructor.name,`updateStatoVersamento res: ${JSON.stringify(c)}`),c.esitoPositivo?(o?this.alertMessageService.setSingleSuccessMessage(r):this.alertMessageService.setApiMessages(c.apiMessages),this.eliminaDichiarazioneNotify.emit(this.currentPaginationData)):this.alertMessageService.setApiMessages(c.apiMessages),this.spinner.hide()},error:c=>{this.logService.error(this.constructor.name,`updateStatoVersamento error: ${JSON.stringify(c)}`),this.spinner.hide()}})}onClickGoToNavMain(t,n){this.alertMessageService.emptyMessages(),this.spinner.show();const o={mode:n};(n===s.H6.VIEW?this.versamentoEsoneriService.getVersamento(t):this.versamentoEsoneriService.modificaVersamento(t)).subscribe({next:c=>{console.log(`onClickModifica: ${JSON.stringify(c)}`),c.esitoPositivo?(this.sessionStorageService.setItem(s.Uf.SESSION.WIZARD_MODE,o),this.sessionStorageService.setItem(s.Uf.SESSION.VERSAMENTO,c.versamento),this.router.navigate(["nav-main"],{relativeTo:this.route.parent})):this.alertMessageService.setApiMessages(c.apiMessages),this.spinner.hide()},error:c=>{console.log(this.constructor.name,`errore onClickModifica: ${JSON.stringify(c)}`),this.spinner.hide()}})}onClickModifica(t){this.versamentoEsoneriService.modificaVersamento(t).subscribe({next:n=>{console.log(`onClickModifica: ${JSON.stringify(n)}`),n.esitoPositivo||this.alertMessageService.setApiMessages(n.apiMessages),this.spinner.hide()},error:n=>{console.log(this.constructor.name,`errore onClickModifica: ${JSON.stringify(n)}`),this.spinner.hide()}})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(b.$),e.Y36(N.t2),e.Y36(U.K),e.Y36(K),e.Y36(Y.e),e.Y36(S.sK),e.Y36(V.p),e.Y36(R.O),e.Y36(D.gt),e.Y36(P.e),e.Y36(M.u),e.Y36(L.F0),e.Y36(L.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["colmirwcl-risultati-ricerca-dichiarazione-ver-eso"]],inputs:{currentPaginationData:"currentPaginationData",pagedResponse:"pagedResponse",formRicerca:"formRicerca"},outputs:{changePaginationData:"changePaginationData",eliminaDichiarazioneNotify:"eliminaDichiarazioneNotify"},decls:26,vars:16,consts:[[1,"row"],[1,"col-12"],[1,"col-auto"],[1,"filtri"],["class","col-sm-12 col-md-6 col-lg-7 filtri",4,"ngIf"],[1,"mt-5","scrollbar-table","scrollbar-primary"],[3,"pagedResponse","columnNumber","limit","changePaginationData"],["pagedTable",""],["colmirwclPaginationHead",""],["colmirwclPaginationBody",""],["type","button",1,"btn","btn-primary","ml-auto","btn-lg",3,"click"],[1,"col-sm-12","col-md-6","col-lg-7","filtri"],[4,"ngIf"],[1,"fas","fa-check"],["class","custom",4,"ngFor","ngForOf"],[1,"custom"],[1,"col-md-2"],["title","Visualizzare dichiarazione",1,"icon_light",3,"click"],[1,"fas","fa-eye"],["title","Modificare dichiarazione",3,"click",4,"ngIf"],["title","Eliminare dichiarazione",3,"click",4,"ngIf"],["title","Annullare dichiarazione",3,"click",4,"ngIf"],["class","icon_light","title","Stampare dichiarazione",3,"click",4,"ngIf"],["title","Modificare dichiarazione",3,"click"],[1,"fas","fa-edit"],["title","Eliminare dichiarazione",3,"click"],[1,"fas","fa-trash-alt"],["title","Annullare dichiarazione",3,"click"],["title","Stampare dichiarazione",1,"icon_light",3,"click"],[1,"fas","fa-file-pdf"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h3"),e._uU(3),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"div",0)(6,"div",2)(7,"p",3),e._uU(8),e.ALo(9,"translate"),e.qZA()(),e.YNc(10,lt,8,7,"div",4),e.qZA(),e.TgZ(11,"div",5)(12,"colmirwcl-paginated-table",6,7),e.NdJ("changePaginationData",function(r){return n.onChangePaginationData(r)}),e.YNc(14,ct,22,21,"ng-template",8),e.YNc(15,_t,22,16,"ng-template",9),e.qZA()(),e.TgZ(16,"div",0)(17,"div",2)(18,"button",10),e.NdJ("click",function(){return n.onClickEsportaFile("pdf")}),e._uU(19),e.ALo(20,"translate"),e.qZA()(),e.TgZ(21,"div",2)(22,"div",2)(23,"button",10),e.NdJ("click",function(){return n.onClickEsportaFile("xls")}),e._uU(24),e.ALo(25,"translate"),e.qZA()()()()),2&t&&(e.xp6(3),e.Oqu(e.lcZ(4,8,"RISULTATI_RICERCA_DICHIARAZIONE_VERS_ESO.TITLE")),e.xp6(5),e.Oqu(e.lcZ(9,10,"RISULTATI_RICERCA_DICHIARAZIONE_VERS_ESO.FILTRI_APPL")),e.xp6(2),e.Q6J("ngIf",n.formRicerca),e.xp6(2),e.Q6J("pagedResponse",n.pagedResponse)("columnNumber",10)("limit",null==n.pagedResponse?null:n.pagedResponse.recordPage),e.xp6(7),e.hij(" ",e.lcZ(20,12,"RISULTATI_RICERCA_DICHIARAZIONE_VERS_ESO.BUTTON.EXPORT_PDF")," "),e.xp6(5),e.hij(" ",e.lcZ(25,14,"RISULTATI_RICERCA_DICHIARAZIONE_VERS_ESO.BUTTON.EXPORT_EXCEL")," "))},directives:[I.O5,I.sg,Xe,G.Q,Q.Q],pipes:[S.X$,I.uU,Ke,I.JJ],styles:["td[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{margin:0 3pt;font-size:15px}.custom[_ngcontent-%COMP%]{margin-left:8px}a.icon_light[_ngcontent-%COMP%]{color:#016cb4}"]}),i})();const vt=["accordionRicerca"];function gt(i,a){1&i&&(e.TgZ(0,"h2",9),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"RICERCA_DICHIARAZIONE_VER_ESO.TITLE_OP_REGIONE")))}function ht(i,a){1&i&&(e.TgZ(0,"h2",9),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"RICERCA_DICHIARAZIONE_VER_ESO.TITLE_NO_OP_REGIONE")))}function It(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",10)(1,"button",11),e.NdJ("click",function(){return e.CHM(t),e.oxw().onClickGoToNavMain()}),e._uU(2),e.ALo(3,"translate"),e.qZA()()}2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"RICERCA_DICHIARAZIONE_VER_ESO.BTN_NUOVO")))}function At(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"colmirwcl-form-ricerca-dichiarazione-ver-eso",12),e.NdJ("datiRicerca",function(o){return e.CHM(t),e.oxw().onCerca(o)})("resetForm",function(){return e.CHM(t),e.oxw().onResetForm()}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("formPristine",t.formPristine)("formRicerca",t.formRicerca)}}function Ct(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"colmirwcl-risultati-ricerca-dichiarazione-ver-eso",13),e.NdJ("changePaginationData",function(o){return e.CHM(t),e.oxw().onChangePaginationData(o)})("eliminaDichiarazioneNotify",function(o){return e.CHM(t),e.oxw().eliminaDichiarazione(o)}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("formRicerca",t.ricercaDaInviare)("pagedResponse",t.pagedResponse)("currentPaginationData",t.currentPaginationData)}}let Tt=(()=>{class i{constructor(t,n,o,r,c,u,d,f,g,m,p){this.userService=t,this.router=n,this.spinner=o,this.logService=r,this.activatedRoute=c,this.messageService=u,this.versamentoEsoneriService=d,this.alertMessageService=f,this.route=g,this.versamentoService=m,this.sessionStorageService=p,this.activeIds=["panelRicerca"],this.ricercaEffettuata=!1}get OPERATORE_REGIONALE(){return s.gD.REGIONE.ID}get IS_OPERATORE_REGIONALE(){return this.ruolo.idSilapDRuolo===s.gD.REGIONE.ID}ngOnDestroy(){this.alertMessageService.emptyMessages()}ngOnInit(){this.spinner.show(),this.logService.info(this.constructor.name,"ngOnInit"),this.ruolo=this.userService.getRuoloSessione();let t="100007";this.ruolo.idSilapDRuolo===s.gD.REGIONE.ID&&(t="100106"),this.messaggioAccordionInfo=this.messageService.getMessaggioByCod(t),this.currentPaginationData={limit:this.activatedRoute.snapshot.params.limit||20,page:this.activatedRoute.snapshot.params.page||0,offset:0,sort:this.activatedRoute.snapshot.params.sort},this.initForm(),this.patchFormParams(this.activatedRoute.snapshot.params),this.spinner.hide()}initForm(){const t=new Date;let n=null,o=null;(this.ruolo.idSilapDRuolo===s.gD.LEGALE_RAPPRESENTANTE.ID||this.ruolo.idSilapDRuolo===s.gD.DELEGATO.ID||this.ruolo.idSilapDRuolo===s.gD.PERSONA_AUTORIZZATA.ID)&&(n=this.ruolo.codiceFiscaleSoggettoAbilitato,o=this.ruolo.denominazioneSoggettoAbilitato),t.setHours(0,0,0,0),this.formPristine={codFisc:n,denomAzienda:o,dataInizio:new Date(t.setFullYear(t.getFullYear()-1)),dataFine:new Date,statoDichiarazione:[s.uT.ACCETTATA.ID,null,s.uT.AUTORIZZATA.ID,s.uT.BOZZA.ID,null,s.uT.MODIFICATA.ID,s.uT.NON_AUTORIZZATA.ID],annoProtocollo:null,numProtocollo:null},this.formRicerca=this.formPristine}patchFormParams(t){!t.goSearch||(this.formRicerca=t)}onCerca(t){this.ricercaEffettuata=!1,this.logService.info(this.constructor.name,"onCerca",this.formRicerca),this.ricercaDaInviare=_.c.clone(t),this.effettuaRicerca(this.currentPaginationData.page,this.currentPaginationData.limit)}effettuaRicerca(t,n,o,r){r||this.alertMessageService.emptyMessages(),this.spinner.show(),this.logService.info(this.constructor.name,`effettuaRicerca: page:${t}, limit: ${n}`),this.versamentoEsoneriService.ricercaVersamentoEsoneri(t,this.ricercaDaInviare).subscribe({next:c=>{c&&c.esitoPositivo&&(this.pagedResponse=c,this.pagedResponse.list.length>0?this.setDisposition(t,n):this.alertMessageService.setSingleWarningMessage("Nessun risultato trovato")),this.spinner.hide()},error:c=>{this.logService.error(this.constructor.name,`errore: ${c}`),this.spinner.hide()}}),this.logService.info(this.constructor.name,`effettuaRicerca: response ${JSON.stringify(this.pagedResponse)}`)}onChangePaginationData(t){this.effettuaRicerca(t.page,t.limit,t.sort)}setDisposition(t,n){this.ricercaEffettuata=!0,this.accordionRicerca.collapseAll(),this.router.navigate([this.clearObject({codFisc:this.ricercaDaInviare.codFisc,dataFine:this.ricercaDaInviare.dataFine.toISOString(),dataInizio:this.ricercaDaInviare.dataInizio.toISOString(),denomAzienda:this.ricercaDaInviare.denomAzienda,numProtocollo:this.ricercaDaInviare.numProtocollo,statoDichiarazione:JSON.stringify(this.ricercaDaInviare.statoDichiarazione),page:t,goSearch:!0,limit:n})],{relativeTo:this.activatedRoute,replaceUrl:!0})}onResetForm(){this.alertMessageService.emptyMessages(),this.ricercaEffettuata=!1,this.router.navigate([this.clearObject({})],{relativeTo:this.activatedRoute,replaceUrl:!0})}clearObject(t){const n={};return Object.keys(t).filter(o=>null!=t[o]).forEach(o=>n[o]=t[o]),n}onClickGoToNavMain(){this.spinner.show(),this.sessionStorageService.setItem(s.Uf.SESSION.WIZARD_MODE,{mode:"ins"}),this.versamentoService.getNuovoVersamento().subscribe({next:n=>{console.log(`onClickModifica: ${JSON.stringify(n)}`),n.esitoPositivo?(this.sessionStorageService.setItem(s.Uf.SESSION.VERSAMENTO,n.versamento),this.router.navigate(["nav-main"],{relativeTo:this.route.parent})):this.alertMessageService.setApiMessages(n.apiMessages),this.spinner.hide()},error:n=>{console.log(this.constructor.name,`errore onClickModifica: ${JSON.stringify(n)}`),this.spinner.hide()}}),this.router.navigate(["nav-main"],{relativeTo:this.route.parent})}eliminaDichiarazione(t){this.pagedResponse&&1===this.pagedResponse.totalResult&&(this.ricercaEffettuata=!1),this.effettuaRicerca(t.page,t.limit,null,!0)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(U.K),e.Y36(L.F0),e.Y36(N.t2),e.Y36(b.$),e.Y36(L.gz),e.Y36(P.e),e.Y36(D.gt),e.Y36(R.O),e.Y36(L.gz),e.Y36(D.gt),e.Y36(M.u))},i.\u0275cmp=e.Xpm({type:i,selectors:[["colmirwcl-ricerca-dichiarazione-ver-eso"]],viewQuery:function(t,n){if(1&t&&e.Gf(vt,5),2&t){let o;e.iGM(o=e.CRH())&&(n.accordionRicerca=o.first)}},decls:10,vars:7,consts:[[3,"messaggio"],[1,"row"],["class","col-9",4,"ngIf"],["class","col-3",4,"ngIf"],["activeIds","panelRicerca","id","accordion-ricerca",3,"closeOthers","destroyOnHide"],["accordionRicerca",""],["title","Criteri di ricerca","id","panelRicerca"],["ngbPanelContent",""],[3,"formRicerca","pagedResponse","currentPaginationData","changePaginationData","eliminaDichiarazioneNotify",4,"ngIf"],[1,"col-9"],[1,"col-3"],["type","button",1,"btn","btn-primary","ml-auto","btn-lg",2,"float","right",3,"click"],[3,"formPristine","formRicerca","datiRicerca","resetForm"],[3,"formRicerca","pagedResponse","currentPaginationData","changePaginationData","eliminaDichiarazioneNotify"]],template:function(t,n){1&t&&(e._UZ(0,"colmirwcl-accordion-info",0),e.TgZ(1,"div",1),e.YNc(2,gt,3,3,"h2",2),e.YNc(3,ht,3,3,"h2",2),e.YNc(4,It,4,3,"div",3),e.qZA(),e.TgZ(5,"ngb-accordion",4,5)(7,"ngb-panel",6),e.YNc(8,At,1,2,"ng-template",7),e.qZA()(),e.YNc(9,Ct,1,3,"colmirwcl-risultati-ricerca-dichiarazione-ver-eso",8)),2&t&&(e.Q6J("messaggio",n.messaggioAccordionInfo),e.xp6(2),e.Q6J("ngIf",n.IS_OPERATORE_REGIONALE),e.xp6(1),e.Q6J("ngIf",!n.IS_OPERATORE_REGIONALE),e.xp6(1),e.Q6J("ngIf",(null==n.ruolo?null:n.ruolo.idSilapDRuolo)!==n.OPERATORE_REGIONALE),e.xp6(1),e.Q6J("closeOthers",!0)("destroyOnHide",!1),e.xp6(4),e.Q6J("ngIf",n.ricercaEffettuata))},directives:[H,I.O5,A.gY,A.Gk,A.gW,Ue,ft],pipes:[S.X$],styles:[""]}),i})();var ee=C(5919),te=C(4077);function Zt(i,a){1&i&&(e.TgZ(0,"h2"),e._UZ(1,"i",4),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&i&&(e.xp6(2),e.hij("",e.lcZ(3,1,"DATI_AZIENDALI.TITLE_INS")," "))}function St(i,a){1&i&&(e.TgZ(0,"h2"),e._UZ(1,"i",4),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&i&&(e.xp6(2),e.hij("",e.lcZ(3,1,"DATI_AZIENDALI.TITLE_EDIT")," "))}function Ot(i,a){1&i&&(e.TgZ(0,"h2"),e._UZ(1,"i",4),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&i&&(e.xp6(2),e.hij("",e.lcZ(3,1,"DATI_AZIENDALI.TITLE_VIS")," "))}function Et(i,a){1&i&&(e.TgZ(0,"p"),e._uU(1,"Inserire almeno 11 caratteri"),e.qZA())}function xt(i,a){if(1&i&&(e.TgZ(0,"div",34),e.YNc(1,Et,2,0,"p",2),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.f||null==t.f.codFiscale||null==t.f.codFiscale.errors?null:t.f.codFiscale.errors.minlength)}}function Dt(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",35)(1,"button",36),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onClickCercaAzienda()}),e._uU(2),e.ALo(3,"translate"),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("disabled",null==t.f||null==t.f.codFiscale?null:t.f.codFiscale.invalid),e.xp6(1),e.Oqu(e.lcZ(3,2,"APP.GENERICO.BTN.CERCA_UPPER_C"))}}function Pt(i,a){1&i&&(e.TgZ(0,"span",13),e._uU(1,"*"),e.qZA())}function Nt(i,a){if(1&i&&(e.TgZ(0,"div",27),e._UZ(1,"input",40),e.TgZ(2,"label",41),e._uU(3),e.qZA()()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("value",t.annoCorrenteValue),e.xp6(2),e.hij(" ",t.annoCorrenteValue," ")}}function Rt(i,a){if(1&i&&(e.TgZ(0,"div",11)(1,"div",27),e._UZ(2,"input",37),e.TgZ(3,"label",38),e._uU(4),e.qZA()(),e.YNc(5,Nt,4,2,"div",39),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("value",t.annoPrecedenteValue),e.xp6(2),e.hij(" ",t.annoPrecedenteValue," "),e.xp6(1),e.Q6J("ngIf",t.annoCorrenteValue)}}function zt(i,a){if(1&i&&(e.TgZ(0,"div",11)(1,"span",18),e._uU(2),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(null==t.versamentoCorrente?null:t.versamentoCorrente.annoRiferimento)}}function Lt(i,a){if(1&i&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Oqu(t.getMsgValidazioneByCode("100027"))}}function bt(i,a){if(1&i&&(e.TgZ(0,"div",34),e.YNc(1,Lt,2,1,"p",2),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.f||null==t.f.dsEmailRiferimento||null==t.f.dsEmailRiferimento.errors?null:t.f.dsEmailRiferimento.errors.pattern)}}function Vt(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",10)(1,"div",42)(2,"button",43),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onClickReset()}),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",44)(6,"button",45),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onClickConferma()}),e._uU(7),e.ALo(8,"translate"),e.qZA()()()}if(2&i){const t=e.oxw(2);e.xp6(3),e.Oqu(e.lcZ(4,3,"APP.GENERICO.BTN.ANNULLA")),e.xp6(3),e.Q6J("disabled",t.DATI_AZIENDALI_INVALID),e.xp6(1),e.Oqu(e.lcZ(8,5,"APP.GENERICO.BTN.CONFIRM"))}}function Mt(i,a){if(1&i&&(e.TgZ(0,"div",5)(1,"div",6)(2,"p",7),e._uU(3),e.ALo(4,"translate"),e.TgZ(5,"span",8),e._uU(6,"*"),e.qZA(),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"form",9)(10,"div",10)(11,"div",11)(12,"label",12),e._uU(13),e.ALo(14,"translate"),e.TgZ(15,"span",13),e._uU(16,"*"),e.qZA()(),e._UZ(17,"input",14),e.YNc(18,xt,2,1,"div",15),e.qZA(),e.YNc(19,Dt,4,4,"div",16),e.TgZ(20,"div",17),e._uU(21),e.ALo(22,"translate"),e.TgZ(23,"span",18),e._uU(24),e.qZA()()(),e.TgZ(25,"div",10)(26,"h4"),e._uU(27),e.ALo(28,"translate"),e.qZA()(),e.TgZ(29,"div",19)(30,"div",20),e._uU(31),e.ALo(32,"translate"),e.TgZ(33,"span",18),e._uU(34),e.qZA()(),e.TgZ(35,"div",20),e._uU(36),e.ALo(37,"translate"),e.TgZ(38,"span",18),e._uU(39),e.qZA()(),e.TgZ(40,"div",20),e._uU(41),e.ALo(42,"translate"),e.TgZ(43,"span",18),e._uU(44),e.qZA()()(),e.TgZ(45,"div",19)(46,"div",20),e._uU(47),e.ALo(48,"translate"),e.TgZ(49,"span",18),e._uU(50),e.qZA()()(),e.TgZ(51,"div",10)(52,"h3"),e._uU(53),e.ALo(54,"translate"),e.qZA()(),e.TgZ(55,"div",10)(56,"div",21),e._uU(57),e.ALo(58,"translate"),e.YNc(59,Pt,2,0,"span",22),e.qZA(),e.TgZ(60,"div",21),e._uU(61),e.ALo(62,"translate"),e.qZA()(),e.TgZ(63,"div",10),e.YNc(64,Rt,6,3,"div",23),e.YNc(65,zt,3,1,"div",23),e.TgZ(66,"div",21)(67,"span",18),e._uU(68),e.ALo(69,"number"),e.qZA()()(),e.TgZ(70,"div",10)(71,"div",11)(72,"label",24),e._uU(73),e.ALo(74,"translate"),e.TgZ(75,"span",13),e._uU(76,"*"),e.qZA()()(),e.TgZ(77,"div",25)(78,"label",26),e._uU(79),e.ALo(80,"translate"),e.TgZ(81,"span",13),e._uU(82,"*"),e.qZA()()()(),e.TgZ(83,"div",10)(84,"div",11)(85,"div",27),e._UZ(86,"input",28),e.TgZ(87,"label",29),e._uU(88),e.ALo(89,"translate"),e.qZA()(),e.TgZ(90,"div",27),e._UZ(91,"input",30),e.TgZ(92,"label",31),e._uU(93),e.ALo(94,"translate"),e.qZA()()(),e.TgZ(95,"div",25),e._UZ(96,"input",32),e.YNc(97,bt,2,1,"div",15),e.qZA()()(),e.YNc(98,Vt,9,7,"div",33),e.qZA()()),2&i){const t=e.oxw();e.xp6(3),e.hij("",e.lcZ(4,32,"APP.GENERICO.CAMPI_CONTR")," "),e.xp6(4),e.hij(" ",e.lcZ(8,34,"APP.GENERICO.OBBLIGO"),""),e.xp6(2),e.Q6J("formGroup",t.form),e.xp6(4),e.Oqu(e.lcZ(14,36,"DATI_AZIENDALI.LABEL.CF")),e.xp6(5),e.Q6J("ngIf",null==t.f||null==t.f.codFiscale?null:t.f.codFiscale.invalid),e.xp6(1),e.Q6J("ngIf",t.INS_MODE&&!t.AZIENDA_LOCKED),e.xp6(2),e.hij(" ",e.lcZ(22,38,"DATI_AZIENDALI.FIELD.DENOMINAZIONE")," "),e.xp6(3),e.Oqu(null==t.aziendaCorrente?null:t.aziendaCorrente.denomAzienda),e.xp6(3),e.Oqu(e.lcZ(28,40,"DATI_AZIENDALI.SUB_TITLE_SEDE_LEGALE")),e.xp6(4),e.hij("",e.lcZ(32,42,"DATI_AZIENDALI.FIELD.COMUNE")," "),e.xp6(3),e.Oqu((null!=t.aziendaCorrente&&null!=t.aziendaCorrente.comuneSede&&t.aziendaCorrente.comuneSede.id?(null==t.aziendaCorrente||null==t.aziendaCorrente.comuneSede?null:t.aziendaCorrente.comuneSede.id)+", ":"")+(null!=t.aziendaCorrente&&null!=t.aziendaCorrente.comuneSede&&t.aziendaCorrente.comuneSede.descr?null==t.aziendaCorrente||null==t.aziendaCorrente.comuneSede?null:t.aziendaCorrente.comuneSede.descr:"")),e.xp6(2),e.hij("",e.lcZ(37,44,"DATI_AZIENDALI.FIELD.INDIRIZZO")," "),e.xp6(3),e.Oqu(null==t.aziendaCorrente?null:t.aziendaCorrente.indirizzoSede),e.xp6(2),e.hij("",e.lcZ(42,46,"DATI_AZIENDALI.FIELD.CAP")," "),e.xp6(3),e.Oqu(null==t.aziendaCorrente?null:t.aziendaCorrente.capSede),e.xp6(3),e.hij("",e.lcZ(48,48,"DATI_AZIENDALI.FIELD.CCNL")," "),e.xp6(3),e.Oqu((null!=t.aziendaCorrente&&null!=t.aziendaCorrente.silapDCcnl&&t.aziendaCorrente.silapDCcnl.cod?(null==t.aziendaCorrente?null:t.aziendaCorrente.silapDCcnl.cod)+", ":"")+(null!=t.aziendaCorrente&&null!=t.aziendaCorrente.silapDCcnl&&t.aziendaCorrente.silapDCcnl.descr?null==t.aziendaCorrente||null==t.aziendaCorrente.silapDCcnl?null:t.aziendaCorrente.silapDCcnl.descr:"")),e.xp6(3),e.Oqu(e.lcZ(54,50,"DATI_AZIENDALI.SUB_TITLE_INSERIMENTO_DICH")),e.xp6(4),e.hij(" ",e.lcZ(58,52,"DATI_AZIENDALI.FIELD.ANNO_RIF")," "),e.xp6(2),e.Q6J("ngIf",t.INS_MODE),e.xp6(2),e.hij(" ",e.lcZ(62,54,"DATI_AZIENDALI.FIELD.CREDITO_RESIDUO")," "),e.xp6(3),e.Q6J("ngIf",t.INS_MODE),e.xp6(1),e.Q6J("ngIf",!t.INS_MODE),e.xp6(3),e.Oqu(e.xi3(69,56,null==t.aziendaCorrente?null:t.aziendaCorrente.numCreditoResiduo,"0.2-2")),e.xp6(5),e.hij(" ",e.lcZ(74,59,"DATI_AZIENDALI.FIELD.VERSAMENTO")," "),e.xp6(6),e.Oqu(e.lcZ(80,61,"DATI_AZIENDALI.LABEL.MAIL")),e.xp6(7),e.Q6J("value",1),e.xp6(2),e.hij(" ",e.lcZ(89,63,"DATI_AZIENDALI.FIELD.VERSAMENTO_1")," "),e.xp6(3),e.Q6J("value",2),e.xp6(2),e.hij(" ",e.lcZ(94,65,"DATI_AZIENDALI.FIELD.VERSAMENTO_2")," "),e.xp6(4),e.Q6J("ngIf",null==t.f||null==t.f.dsEmailRiferimento?null:t.f.dsEmailRiferimento.invalid),e.xp6(1),e.Q6J("ngIf",!t.VIEW_MODE)}}let qt=(()=>{class i{constructor(t,n,o,r,c,u,d,f,g,m){this.userService=t,this.spinner=n,this.versamentoService=o,this.logService=r,this.alertMessageService=c,this.messageService=u,this.utilitiesService=d,this.parametroService=f,this.promptModalService=g,this.translateService=m,this.emitConferma=new e.vpe,this.initialAzienda={comuneSede:{id:"",descr:""},silapDCcnl:{cod:"",descr:""}}}get f(){return this.form.controls}get AZIENDA_LOCKED(){return this.ruolo.idSilapDRuolo===s.gD.DELEGATO.ID||this.ruolo.idSilapDRuolo===s.gD.PERSONA_AUTORIZZATA.ID||this.ruolo.idSilapDRuolo===s.gD.LEGALE_RAPPRESENTANTE.ID}get VIEW_MODE(){return this.mode===s.H6.VIEW}get EDIT_MODE(){return this.mode===s.H6.EDIT}get INS_MODE(){return this.mode===s.H6.INS}get DATI_AZIENDALI_INVALID(){return!!this.form.invalid||_.c.isNullOrUndefined(this.aziendaCorrente)||_.c.isNullOrUndefined(this.aziendaCorrente.codFiscale)||this.aziendaCorrente.codFiscale!==this.f.codFiscale.value}get IS_OPERATORE_REGIONALE(){return this.ruolo.idSilapDRuolo===s.gD.REGIONE.ID}ngOnInit(){this.currentDate=new Date(this.utilitiesService.getCurrentDate()),this.messaggioAccordionInfo=this.messageService.getMessaggioByCod("100001"),this.versamentoCorrente=_.c.clone(this.initialVersamento),this.aziendaCorrente=_.c.clone(this.initialAzienda),this.ruolo=this.userService.getRuoloSessione(),this.determinaAnnoDiRiferimento(),this.asyncNgOnInit().finally(()=>{this.initForm(),this.patchValueInForm(),this.setFormState(),this.mode===s.H6.VIEW&&this.spinner.hide()})}asyncNgOnInit(){var t=this;return(0,x.Z)(function*(){const n=yield t.parametroService.getParametroByCod(ee.x.COD.MAILC);t.emailRegex=n.dsValore})()}determinaAnnoDiRiferimento(){const t=this.currentDate.getMonth(),n=this.currentDate.getFullYear(),o=this.currentDate.getFullYear()-1;this.annoPrecedenteValue=o,t!==s.vc.GENNAIO&&t!==s.vc.FEBBRAIO&&(this.annoCorrenteValue=n)}setFormState(){this.mode===s.H6.VIEW?this.form[s.UI.DISABLE]():this.mode===s.H6.INS?(this.AZIENDA_LOCKED&&this.form.controls.codFiscale[s.UI.DISABLE](),_.c.isNullOrUndefinedOrEmptyField(this.annoCorrenteValue)&&this.form.controls.annoRiferimento[s.UI.DISABLE]()):this.mode===s.H6.EDIT&&this.form.controls.codFiscale[s.UI.DISABLE]()}patchValueInForm(){let t;this.f.codFiscale.patchValue(this.AZIENDA_LOCKED?this.ruolo.codiceFiscaleSoggettoAbilitato:this.initialVersamento.codFiscale),this.mode===s.H6.EDIT||this.mode===s.H6.INS?t=this.cercaAzienda$():this.mode===s.H6.VIEW&&(this.aziendaCorrente.codFiscale=this.versamentoCorrente.codFiscale,this.initialAzienda.indirizzoSede=this.versamentoCorrente.versamentoSede.dsIndirizzo,this.initialAzienda.capSede=this.versamentoCorrente.versamentoSede.codCap,this.initialAzienda.denomAzienda=this.versamentoCorrente.dsDenominazioneAzienda,this.initialAzienda.idSilAziAnagrafica=this.versamentoCorrente.idSilAziAnagrafica,this.initialAzienda.comuneSede=this.versamentoCorrente.versamentoSede.comune,this.initialAzienda.silapDCcnl=this.versamentoCorrente.silapDCcnl?this.versamentoCorrente.silapDCcnl:null,this.initialAzienda.idSilAziSede=this.versamentoCorrente.versamentoSede.idSilAziSede,this.initialAzienda.ragioneSocialeSede=this.versamentoCorrente.versamentoSede.dsDenominazioneSede,this.initialAzienda.numCreditoResiduo=this.versamentoCorrente.numCreditoResiduo,this.initialAzienda.idEsoTCreditoResiduo=this.versamentoCorrente.esoTCreditoResiduo?this.versamentoCorrente.esoTCreditoResiduo.idEsoTCreditoResiduo:null,this.aziendaCorrente=_.c.clone(this.initialAzienda)),t&&(this.spinner.show(),t.subscribe({next:n=>{if(n.esitoPositivo){const o=n.azienda;_.c.isNullOrUndefinedOrEmptyField(o)?this.initialAzienda=null:(this.initialAzienda.codFiscale=o.codFiscale,this.f.codFiscale.patchValue(o.codFiscale),this.initialAzienda.indirizzoSede=o.indirizzoSede,this.initialAzienda.capSede=o.capSede,this.initialAzienda.denomAzienda=o.denomAzienda,this.initialAzienda.idSilAziAnagrafica=o.idSilAziAnagrafica,this.initialAzienda.comuneSede=o.comuneSede,this.initialAzienda.silapDCcnl=o.silapDCcnl,this.initialAzienda.idSilAziSede=o.idSilAziSede,this.initialAzienda.ragioneSocialeSede=o.ragioneSocialeSede,this.initialAzienda.numCreditoResiduo=o.numCreditoResiduo,this.initialAzienda.idEsoTCreditoResiduo=o.idEsoTCreditoResiduo,this.aziendaCorrente=_.c.clone(this.initialAzienda))}else this.alertMessageService.setApiMessages(n.apiMessages);this.spinner.hide()},error:n=>{this.logService.error(this.constructor.name,`loadMessage: ${JSON.stringify(n)}`),this.spinner.hide()}})),this.f.numRate.patchValue(this.versamentoCorrente.numRate),this.f.dsEmailRiferimento.patchValue(this.versamentoCorrente.dsEmailRiferimento),_.c.isNullOrUndefinedOrEmptyField(this.annoCorrenteValue)?this.f.annoRiferimento.patchValue(this.annoPrecedenteValue):this.f.annoRiferimento.patchValue(this.versamentoCorrente.annoRiferimento)}initForm(){this.form=new l.cw({codFiscale:new l.NI(null,[l.kI.required,l.kI.minLength(11)]),annoRiferimento:new l.NI(null,l.kI.required),dsEmailRiferimento:new l.NI(null,[l.kI.required,l.kI.pattern(this.emailRegex)]),numRate:new l.NI(null,l.kI.required)})}onClickCercaAzienda(){const t=this.cercaAzienda$();_.c.isNullOrUndefined(t)||t.subscribe({next:n=>{if(n.esitoPositivo){const o=n.azienda;this.aziendaCorrente.codFiscale=o.codFiscale,this.f.codFiscale.patchValue(o.codFiscale),this.aziendaCorrente.indirizzoSede=o.indirizzoSede,this.aziendaCorrente.capSede=o.capSede,this.aziendaCorrente.denomAzienda=o.denomAzienda,this.aziendaCorrente.idSilAziAnagrafica=o.idSilAziAnagrafica,this.aziendaCorrente.comuneSede=o.comuneSede,this.aziendaCorrente.idSilAziSede=o.idSilAziSede,this.aziendaCorrente.silapDCcnl=o.silapDCcnl,this.aziendaCorrente.numCreditoResiduo=o.numCreditoResiduo,this.aziendaCorrente.idEsoTCreditoResiduo=o.idEsoTCreditoResiduo,this.aziendaCorrente.ragioneSocialeSede=o.ragioneSocialeSede}else this.alertMessageService.setApiMessages(n.apiMessages);this.spinner.hide()},error:n=>{this.logService.error(this.constructor.name,`loadMessage: ${JSON.stringify(n)}`),this.spinner.hide()}})}cercaAzienda$(){this.alertMessageService.emptyMessages();const t=this.f.codFiscale.value;if(!_.c.isNullOrUndefinedOrEmptyField(t))return this.spinner.show(),this.versamentoService.ricercaAzienda(t,this.versamentoCorrente.idEsoTVersamento)}onClickReset(){this.alertMessageService.emptyMessages(),this.form.reset(),this.aziendaCorrente=_.c.clone(this.initialAzienda),this.f.codFiscale.patchValue(this.aziendaCorrente.codFiscale),this.f.annoRiferimento.patchValue(this.versamentoCorrente.annoRiferimento),this.f.numRate.patchValue(this.versamentoCorrente.numRate),this.f.dsEmailRiferimento.patchValue(this.versamentoCorrente.dsEmailRiferimento)}onClickConferma(){this.spinner.show(),this.alertMessageService.emptyMessages();let t=_.c.clone(this.versamentoCorrente);t.codFiscale=this.aziendaCorrente.codFiscale,t.dsDenominazioneAzienda=this.aziendaCorrente.denomAzienda,t.idSilAziAnagrafica=this.aziendaCorrente.idSilAziAnagrafica,t.versamentoSede.codCap=this.aziendaCorrente.capSede,t.versamentoSede.idSilAziSede=this.aziendaCorrente.idSilAziSede,t.versamentoSede.dsIndirizzo=this.aziendaCorrente.indirizzoSede,t.versamentoSede.dsDenominazioneSede=this.aziendaCorrente.ragioneSocialeSede,t.versamentoSede.comune=this.aziendaCorrente.comuneSede,t.annoRiferimento=this.f.annoRiferimento.value,t.numRate=this.f.numRate.value,t.dsEmailRiferimento=this.f.dsEmailRiferimento.value,t.numCreditoResiduo=this.aziendaCorrente.numCreditoResiduo,_.c.isNullOrUndefinedOrEmptyField(this.aziendaCorrente.idEsoTCreditoResiduo)||(t.esoTCreditoResiduo={idEsoTCreditoResiduo:this.aziendaCorrente.idEsoTCreditoResiduo,numValore:this.aziendaCorrente.numCreditoResiduo,codFiscale:this.aziendaCorrente.codFiscale}),t.silapDCcnl=this.aziendaCorrente.silapDCcnl,this.aziendaCorrente.silapDCcnl&&!this.aziendaCorrente.silapDCcnl.id&&(t.silapDCcnl=null),11==t.codFiscale.length&&(t.partivaIva=t.codFiscale),(this.mode===s.H6.INS?this.versamentoService.salvaDatiAziendali(t):this.versamentoService.controlloModifica(t)).subscribe({next:o=>{if(o.esitoPositivo){const r=o.versamento;this.mode===s.H6.EDIT&&o.apiMessages&&o.apiMessages.length>0?this.openPopUpModifica(t,o.apiMessages[0].message):this.emitConfermaSalvataggio(r)}else this.alertMessageService.setApiMessages(o.apiMessages);this.spinner.hide()},error:o=>{this.logService.error(this.constructor.name,`onClickConferma: ${JSON.stringify(o)}`),this.spinner.hide()}})}openPopUpModifica(t,n){var o=this;return(0,x.Z)(function*(){const c=n,u=o.translate((0,T.J)("APP.YES")),d=o.translate((0,T.J)("APP.NO"));(yield o.promptModalService.openPrompt("Da inventare",c,u,d,"warning"))&&o.goToModifica(t)})()}goToModifica(t){this.spinner.show(),this.versamentoService.modificaDatiAziendali(t).subscribe({next:n=>{n.esitoPositivo?this.emitConfermaSalvataggio(n.versamento):this.alertMessageService.setApiMessages(n.apiMessages),this.spinner.hide()},error:n=>{this.logService.error(this.constructor.name,`onClickConferma: ${JSON.stringify(n)}`),this.spinner.hide()}})}translate(t){return this.translateService.instant(t)}emitConfermaSalvataggio(t){this.emitConferma.emit(t)}getMsgValidazioneByCode(t){return this.messageService.getMessaggioByCod(t).dsSilapDMessaggio}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(U.K),e.Y36(N.t2),e.Y36(D.gt),e.Y36(b.$),e.Y36(R.O),e.Y36(P.e),e.Y36(Y.e),e.Y36(te.s),e.Y36(V.p),e.Y36(S.sK))},i.\u0275cmp=e.Xpm({type:i,selectors:[["colmirwcl-dati-aziendali"]],inputs:{mode:"mode",initialVersamento:"initialVersamento"},outputs:{emitConferma:"emitConferma"},decls:6,vars:5,consts:[[1,"container"],[3,"messaggio"],[4,"ngIf"],["class","card",4,"ngIf"],[1,"fas","fa-edit","mr-2",2,"color","#005ca9"],[1,"card"],[1,"card-body"],[1,"text-muted"],[1,"oblg"],[3,"formGroup"],[1,"row"],[1,"mb-3","col-sm-12","col-md-4"],["for","codFiscaleDatiAziendali"],["title","campo obbligatorio",1,"oblg"],["type","text","formControlName","codFiscale","oninput","this.value = this.value.toUpperCase().trim()","id","codFiscaleDatiAziendali","maxlength","16",1,"form-control"],["class","text-danger",4,"ngIf"],["class","col-sm-12 col-md-2",4,"ngIf"],[1,"mb-3","col-sm-12","col-md-5","lettura"],[1,"valore"],[1,"row","lettura"],[1,"col-sm-12","col-md-4"],[1,"mb-3","col-sm-12","col-md-4","lettura"],["class","oblg","title","campo obbligatorio",4,"ngIf"],["class","mb-3 col-sm-12 col-md-4",4,"ngIf"],["for","versamento",1,"form-check-label"],[1,"mb-3","col-sm-12","col-md-3","lettura"],["for","mailRiferimento",1,"form-check-label"],[1,"form-check","form-check-inline"],["formControlName","numRate","type","radio","id","numRate1",1,"form-check-input",3,"value"],["for","numRate1",1,"form-check-label"],["formControlName","numRate","type","radio","id","numRate2",1,"form-check-input",3,"value"],["for","numRate2",1,"form-check-label"],["type","text","formControlName","dsEmailRiferimento","oninput","this.value = this.value.trim()","id","mailRiferimento",1,"form-control"],["class","row",4,"ngIf"],[1,"text-danger"],[1,"col-sm-12","col-md-2"],["type","button",1,"btn","btn-outline-primary","mt-lg-btn-form",3,"disabled","click"],["formControlName","annoRiferimento","type","radio","id","annoPrecedenteValue",1,"form-check-input",3,"value"],["for","annoPrecedenteValue",1,"form-check-label"],["class","form-check form-check-inline",4,"ngIf"],["formControlName","annoRiferimento","type","radio","id","annoCorrenteValue",1,"form-check-input",3,"value"],["for","annoCorrenteValue",1,"form-check-label"],[1,"col"],["type","button",1,"btn","btn-outline-secondary","btn-sm",3,"click"],[1,"col-auto"],["type","button",1,"btn","btn-sm","btn-primary",3,"disabled","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"colmirwcl-accordion-info",1),e.YNc(2,Zt,4,3,"h2",2),e.YNc(3,St,4,3,"h2",2),e.YNc(4,Ot,4,3,"h2",2),e.YNc(5,Mt,99,67,"div",3),e.qZA()),2&t&&(e.xp6(1),e.Q6J("messaggio",n.messaggioAccordionInfo),e.xp6(1),e.Q6J("ngIf",n.INS_MODE),e.xp6(1),e.Q6J("ngIf",n.EDIT_MODE),e.xp6(1),e.Q6J("ngIf",n.VIEW_MODE),e.xp6(1),e.Q6J("ngIf",n.form))},directives:[H,I.O5,l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,l.nD,l._],pipes:[S.X$,I.JJ],styles:[""]}),i})();function yt(i,a){if(1&i&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Oqu(t.getMsgValidazioneByCode("100004"))}}function Ut(i,a){if(1&i&&(e.TgZ(0,"div",36),e.YNc(1,yt,2,1,"p",37),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.f||null==t.f.dataFestaPatronale?null:t.f.dataFestaPatronale.errors)}}function Ft(i,a){if(1&i&&(e.TgZ(0,"div",36)(1,"p"),e._uU(2),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(t.getMsgValidazioneByCode("100105"))}}function wt(i,a){if(1&i&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Oqu(t.getMsgValidazioneByCode("100004"))}}function Jt(i,a){if(1&i&&(e.TgZ(0,"div",36),e.YNc(1,wt,2,1,"p",37),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.f||null==t.f.dataGiorniFestivi?null:t.f.dataGiorniFestivi.errors)}}function Ht(i,a){if(1&i&&(e.TgZ(0,"div",36)(1,"p"),e._uU(2),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(t.getMessageByCodDecodificato())}}function Bt(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"a",40),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().index;return e.oxw(2).onClickElimina(o)}),e._UZ(1,"i",41),e.qZA()}}function Yt(i,a){if(1&i&&(e.TgZ(0,"li",38),e._uU(1),e.ALo(2,"date"),e.YNc(3,Bt,2,0,"a",39),e.qZA()),2&i){const t=a.$implicit,n=e.oxw(2);e.xp6(1),e.hij("",e.xi3(2,2,null==t?null:t.dGgFestivo,"dd/MM/yyyy")," "),e.xp6(2),e.Q6J("ngIf",!n.VIEW_MODE)}}function kt(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",7)(1,"div",42)(2,"button",43),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onClickReset()}),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",44)(6,"button",45),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onClickConfermaProsegui()}),e._uU(7),e.ALo(8,"translate"),e.qZA()()()}if(2&i){const t=e.oxw(2);e.xp6(3),e.Oqu(e.lcZ(4,3,"APP.GENERICO.BTN.ANNULLA")),e.xp6(3),e.Q6J("disabled",t.GIORNI_LAVORATIVI_INVALID),e.xp6(1),e.Oqu(e.lcZ(8,5,"APP.GENERICO.BTN.CONFIRM"))}}const ie=function(i){return{year:i,month:1,day:1}},ne=function(i){return{year:i,month:12,day:31}};function Qt(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"p",4),e._uU(3),e.ALo(4,"translate"),e.TgZ(5,"span",5),e._uU(6,"*"),e.qZA(),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"form",6)(10,"div",7)(11,"div",8)(12,"label",9),e._uU(13),e.ALo(14,"translate"),e.TgZ(15,"span",10),e._uU(16,"*"),e.qZA()(),e.TgZ(17,"div",11)(18,"div",12),e._UZ(19,"input",13),e.TgZ(20,"label",14),e._uU(21),e.ALo(22,"translate"),e.qZA()(),e.TgZ(23,"div",12),e._UZ(24,"input",15),e.TgZ(25,"label",16),e._uU(26),e.ALo(27,"translate"),e.qZA()()()(),e.TgZ(28,"div",17)(29,"label",18),e._uU(30),e.ALo(31,"translate"),e.qZA(),e.TgZ(32,"div",19)(33,"div",20)(34,"input",21,22),e.NdJ("change",function(){return e.CHM(t),e.oxw().onChnageDataFestaPatronale()})("dateSelect",function(){return e.CHM(t),e.oxw().onChnageDataFestaPatronale()}),e.qZA(),e.TgZ(36,"div",23)(37,"button",24),e.NdJ("click",function(){return e.CHM(t),e.MAs(35).toggle()}),e.TgZ(38,"span",25),e._uU(39),e.ALo(40,"translate"),e.qZA(),e._UZ(41,"i",26),e.qZA()()(),e.YNc(42,Ut,2,1,"div",27),e.YNc(43,Ft,3,1,"div",27),e.qZA()()(),e.TgZ(44,"div",7)(45,"div",28)(46,"label",29),e._uU(47),e.ALo(48,"translate"),e.qZA(),e.TgZ(49,"div",30)(50,"div",20)(51,"input",31,32),e.NdJ("change",function(){return e.CHM(t),e.oxw().onChnageDate()})("dateSelect",function(o){return e.CHM(t),e.oxw().onDateSelection(o)}),e.qZA(),e.TgZ(53,"div",23)(54,"button",24),e.NdJ("click",function(){return e.CHM(t),e.MAs(52).toggle()}),e.TgZ(55,"span",25),e._uU(56),e.ALo(57,"translate"),e.qZA(),e._UZ(58,"i",26),e.qZA()()(),e.YNc(59,Jt,2,1,"div",27),e.YNc(60,Ht,3,1,"div",27),e.qZA()(),e.TgZ(61,"div",19)(62,"label",33),e._uU(63),e.ALo(64,"translate"),e.qZA(),e.TgZ(65,"ul"),e.YNc(66,Yt,4,5,"li",34),e.qZA()()(),e.YNc(67,kt,9,7,"div",35),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(3),e.hij("",e.lcZ(4,23,"APP.GENERICO.CAMPI_CONTR")," "),e.xp6(4),e.hij(" ",e.lcZ(8,25,"APP.GENERICO.OBBLIGO"),""),e.xp6(2),e.Q6J("formGroup",t.form),e.xp6(4),e.Oqu(e.lcZ(14,27,"GIORNI_LAVORATIVI.LABEL.GIORNI_LAVORATIVI")),e.xp6(6),e.Q6J("value",5),e.xp6(2),e.hij(" ",e.lcZ(22,29,"GIORNI_LAVORATIVI.LABEL.GIORNI_LAV_1")," "),e.xp6(3),e.Q6J("value",6),e.xp6(2),e.hij(" ",e.lcZ(27,31,"GIORNI_LAVORATIVI.LABEL.GIORNI_LAV_2")," "),e.xp6(4),e.Oqu(e.lcZ(31,33,"GIORNI_LAVORATIVI.LABEL.FESTA_PATRONALE")),e.xp6(4),e.Q6J("minDate",e.VKq(43,ie,null==t.versamentoCorrente?null:t.versamentoCorrente.annoRiferimento))("maxDate",e.VKq(45,ne,null==t.versamentoCorrente?null:t.versamentoCorrente.annoRiferimento)),e.xp6(5),e.Oqu(e.lcZ(40,35,"APP.GENERICO.BTN.APRI_CAL")),e.xp6(3),e.Q6J("ngIf",null==t.f||null==t.f.dataFestaPatronale?null:t.f.dataFestaPatronale.invalid),e.xp6(1),e.Q6J("ngIf",t.errorFestaPatronale&&(null==t.f||null==t.f.dataFestaPatronale?null:t.f.dataFestaPatronale.value)),e.xp6(4),e.Oqu(e.lcZ(48,37,"GIORNI_LAVORATIVI.LABEL.GIORNI_FEST_CONTRATTO")),e.xp6(4),e.Q6J("minDate",e.VKq(47,ie,null==t.versamentoCorrente?null:t.versamentoCorrente.annoRiferimento))("maxDate",e.VKq(49,ne,null==t.versamentoCorrente?null:t.versamentoCorrente.annoRiferimento)),e.xp6(5),e.Oqu(e.lcZ(57,39,"APP.GENERICO.BTN.APRI_CAL")),e.xp6(3),e.Q6J("ngIf",null==t.f||null==t.f.dataGiorniFestivi?null:t.f.dataGiorniFestivi.invalid),e.xp6(1),e.Q6J("ngIf",t.error&&(null==t.f||null==t.f.dataGiorniFestivi?null:t.f.dataGiorniFestivi.value)),e.xp6(3),e.Oqu(e.lcZ(64,41,"GIORNI_LAVORATIVI.LABEL.ELENCO_GIORNI_FEST_CONTRATTO")),e.xp6(3),e.Q6J("ngForOf",t.elencoGiorniFestivi),e.xp6(1),e.Q6J("ngIf",!t.VIEW_MODE)}}let Gt=(()=>{class i{constructor(t,n,o){this.messageService=t,this.alertMessageService=n,this.spinner=o,this.emitConferma=new e.vpe,this.form=new l.cw({giorniLav:new l.NI(null,l.kI.required),dataFestaPatronale:new l.NI(null),dataGiorniFestivi:new l.NI(null),giorniLavContratto:new l.NI(null)})}set versamenetoProvinciaSelezionata(t){this.versamenetoProvinciaSelezionataInitial=t,this.versamenetoProvinciaSelezionataCurrent=_.c.clone(this.versamenetoProvinciaSelezionataInitial),this.patchValueInForm()}get VIEW_MODE(){return this.mode===s.H6.VIEW}get f(){return this.form.controls}get GIORNI_LAVORATIVI_INVALID(){var t;return!(null===(t=this.form)||void 0===t?void 0:t.valid)||this.error||this.errorFestaPatronale}ngOnInit(){this.versamentoCorrente=_.c.clone(this.initialVersamento),this.mode===s.H6.VIEW&&this.form[s.UI.DISABLE](),this.spinner.hide()}patchValueInForm(){this.f.dataGiorniFestivi.reset(),this.f.giorniLav.patchValue(this.versamenetoProvinciaSelezionataCurrent.numGgLavorativiSettimanali),this.versamenetoProvinciaSelezionataCurrent.dFestaPatronale&&this.f.dataFestaPatronale.patchValue(new Date(this.versamenetoProvinciaSelezionataCurrent.dFestaPatronale)),this.elencoGiorniFestivi=[],this.versamenetoProvinciaSelezionataCurrent.esoTVersamentoPvGgExtraFestivis&&(this.elencoGiorniFestivi=_.c.clone(this.versamenetoProvinciaSelezionataCurrent.esoTVersamentoPvGgExtraFestivis))}onChnageDataFestaPatronale(){const t=this.f.dataFestaPatronale;if(!t.valid||_.c.isNullOrUndefinedOrEmptyField(t.value))return t.reset(),void(this.errorFestaPatronale=!1);let n=new Date(t.value);n.setHours(0,0,0,0),this.errorFestaPatronale=!!this.elencoGiorniFestivi.some(r=>{let c=new Date(r.dGgFestivo);return c.setHours(0,0,0,0),c.getTime()===n.getTime()})}onChnageDate(){const t=this.f.dataGiorniFestivi;if(!t.valid||_.c.isNullOrUndefinedOrEmptyField(t.value))return t.reset(),this.error=!1,void(this.errorFestaPatronale=!1);const n=new Date(t.value);this.addRemoveGiornofestivo(n)}onDateSelection(t){let n=new Date(t.year,t.month-1,t.day);this.addRemoveGiornofestivo(n)}addRemoveGiornofestivo(t){t.setHours(0,0,0,0);const n=this.elencoGiorniFestivi.some(u=>{let d=new Date(u.dGgFestivo);return d.setHours(0,0,0,0),d.getTime()===t.getTime()}),o=this.f.dataFestaPatronale;let r;if(o.valid){const u=new Date(o.value);u.setHours(0,0,0,0),r=u.getTime()}const c=t.getTime()===r;n&&(this.error=!0),c&&(this.errorFestaPatronale=!0),this.error||this.errorFestaPatronale||(this.elencoGiorniFestivi.push({dGgFestivo:t}),this.error=!1,this.errorFestaPatronale=!1)}onClickReset(){if(this.alertMessageService.emptyMessages(),this.form.reset(),this.error=!1,this.errorFestaPatronale=!1,this.versamentoCorrente=_.c.clone(this.initialVersamento),!_.c.isNullOrUndefinedOrEmptyField(this.versamenetoProvinciaSelezionataInitial.dFestaPatronale)){const t=new Date(this.versamenetoProvinciaSelezionataInitial.dFestaPatronale);this.f.dataFestaPatronale.patchValue(t)}this.f.giorniLav.setValue(this.versamenetoProvinciaSelezionataInitial.numGgLavorativiSettimanali),this.elencoGiorniFestivi=_.c.clone(this.versamenetoProvinciaSelezionataInitial.esoTVersamentoPvGgExtraFestivis)}onClickConfermaProsegui(){this.versamenetoProvinciaSelezionataCurrent.numGgLavorativiSettimanali=this.f.giorniLav.value,this.versamenetoProvinciaSelezionataCurrent.dFestaPatronale=this.f.dataFestaPatronale.value,this.versamenetoProvinciaSelezionataCurrent.esoTVersamentoPvGgExtraFestivis=this.elencoGiorniFestivi,this.emitConferma.emit(this.versamenetoProvinciaSelezionataCurrent)}getMsgValidazioneByCode(t){return(this.messageService.getMessaggioByCod(t)||{}).dsSilapDMessaggio}getMessageByCodDecodificato(){const t=this.messageService.getMessaggioByCod("100053"),n={0:this.f.dataGiorniFestivi.value.toLocaleDateString(),1:this.versamentoCorrente.dsDenominazioneAzienda,2:this.versamentoCorrente.codFiscale};return _.c.replacePlaceHolder(t.dsSilapDMessaggio,n)}onClickElimina(t){this.error=!1,this.errorFestaPatronale=!1,this.elencoGiorniFestivi.splice(t,1),this.f.dataGiorniFestivi.reset()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(P.e),e.Y36(R.O),e.Y36(N.t2))},i.\u0275cmp=e.Xpm({type:i,selectors:[["colmirwcl-giorni-lavorativi"]],inputs:{initialVersamento:"initialVersamento",mode:"mode",versamenetoProvinciaSelezionata:"versamenetoProvinciaSelezionata"},outputs:{emitConferma:"emitConferma"},decls:2,vars:1,consts:[[1,"container-body"],["class","card",4,"ngIf"],[1,"card"],[1,"card-body"],[1,"text-muted"],[1,"oblg"],[3,"formGroup"],[1,"row"],[1,"col-sm-6","col-md-3"],["for","giorniLavorativi"],["title","campo obbligatorio",1,"oblg"],[1,"mb-3","col-sm-9","col-md-5","mt-2"],[1,"form-check","form-check-inline"],["type","radio","formControlName","giorniLav","id","giorniLav1",1,"form-check-input",3,"value"],["for","giorniLav1",1,"form-check-label"],["type","radio","formControlName","giorniLav","id","giorniLav2",1,"form-check-input",3,"value"],["for","giorniLav2",1,"form-check-label"],[1,"mb-5","col-sm-12","col-md-7","mb-2"],["for","festaPatronale"],[1,"mb-3","col-sm-12","col-md-4"],[1,"input-group"],["type","text","formControlName","dataFestaPatronale","id","festaPatronale","ngbDatepicker","","maxlength","10",1,"form-control",3,"minDate","maxDate","change","dateSelect"],["d_festaPatronale","ngbDatepicker"],[1,"input-group-addon"],["type","button",1,"btn","btn-outline-primary","calendar",3,"click"],[1,"sr-only"],[1,"far","fa-calendar-alt","fa-lg"],["class","text-danger",4,"ngIf"],[1,"mb-3","col-sm-6","col-md-3"],["for","giorniFestivi"],[1,"mb-3","col-sm-12","col-md-10"],["type","text","formControlName","dataGiorniFestivi","id","giorniFestivi","ngbDatepicker","","maxlength","10",1,"form-control",3,"minDate","maxDate","change","dateSelect"],["d_giorniFestivi","ngbDatepicker"],["for","giorniLavContratto"],["class","mt-2",4,"ngFor","ngForOf"],["class","row",4,"ngIf"],[1,"text-danger"],[4,"ngIf"],[1,"mt-2"],[3,"click",4,"ngIf"],[3,"click"],["title","Elimina",1,"fas","fa-trash-alt"],[1,"col"],["type","button",1,"btn","btn-outline-secondary","btn-sm",3,"click"],[1,"col-auto"],["type","button",1,"btn","btn-sm","btn-primary",3,"disabled","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Qt,68,51,"div",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",n.form))},directives:[I.O5,l._Y,l.JL,l.sg,l._,l.Fj,l.JJ,l.u,A.J4,l.nD,I.sg],pipes:[S.X$,I.uU],styles:[""]}),i})();const $t=["d_dataFine"],Wt=["d_dataInizio"];function jt(i,a){1&i&&(e.TgZ(0,"p",15),e._uU(1),e.ALo(2,"translate"),e.TgZ(3,"span",16),e._uU(4,"*"),e.qZA(),e._uU(5),e.ALo(6,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij("",e.lcZ(2,2,"APP.GENERICO.CAMPI_CONTR")," "),e.xp6(4),e.hij(" ",e.lcZ(6,4,"APP.GENERICO.OBBLIGO"),""))}function Xt(i,a){if(1&i&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.hij(" ",t.getMsgValidazioneByCode("100004"),"")}}function Kt(i,a){if(1&i&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.Oqu(t.getMsgValidazioneByCode("100003"))}}function ei(i,a){if(1&i&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.Oqu(t.getMsgValidazioneByCode("100077"))}}function ti(i,a){if(1&i&&(e.TgZ(0,"div",42),e.YNc(1,Xt,2,1,"p",11),e.YNc(2,Kt,2,1,"p",11),e.YNc(3,ei,2,1,"p",11),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",!(null!=t.f&&null!=t.f.dataInizio&&null!=t.f.dataInizio.errors&&t.f.dataInizio.errors.invalidDataRange||null!=t.f&&null!=t.f.dataInizio&&null!=t.f.dataInizio.errors&&t.f.dataInizio.errors.dateAllowed)),e.xp6(1),e.Q6J("ngIf",null==t.f||null==t.f.dataInizio||null==t.f.dataInizio.errors?null:t.f.dataInizio.errors.invalidDataRange),e.xp6(1),e.Q6J("ngIf",null==t.f||null==t.f.dataInizio||null==t.f.dataInizio.errors||null==t.f.dataInizio.errors.dateAllowed?null:t.f.dataInizio.errors.dateAllowed.invalidGenerico)}}function ii(i,a){if(1&i&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.Oqu(t.getMsgValidazioneByCode("100004"))}}function ni(i,a){if(1&i&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.Oqu(t.getMsgValidazioneByCode("100077"))}}function oi(i,a){if(1&i&&(e.TgZ(0,"div",42),e.YNc(1,ii,2,1,"p",11),e.YNc(2,ni,2,1,"p",11),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",!(null!=t.f&&null!=t.f.dataFine&&null!=t.f.dataFine.errors&&t.f.dataFine.errors.dateAllowed)),e.xp6(1),e.Q6J("ngIf",null==t.f||null==t.f.dataFine||null==t.f.dataFine.errors||null==t.f.dataFine.errors.dateAllowed?null:t.f.dataFine.errors.dateAllowed.invalidGenerico)}}function ai(i,a){if(1&i&&(e.TgZ(0,"option",35),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.Q6J("ngValue",null==t?null:t.id),e.xp6(1),e.hij(" ",null==t?null:t.descr,"")}}function ri(i,a){1&i&&(e.TgZ(0,"p"),e._uU(1,"Liceziamento collettivo gi\xe0 presente per un altra provincia della stessa dichiarazione"),e.qZA())}function si(i,a){if(1&i&&(e.TgZ(0,"div",42),e.YNc(1,ri,2,0,"p",11),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.f||null==t.f.motSospensioneSelect||null==t.f.motSospensioneSelect.errors?null:t.f.motSospensioneSelect.errors.motivoSospensioneValidator)}}function li(i,a){1&i&&(e.TgZ(0,"span",16),e._uU(1,"*"),e.qZA())}function ci(i,a){if(1&i&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&i){const t=e.oxw(5);e.xp6(1),e.Oqu(t.getMsgValidazioneByCode("100069"))}}function ui(i,a){if(1&i&&(e.TgZ(0,"div",42),e.YNc(1,ci,2,1,"p",11),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.Q6J("ngIf",null==t.f||null==t.f.percentSospSelect?null:t.f.percentSospSelect.errors)}}function di(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",43)(1,"label",44),e._uU(2),e.ALo(3,"translate"),e.YNc(4,li,2,0,"span",39),e.qZA(),e.TgZ(5,"div",20)(6,"input",45),e.NdJ("change",function(){return e.CHM(t),e.oxw(3).onChangePercentSosp()}),e.qZA(),e.YNc(7,ui,2,1,"div",28),e.qZA()()}if(2&i){const t=e.oxw(3);e.xp6(2),e.Oqu(e.lcZ(3,3,"SOSPENSIONI.LABEL.%_SOSPENSIONE")),e.xp6(2),e.Q6J("ngIf",null==t.f||null==t.f.percentSospSelect?null:t.f.percentSospSelect.enabled),e.xp6(3),e.Q6J("ngIf",(null==t.f||null==t.f.percentSospSelect?null:t.f.percentSospSelect.invalid)&&(null==t.f||null==t.f.percentSospSelect?null:t.f.percentSospSelect.value))}}function mi(i,a){1&i&&(e.TgZ(0,"span",16),e._uU(1,"*"),e.qZA())}function pi(i,a){if(1&i&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.Oqu(t.getMsgValidazioneByCode("100070"))}}function _i(i,a){if(1&i&&(e.TgZ(0,"div",42),e.YNc(1,pi,2,1,"p",11),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.f||null==t.f.numLavSospSelect?null:t.f.numLavSospSelect.errors)}}function fi(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",4)(1,"div",46)(2,"button",47),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).onClickReset()}),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",48)(6,"button",49),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).onClickConferma()}),e._uU(7),e.ALo(8,"translate"),e.qZA()()()}if(2&i){const t=e.oxw(3);e.xp6(3),e.hij(" ",e.lcZ(4,3,"APP.GENERICO.BTN.ANNULLA")," "),e.xp6(3),e.Q6J("disabled",t.SOSPENSIONI_INVALID),e.xp6(1),e.hij(" ",e.lcZ(8,5,"APP.GENERICO.BTN.CONFERMA")," ")}}const vi=function(i){return{year:i,month:12,day:31}},gi=function(i){return{year:i,month:1,day:1}};function hi(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"form",17)(1,"div",4)(2,"div",18)(3,"label",19),e._uU(4),e.ALo(5,"translate"),e.TgZ(6,"span",16),e._uU(7,"*"),e.qZA()(),e.TgZ(8,"div",20)(9,"div",21)(10,"input",22,23),e.NdJ("keyup",function(){e.CHM(t);const o=e.oxw(2);return o.updateValueAndValidity(null==o.f?null:o.f.dataFine),o.updateValueAndValidity(null==o.f?null:o.f.dataInizio)})("dateSelect",function(){e.CHM(t);const o=e.oxw(2);return o.updateValueAndValidity(null==o.f?null:o.f.dataFine),o.updateValueAndValidity(null==o.f?null:o.f.dataInizio)}),e.qZA(),e.TgZ(12,"div",24)(13,"button",25),e.NdJ("click",function(){return e.CHM(t),e.MAs(11).toggle()}),e.TgZ(14,"span",26),e._uU(15),e.ALo(16,"translate"),e.qZA(),e._UZ(17,"i",27),e.qZA()()(),e.YNc(18,ti,4,3,"div",28),e.qZA()(),e.TgZ(19,"div",18)(20,"label",29),e._uU(21),e.ALo(22,"translate"),e.TgZ(23,"span",16),e._uU(24,"*"),e.qZA()(),e.TgZ(25,"div",20)(26,"div",21)(27,"input",30,31),e.NdJ("keyup",function(){e.CHM(t);const o=e.oxw(2);return o.updateValueAndValidity(null==o.f?null:o.f.dataFine),o.updateValueAndValidity(null==o.f?null:o.f.dataInizio)})("dateSelect",function(){e.CHM(t);const o=e.oxw(2);return o.updateValueAndValidity(null==o.f?null:o.f.dataFine),o.updateValueAndValidity(null==o.f?null:o.f.dataInizio)}),e.qZA(),e.TgZ(29,"div",24)(30,"button",25),e.NdJ("click",function(){return e.CHM(t),e.MAs(28).toggle()}),e.TgZ(31,"span",26),e._uU(32),e.ALo(33,"translate"),e.qZA(),e._UZ(34,"i",27),e.qZA()()(),e.YNc(35,oi,3,2,"div",28),e.qZA()()(),e.TgZ(36,"div",4)(37,"div",18)(38,"label",32),e._uU(39),e.ALo(40,"translate"),e.TgZ(41,"span",16),e._uU(42,"*"),e.qZA()(),e.TgZ(43,"div",33)(44,"select",34),e.NdJ("change",function(){return e.CHM(t),e.oxw(2).onChangeMotivoSospensione()}),e._UZ(45,"option",35),e.YNc(46,ai,2,2,"option",36),e.qZA(),e.YNc(47,si,2,1,"div",28),e.qZA()(),e.YNc(48,di,8,5,"div",37),e.TgZ(49,"div",18)(50,"label",38),e._uU(51),e.ALo(52,"translate"),e.YNc(53,mi,2,0,"span",39),e.qZA(),e.TgZ(54,"div",20)(55,"input",40),e.NdJ("change",function(){return e.CHM(t),e.oxw(2).onChangeNumLavSosp()}),e.qZA(),e.YNc(56,_i,2,1,"div",28),e.qZA()()(),e.YNc(57,fi,9,7,"div",41),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("formGroup",t.form),e.xp6(4),e.Oqu(e.lcZ(5,18,"SOSPENSIONI.LABEL.DATA_INIZIO")),e.xp6(6),e.Q6J("maxDate",e.VKq(30,vi,null==t.versamentoCorrente?null:t.versamentoCorrente.annoRiferimento)),e.xp6(5),e.Oqu(e.lcZ(16,20,"APP.GENERICO.BTN.APRI_CAL")),e.xp6(3),e.Q6J("ngIf",(null==t.f||null==t.f.dataInizio?null:t.f.dataInizio.invalid)&&(null==t.f||null==t.f.dataInizio?null:t.f.dataInizio.value)),e.xp6(3),e.Oqu(e.lcZ(22,22,"SOSPENSIONI.LABEL.DATA_FINE")),e.xp6(6),e.Q6J("minDate",e.VKq(32,gi,null==t.versamentoCorrente?null:t.versamentoCorrente.annoRiferimento)),e.xp6(5),e.Oqu(e.lcZ(33,24,"APP.GENERICO.BTN.APRI_CAL")),e.xp6(3),e.Q6J("ngIf",(null==t.f||null==t.f.dataFine?null:t.f.dataFine.invalid)&&(null==t.f||null==t.f.dataFine?null:t.f.dataFine.value)),e.xp6(4),e.Oqu(e.lcZ(40,26,"SOSPENSIONI.LABEL.MOT_SOSPENSIONE")),e.xp6(6),e.Q6J("ngValue",null),e.xp6(1),e.Q6J("ngForOf",t.motiviSospensioni),e.xp6(1),e.Q6J("ngIf",null==t.f||null==t.f.motSospensioneSelect?null:t.f.motSospensioneSelect.invalid),e.xp6(1),e.Q6J("ngIf",t.motiviSospensioni),e.xp6(3),e.Oqu(e.lcZ(52,28,"SOSPENSIONI.LABEL.NUM_LAV_SOSPESI")),e.xp6(2),e.Q6J("ngIf",null==t.f||null==t.f.numLavSospSelect?null:t.f.numLavSospSelect.enabled),e.xp6(3),e.Q6J("ngIf",(null==t.f||null==t.f.numLavSospSelect?null:t.f.numLavSospSelect.invalid)&&(null==t.f||null==t.f.numLavSospSelect?null:t.f.numLavSospSelect.value)),e.xp6(1),e.Q6J("ngIf",!t.VIEW_MODE)}}function Ii(i,a){if(1&i&&(e.TgZ(0,"div",50),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.getMsgByCode("100110")," ")}}function Ai(i,a){1&i&&(e.TgZ(0,"th"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"SOSPENSIONI.LABEL.AZIONI")))}function Ci(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"td")(1,"a",51),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().index;return e.oxw(2).onClickElimina(o)}),e._UZ(2,"i",52),e.qZA()()}}function Ti(i,a){if(1&i&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"date"),e.ALo(4,"date"),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.YNc(11,Ci,3,0,"td",11),e.qZA()),2&i){const t=a.$implicit,n=e.oxw(2);e.xp6(2),e.Oqu(e.xi3(3,5,null==t?null:t.dInizioSospensione,"dd/MM/yyyy")+" - "+e.xi3(4,8,null==t?null:t.dFineSospensione,"dd/MM/yyyy")),e.xp6(4),e.hij(" ",null==t||null==t.esoDVersamentoMotivoSospensione?null:t.esoDVersamentoMotivoSospensione.dsEsoDVersamentoMotivoSospensione," "),e.xp6(2),e.Oqu(null==t?null:t.percSospensione),e.xp6(2),e.Oqu(null==t?null:t.numLavoratoriSospesi),e.xp6(1),e.Q6J("ngIf",!n.VIEW_MODE)}}function Zi(i,a){1&i&&(e.TgZ(0,"div",53),e._uU(1," Non ci sono dati "),e.qZA())}function Si(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",54)(1,"div",48)(2,"button",49),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onClickConfermaProsegui()}),e._uU(3),e.ALo(4,"translate"),e.qZA()()()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("disabled",!t.RANGE_SOSPENSIONI_ISVALID),e.xp6(1),e.hij("",e.lcZ(4,2,"APP.GENERICO.BTN.CONFIRM")," ")}}function Oi(i,a){if(1&i&&(e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"h3",5),e._uU(4),e.ALo(5,"translate"),e.qZA()(),e.YNc(6,jt,7,6,"p",6),e.YNc(7,hi,58,34,"form",7),e._UZ(8,"br"),e.YNc(9,Ii,2,1,"div",8),e._UZ(10,"br"),e.TgZ(11,"div",4)(12,"div",9)(13,"h3",10),e._uU(14),e.ALo(15,"translate"),e.qZA()(),e.TgZ(16,"table")(17,"thead")(18,"tr")(19,"th"),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"th"),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"th"),e._uU(26),e.ALo(27,"translate"),e.qZA(),e.TgZ(28,"th"),e._uU(29),e.ALo(30,"translate"),e.qZA(),e.YNc(31,Ai,3,3,"th",11),e.qZA()(),e.TgZ(32,"tbody"),e.YNc(33,Ti,12,11,"tr",12),e.qZA()(),e.YNc(34,Zi,2,0,"div",13),e.qZA(),e.YNc(35,Si,5,4,"div",14),e.qZA()()),2&i){const t=e.oxw();e.xp6(4),e.Oqu(e.lcZ(5,13,"SOSPENSIONI.LABEL.SOSPENSIONI")),e.xp6(2),e.Q6J("ngIf",!t.VIEW_MODE),e.xp6(1),e.Q6J("ngIf",!t.VIEW_MODE),e.xp6(2),e.Q6J("ngIf",!t.RANGE_SOSPENSIONI_ISVALID),e.xp6(5),e.Oqu(e.lcZ(15,15,"SOSPENSIONI.LABEL.ELENCO_SOSPENSIONI")),e.xp6(6),e.Oqu(e.lcZ(21,17,"SOSPENSIONI.LABEL.PERIODO")),e.xp6(3),e.Oqu(e.lcZ(24,19,"SOSPENSIONI.LABEL.MOT_SOSPENSIONE")),e.xp6(3),e.Oqu(e.lcZ(27,21,"SOSPENSIONI.LABEL.%_SOSPENSIONE")),e.xp6(3),e.Oqu(e.lcZ(30,23,"SOSPENSIONI.LABEL.NUM_LAV_SOSPESI")),e.xp6(2),e.Q6J("ngIf",!t.VIEW_MODE),e.xp6(2),e.Q6J("ngForOf",t.versamentoPvSospensione),e.xp6(1),e.Q6J("ngIf",!t.versamentoPvSospensione||t.versamentoPvSospensione.length<=0),e.xp6(1),e.Q6J("ngIf",!t.VIEW_MODE)}}let Ei=(()=>{class i{constructor(t,n,o,r,c,u,d,f){this.messageService=t,this.decodificaService=n,this.fb=o,this.promptModalService=r,this.alertMessageService=c,this.translateService=u,this.spinner=d,this.datePipe=f,this.emitConferma=new e.vpe,this.versamentoPvSospensione=[],this.sysDate=new Date,this.dataRangeValidator=()=>{let g=!1;const m=this.f.dataInizio.value,p=this.f.dataFine.value;if(m&&p){const v=new Date(m),h=new Date(p);v.setHours(0,0,0,0),h.setHours(0,0,0,0),g=v.valueOf()>h.valueOf()}return g?{invalidDataRange:{dataInizio:m,dataFine:p}}:null},this.motivoSospensioneValidator=()=>{let g=!1;const m=this.f.motSospensioneSelect.value;if(1==m){const p=this.versamentoCorrente.esoTVersamentoProvincias;for(let v=0;v<p.length&&!g;v++)if(p[v].idEsoTVersamentoProvincia!==this.versamenetoProvinciaSelezionataCurrent.idEsoTVersamentoProvincia){const h=p[v].esoTVersamentoPvSospensiones;for(let O=0;O<h.length&&!g;O++)g=1===h[O].esoDVersamentoMotivoSospensione.idEsoDVersamentoMotivoSospensione}if(!g)for(let v=0;v<this.versamentoPvSospensione.length&&!g;v++)g=m===this.versamentoPvSospensione[v].esoDVersamentoMotivoSospensione.idEsoDVersamentoMotivoSospensione}return g?{motivoSospensioneValidator:{motivoSospensione:m}}:null},this.toDayDaRangeValidator=()=>{let g=!1;const m=this.f.dataInizio.value;if(m){const p=new Date(m);p.setHours(0,0,0,0),g=p.valueOf()>this.sysDate.valueOf()}return g?{today:{dataInizio:m}}:null},this.dateAllowedValidator=()=>{let p=!1,v=this.form.controls.dataInizio.value,h=this.form.controls.dataFine.value;if(this.versamentoPvSospensione&&this.versamentoPvSospensione.length>0&&!_.c.isNullOrUndefinedOrEmptyField(v)&&!_.c.isNullOrUndefinedOrEmptyField(h)){v=new Date(v),v.setHours(0,0,0,0),h=new Date(h),h.setHours(0,0,0,0);for(let O=0;O<this.versamentoPvSospensione.length&&!p;O++){let z=new Date(this.versamentoPvSospensione[O].dInizioSospensione);z.setHours(0,0,0,0);let q=new Date(this.versamentoPvSospensione[O].dFineSospensione);q.setHours(0,0,0,0),p=v.valueOf()>q.valueOf()||v.valueOf()<z.valueOf()&&h.valueOf()<z.valueOf(),p=!p}}return p?{dateAllowed:{invalidGenerico:p}}:null}}get VIEW_MODE(){return this.mode===s.H6.VIEW}get f(){return this.form.controls}get SOSPENSIONI_INVALID(){return!!this.form.invalid}get RANGE_SOSPENSIONI_ISVALID(){let t=!1;if(this.initialVersamento&&this.versamentoPvSospensione&&this.versamentoPvSospensione.length>0)for(let n=0;n<this.versamentoPvSospensione.length&&!t;n++){const o=new Date(this.versamentoPvSospensione[n].dInizioSospensione),r=new Date(this.versamentoPvSospensione[n].dFineSospensione);t=this.initialVersamento.annoRiferimento>=o.getFullYear()&&this.initialVersamento.annoRiferimento<=r.getFullYear()}return 0===this.versamentoPvSospensione.length||t}ngAfterViewInit(){}ngOnInit(){this.versamentoCorrente=_.c.clone(this.initialVersamento),this.versamenetoProvinciaSelezionataCurrent=_.c.clone(this.versamenetoProvinciaSelezionataInitial),this.versamenetoProvinciaSelezionataCurrent.esoTVersamentoPvSospensiones&&this.versamenetoProvinciaSelezionataCurrent.esoTVersamentoPvSospensiones.length>0&&(this.versamentoPvSospensione=_.c.clone(this.versamenetoProvinciaSelezionataCurrent.esoTVersamentoPvSospensiones)),this.loadDecodificaMotivoSospensioni(),this.mode!==s.H6.VIEW&&(this.initForm(),this.setFormMode()),this.spinner.hide()}initForm(){this.form=new l.cw({dataInizio:new l.NI(null),dataFine:new l.NI(null),motSospensioneSelect:new l.NI(null),percentSospSelect:new l.NI(null,l.kI.min(1)),numLavSospSelect:new l.NI(null)})}updateValueAndValidity(t){t.updateValueAndValidity()}setFormMode(){this.f.dataInizio.setValidators([l.kI.required,this.dataRangeValidator,this.dateAllowedValidator]),this.f.dataFine.setValidators([l.kI.required,this.dateAllowedValidator]),this.f.dataInizio.updateValueAndValidity(),this.f.dataFine.updateValueAndValidity(),this.f.motSospensioneSelect.setValidators([this.motivoSospensioneValidator,l.kI.required]),this.f.motSospensioneSelect.updateValueAndValidity(),this.f.percentSospSelect.setValidators([l.kI.min(1),l.kI.max(100)]),this.f.percentSospSelect.updateValueAndValidity(),this.f.numLavSospSelect.setValidators([l.kI.min(1)]),this.f.numLavSospSelect.updateValueAndValidity()}onChangeMotivoSospensione(){const t=this.f.motSospensioneSelect.value;this.f.percentSospSelect[s.UI.ENABLE](),this.f.numLavSospSelect[s.UI.ENABLE](),this.f.percentSospSelect.removeValidators(l.kI.required),this.f.numLavSospSelect.removeValidators(l.kI.required),this.f.percentSospSelect.reset(),this.f.numLavSospSelect.reset(),t&&1===t?(this.f.percentSospSelect.patchValue(100),this.f.percentSospSelect[s.UI.DISABLE](),this.f.numLavSospSelect[s.UI.DISABLE]()):t&&2===t&&(this.f.percentSospSelect.setValidators(l.kI.required),this.f.numLavSospSelect.setValidators(l.kI.required)),this.f.percentSospSelect.updateValueAndValidity(),this.f.numLavSospSelect.updateValueAndValidity()}setFormState(){this.f.motSospensioneSelect.value?(this.f.percentSospSelect[s.UI.ENABLE](),this.f.numLavSospSelect[s.UI.ENABLE]()):(this.form.reset(),this.f.percentSospSelect[s.UI.DISABLE](),this.f.numLavSospSelect[s.UI.DISABLE]())}onChangePercentSosp(){this.f.percentSospSelect.value?(this.f.numLavSospSelect.reset(),this.f.numLavSospSelect[s.UI.DISABLE]()):this.f.numLavSospSelect[s.UI.ENABLE]()}onChangeNumLavSosp(){this.f.numLavSospSelect.value&&1!==this.f.motSospensioneSelect.value?(this.f.percentSospSelect.reset(),this.f.percentSospSelect[s.UI.DISABLE]()):this.f.percentSospSelect[s.UI.ENABLE]()}getMsgValidazioneByCode(t){return this.messageService.getMessaggioByCod(t).dsSilapDMessaggio}loadDecodificaMotivoSospensioni(){this.decodificaService.findDVersamentoMotivoSospensione().subscribe({next:t=>{console.log(t),t.esitoPositivo&&(this.motiviSospensioni=t.list)},error:t=>{console.error(`findDVersamentoMotivoSospensione ${t}`)}})}onClickReset(){this.form.reset(),this.f.percentSospSelect[s.UI.ENABLE](),this.f.numLavSospSelect[s.UI.ENABLE](),this.versamentoPvSospensione=_.c.clone(this.versamenetoProvinciaSelezionataInitial.esoTVersamentoPvSospensiones)}onClickConferma(){var t=this;return(0,x.Z)(function*(){var n,o;if(t.form.valid){const r=null===(o=null===(n=t.f)||void 0===n?void 0:n.motSospensioneSelect)||void 0===o?void 0:o.value,c=t.motiviSospensioni.find(f=>f.id===r);let u=!0;if(1===c.id){const f={0:t.datePipe.transform(t.f.dataInizio.value,"dd/MM/yyyy"),1:String(t.versamentoCorrente.annoRiferimento),2:t.versamentoCorrente.dsDenominazioneAzienda,3:t.versamentoCorrente.codFiscale,4:t.versamenetoProvinciaSelezionataCurrent.silapDProvincia.dsSilapDProvincia},g=t.translate((0,T.J)("MODAL.TITLE.INSERIM_SOSP_LICENZIAMENTO_COLLETTIVO")),m=t.messageService.getMessaggioByCod("100089"),p=t.translate((0,T.J)("APP.YES")),v=t.translate((0,T.J)("APP.NO")),h=_.c.replacePlaceHolder(m.dsSilapDMessaggio,f);u=yield t.promptModalService.openPrompt(g,h,p,v,"warning")}if(!u)return;t.versamentoPvSospensione.push({dInizioSospensione:t.f.dataInizio.value,dFineSospensione:t.f.dataFine.value,esoDVersamentoMotivoSospensione:{idEsoDVersamentoMotivoSospensione:r,dsEsoDVersamentoMotivoSospensione:c.descr},numLavoratoriSospesi:t.f.numLavSospSelect.value,percSospensione:t.f.percentSospSelect.value}),t.form.reset()}})()}onClickConfermaProsegui(){this.emitConferma.emit(this.versamentoPvSospensione)}onClickElimina(t){var n=this;return(0,x.Z)(function*(){const o=n.versamentoPvSospensione[t].esoDVersamentoMotivoSospensione.idEsoDVersamentoMotivoSospensione,c=n.translate((0,T.J)("MODAL.TITLE.ELIMINA_SOSP")),u=n.messageService.getMessaggioByCod(1===o?"100111":"100096"),d=n.translate((0,T.J)("APP.YES")),f=n.translate((0,T.J)("APP.NO"));let g={0:String(n.versamentoCorrente.annoRiferimento),1:n.versamentoCorrente.dsDenominazioneAzienda,2:n.versamentoCorrente.codFiscale};1===o&&(g={0:n.datePipe.transform(n.versamentoPvSospensione[t].dInizioSospensione,"dd/MM/yyyy"),1:String(n.versamentoCorrente.annoRiferimento),2:n.versamentoCorrente.dsDenominazioneAzienda,3:n.versamentoCorrente.codFiscale});const m=_.c.replacePlaceHolder(u.dsSilapDMessaggio,g);if(yield n.promptModalService.openPrompt(c,m,d,f,"warning")){n.error=!1,n.versamentoPvSospensione.splice(t,1),n.form.reset(),n.f.percentSospSelect[s.UI.ENABLE](),n.f.numLavSospSelect[s.UI.ENABLE]();const v=n.messageService.getMessaggioByCod("100097"),h=_.c.replacePlaceHolder(v.dsSilapDMessaggio,g);n.alertMessageService.setSingleSuccessMessage(h)}else console.log(`non eliminare${JSON.stringify(n.versamentoPvSospensione)}`);n.spinner.hide()})()}translate(t){return this.translateService.instant(t)}getMsgByCode(t){return this.messageService.getMessaggioByCod(t).dsSilapDMessaggio}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(P.e),e.Y36(D.wN),e.Y36(l.qu),e.Y36(V.p),e.Y36(R.O),e.Y36(S.sK),e.Y36(N.t2),e.Y36(I.uU))},i.\u0275cmp=e.Xpm({type:i,selectors:[["colmirwcl-sospensioni"]],viewQuery:function(t,n){if(1&t&&(e.Gf($t,5),e.Gf(Wt,5)),2&t){let o;e.iGM(o=e.CRH())&&(n.d_dataFine=o.first),e.iGM(o=e.CRH())&&(n.d_dataInizio=o.first)}},inputs:{mode:"mode",initialVersamento:"initialVersamento",currentPaginationData:"currentPaginationData",versamenetoProvinciaSelezionataInitial:"versamenetoProvinciaSelezionataInitial"},outputs:{emitConferma:"emitConferma"},decls:2,vars:1,consts:[[1,"container-body"],["class","card",4,"ngIf"],[1,"card"],[1,"card-body"],[1,"row"],[1,"custom-h3"],["class","text-muted",4,"ngIf"],[3,"formGroup",4,"ngIf"],["class","row alert-danger",4,"ngIf"],[1,"mb-3","col-sm-12","col-md-6","mt-4"],[1,"title"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","alert-warning",4,"ngIf"],["class","row justify-content-end",4,"ngIf"],[1,"text-muted"],[1,"oblg"],[3,"formGroup"],[1,"mb-5","col-sm-12","col-md-4"],["for","dataInizio"],[1,"col-sm-8"],[1,"input-group"],["type","text","formControlName","dataInizio","id","dataInizio","ngbDatepicker","","data-provide","datepicker","placeholder","Data da","maxlength","10",1,"form-control",3,"maxDate","keyup","dateSelect"],["d_dataInizio","ngbDatepicker"],[1,"input-group-addon"],["type","button",1,"btn","btn-outline-primary","calendar",3,"click"],[1,"sr-only"],[1,"far","fa-calendar-alt","fa-lg"],["class","text-danger",4,"ngIf"],["for","dataFine"],["type","text","id","dataFine","formControlName","dataFine","placeholder","Data a","ngbDatepicker","","maxlength","10",1,"form-control",3,"minDate","keyup","dateSelect"],["d_dataFine","ngbDatepicker"],["for","motSospensione"],[1,"col-sm-10"],["formControlName","motSospensioneSelect","id","motSospensione",1,"form-select",3,"change"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["class","col-sm-12 col-md-4",4,"ngIf"],["for","numLavSosp"],["class","oblg",4,"ngIf"],["type","text","colmirwclOnlyNumber","","id","numLavSosp","formControlName","numLavSospSelect","maxlength","6",1,"form-control",3,"change"],["class","row",4,"ngIf"],[1,"text-danger"],[1,"col-sm-12","col-md-4"],["for","percentSosp"],["type","text","colmirwclOnlyNumber","","id","percentSosp","formControlName","percentSospSelect","maxlength","3",1,"form-control",3,"change"],[1,"col"],["type","button",1,"btn","btn-outline-secondary","btn-sm",3,"click"],[1,"col-auto"],["type","button",1,"btn","btn-sm","btn-primary",3,"disabled","click"],[1,"row","alert-danger"],[3,"click"],["title","Elimina",1,"fas","fa-trash-alt"],[1,"alert-warning"],[1,"row","justify-content-end"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Oi,36,25,"div",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",n.versamentoCorrente))},directives:[I.O5,l._Y,l.JL,l.sg,l.Fj,A.J4,l.JJ,l.u,l.nD,l.EJ,l.YN,l.Kr,I.sg,B],pipes:[S.X$,I.uU],styles:["table[_ngcontent-%COMP%]{border-collapse:collapse;width:100%;margin-bottom:20px}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:8px;text-align:left}td[_ngcontent-%COMP%]{border-bottom:1px solid #dee2e6}.custom-h3[_ngcontent-%COMP%]{margin-top:0}.no-data-table[_ngcontent-%COMP%]{border-color:inherit;border-style:solid;border-width:0}"]}),i})(),xi=(()=>{class i{constructor(t,n){this.elementRef=t,this.renderer=n}onInputChange(t){const n=function Di(i){if(null==i)return"";const a=i.toString().replace(/[^0-9-]/g,"");return a.startsWith("-")?"-"+a.slice(1).replace(/-/g,""):a.replace(/-/g,"")}(t);this.updateTextInput(n,this.value!==n)}onBlur(){this.onTouched()}updateTextInput(t,n){this.renderer.setProperty(this.elementRef.nativeElement,"value",t),n&&this.onChange(t),this.value=t}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.renderer.setProperty(this.elementRef.nativeElement,"disabled",t)}writeValue(t){t=t?String(t):"",this.updateTextInput(t,!1)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(e.Qsj))},i.\u0275dir=e.lG2({type:i,selectors:[["","colmirwclOnlyNegativePositiveNumber",""]],hostBindings:function(t,n){1&t&&e.NdJ("input",function(r){return n.onInputChange(r.target.value)})("blur",function(){return n.onBlur()})},features:[e._Bn([{provide:l.JU,useExisting:(0,e.Gpc)(()=>i),multi:!0}])]}),i})();var Pi=C(3447);const Ni=["d_dataFine"],Ri=["d_dataInizio"],zi=["paginatedTable"];function Li(i,a){1&i&&(e.TgZ(0,"p",11),e._uU(1),e.ALo(2,"translate"),e.TgZ(3,"span",12),e._uU(4,"*"),e.qZA(),e._uU(5),e.ALo(6,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij("",e.lcZ(2,2,"APP.GENERICO.CAMPI_CONTR")," "),e.xp6(4),e.hij(" ",e.lcZ(6,4,"APP.GENERICO.OBBLIGO"),""))}function bi(i,a){if(1&i&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.hij(" ",t.getMsgByCode("100004")," ")}}function Vi(i,a){1&i&&(e.TgZ(0,"p"),e._uU(1," data inizio non pu\xf2 essere maggiore di data fine "),e.qZA())}function Mi(i,a){1&i&&(e.TgZ(0,"p"),e._uU(1," sovrapposizione periodo "),e.qZA())}function qi(i,a){if(1&i&&(e.TgZ(0,"div",39),e.YNc(1,bi,2,1,"p",40),e.YNc(2,Vi,2,0,"p",40),e.YNc(3,Mi,2,0,"p",40),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",(null==t.f||null==t.f.dataInizio?null:t.f.dataInizio.errors)&&!(null!=t.f&&null!=t.f.dataInizio&&null!=t.f.dataInizio.errors&&null!=t.f.dataInizio.errors.periodoValidator&&t.f.dataInizio.errors.periodoValidator.invalidPeriodo)&&!(null!=t.f&&null!=t.f.dataInizio&&null!=t.f.dataInizio.errors&&t.f.dataInizio.errors.invalidDataRange)),e.xp6(1),e.Q6J("ngIf",null==t.f||null==t.f.dataInizio||null==t.f.dataInizio.errors?null:t.f.dataInizio.errors.invalidDataRange),e.xp6(1),e.Q6J("ngIf",!(null!=t.f&&null!=t.f.dataInizio&&null!=t.f.dataInizio.errors&&t.f.dataInizio.errors.invalidDataRange)&&(null==t.f||null==t.f.dataInizio||null==t.f.dataInizio.errors||null==t.f.dataInizio.errors.periodoValidator?null:t.f.dataInizio.errors.periodoValidator.invalidPeriodo))}}function yi(i,a){if(1&i&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.hij(" ",t.getMsgByCode("100004")," ")}}function Ui(i,a){if(1&i&&(e.TgZ(0,"div",39),e.YNc(1,yi,2,1,"p",40),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.f||null==t.f.dataFine?null:t.f.dataFine.errors)}}function Fi(i,a){if(1&i&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.Oqu(t.getMsgByCode("100072"))}}function wi(i,a){if(1&i&&(e.TgZ(0,"div",39),e.YNc(1,Fi,2,1,"p",40),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.f||null==t.f.baseComputoInput||null==t.f.baseComputoInput.errors?null:t.f.baseComputoInput.errors.min)}}function Ji(i,a){if(1&i&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.hij(" ",t.getMsgByCode("100073"),"")}}function Hi(i,a){if(1&i&&(e.TgZ(0,"div",39),e.YNc(1,Ji,2,1,"p",40),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.f||null==t.f.disabForzaInput||null==t.f.disabForzaInput.errors?null:t.f.disabForzaInput.errors.disabiliInForza)}}function Bi(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",4)(1,"div",41)(2,"button",42),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).onClickReset()}),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",43)(6,"button",44),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).onClickConferma()}),e._uU(7),e.ALo(8,"translate"),e.qZA()()()}if(2&i){const t=e.oxw(3);e.xp6(3),e.hij(" ",e.lcZ(4,3,"APP.GENERICO.BTN.ANNULLA")," "),e.xp6(3),e.Q6J("disabled",t.DICHIARAZIONE_INVALID),e.xp6(1),e.hij(" ",e.lcZ(8,5,"APP.GENERICO.BTN.CONFERMA")," ")}}const oe=function(i){return{year:i,month:1,day:1}},ae=function(i){return{year:i,month:12,day:31}};function Yi(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"form",13)(1,"div",4)(2,"div",14)(3,"label",15),e._uU(4),e.ALo(5,"translate"),e.TgZ(6,"span",12),e._uU(7,"*"),e.qZA()(),e.TgZ(8,"div",16)(9,"div",17)(10,"input",18,19),e.NdJ("keyup",function(){e.CHM(t);const o=e.oxw(2);return o.updateValueAndValidity(null==o.f?null:o.f.dataFine),o.updateValueAndValidity(null==o.f?null:o.f.dataInizio)})("dateSelect",function(){e.CHM(t);const o=e.oxw(2);return o.updateValueAndValidity(null==o.f?null:o.f.dataFine),o.updateValueAndValidity(null==o.f?null:o.f.dataInizio)}),e.qZA(),e.TgZ(12,"div",20)(13,"button",21),e.NdJ("click",function(){return e.CHM(t),e.MAs(11).toggle()}),e.TgZ(14,"span",22),e._uU(15),e.ALo(16,"translate"),e.qZA(),e._UZ(17,"i",23),e.qZA()()(),e.YNc(18,qi,4,3,"div",24),e.qZA()(),e.TgZ(19,"div",14)(20,"label",25),e._uU(21),e.ALo(22,"translate"),e.TgZ(23,"span",12),e._uU(24,"*"),e.qZA()(),e.TgZ(25,"div",16)(26,"div",17)(27,"input",26,27),e.NdJ("keyup",function(){e.CHM(t);const o=e.oxw(2);return o.updateValueAndValidity(null==o.f?null:o.f.dataFine),o.updateValueAndValidity(null==o.f?null:o.f.dataInizio)})("dateSelect",function(){e.CHM(t);const o=e.oxw(2);return o.updateValueAndValidity(null==o.f?null:o.f.dataFine),o.updateValueAndValidity(null==o.f?null:o.f.dataInizio)}),e.qZA(),e.TgZ(29,"div",20)(30,"button",21),e.NdJ("click",function(){return e.CHM(t),e.MAs(28).toggle()}),e.TgZ(31,"span",22),e._uU(32),e.ALo(33,"translate"),e.qZA(),e._UZ(34,"i",23),e.qZA()()(),e.YNc(35,Ui,2,1,"div",24),e.qZA()(),e.TgZ(36,"div",14)(37,"label",28),e._uU(38),e.ALo(39,"translate"),e.TgZ(40,"span",12),e._uU(41,"*"),e.qZA()(),e.TgZ(42,"div",16)(43,"input",29),e.NdJ("keyup",function(){e.CHM(t);const o=e.oxw(2);return o.updateValueAndValidity(null==o.f?null:o.f.disabForzaInput)}),e.qZA(),e.YNc(44,wi,2,1,"div",24),e.qZA()()(),e.TgZ(45,"div",4)(46,"div",30)(47,"label",31),e._uU(48),e.ALo(49,"translate"),e.TgZ(50,"span",12),e._uU(51,"*"),e.qZA()(),e.TgZ(52,"div",16),e._UZ(53,"input",32),e.YNc(54,Hi,2,1,"div",24),e.qZA()(),e.TgZ(55,"div",14)(56,"label",33),e._uU(57),e.ALo(58,"translate"),e.TgZ(59,"span",12),e._uU(60,"*"),e.qZA()(),e.TgZ(61,"div",16),e._UZ(62,"input",34),e.qZA()(),e.TgZ(63,"div",14)(64,"label",35),e._uU(65),e.ALo(66,"translate"),e.qZA(),e.TgZ(67,"div",16),e._UZ(68,"input",36),e.qZA()()(),e.TgZ(69,"div",4)(70,"div",14)(71,"label",37),e._uU(72),e.ALo(73,"translate"),e.TgZ(74,"span",12),e._uU(75,"*"),e.qZA()(),e.TgZ(76,"div",16),e._UZ(77,"input",38),e.qZA()()(),e.YNc(78,Bi,9,7,"div",8),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("formGroup",t.form),e.xp6(4),e.Oqu(e.lcZ(5,19,"DICHIARAZIONI.LABEL.DATA_INIZIO")),e.xp6(6),e.Q6J("minDate",e.VKq(37,oe,null==t.versamento?null:t.versamento.annoRiferimento))("maxDate",e.VKq(39,ae,null==t.versamento?null:t.versamento.annoRiferimento)),e.xp6(5),e.Oqu(e.lcZ(16,21,"APP.GENERICO.BTN.APRI_CAL")),e.xp6(3),e.Q6J("ngIf",(null==t.f||null==t.f.dataInizio?null:t.f.dataInizio.invalid)&&(null==t.f||null==t.f.dataInizio?null:t.f.dataInizio.value)),e.xp6(3),e.Oqu(e.lcZ(22,23,"DICHIARAZIONI.LABEL.DATA_FINE")),e.xp6(6),e.Q6J("minDate",e.VKq(41,oe,null==t.versamento?null:t.versamento.annoRiferimento))("maxDate",e.VKq(43,ae,null==t.versamento?null:t.versamento.annoRiferimento)),e.xp6(5),e.Oqu(e.lcZ(33,25,"APP.GENERICO.BTN.APRI_CAL")),e.xp6(3),e.Q6J("ngIf",(null==t.f||null==t.f.dataFine?null:t.f.dataFine.invalid)&&(null==t.f||null==t.f.dataFine?null:t.f.dataFine.value)),e.xp6(3),e.Oqu(e.lcZ(39,27,"DICHIARAZIONI.LABEL.BASE_COMPUTO")),e.xp6(6),e.Q6J("ngIf",null==t.f||null==t.f.baseComputoInput?null:t.f.baseComputoInput.invalid),e.xp6(4),e.Oqu(e.lcZ(49,29,"DICHIARAZIONI.LABEL.DISABILI_FORZA")),e.xp6(6),e.Q6J("ngIf",null==t.f||null==t.f.disabForzaInput?null:t.f.disabForzaInput.invalid),e.xp6(3),e.Oqu(e.lcZ(58,31,"DICHIARAZIONI.LABEL.NUM_COMPENSATI")),e.xp6(8),e.Oqu(e.lcZ(66,33,"DICHIARAZIONI.LABEL.NUM_ESON_CERTIFICATI")),e.xp6(7),e.Oqu(e.lcZ(73,35,"DICHIARAZIONI.LABEL.NUM_RIALLINEAM_NAZ")),e.xp6(6),e.Q6J("ngIf",!t.VIEW_MODE)}}function ki(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",48)(1,"button",49),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).onClickRipristinaDati()}),e._uU(2),e.ALo(3,"translate"),e.qZA()()}2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"DICHIARAZIONI.BUTTON.RIPRISTINA_DATI")))}function Qi(i,a){if(1&i&&(e.TgZ(0,"div",4)(1,"div",45)(2,"h3",46),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.YNc(5,ki,4,3,"div",47),e.qZA()),2&i){const t=e.oxw(2);e.xp6(3),e.Oqu(e.lcZ(4,2,"DICHIARAZIONI.LABEL.ELENCO_DICHIARAZIONI")),e.xp6(2),e.Q6J("ngIf",!t.VIEW_MODE)}}function Gi(i,a){1&i&&(e.TgZ(0,"th"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"DICHIARAZIONI.LABEL.AZIONI")))}function $i(i,a){if(1&i&&(e.TgZ(0,"tr")(1,"th"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"th"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"th"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"th"),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"th"),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"th"),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"th"),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"th"),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"th"),e._uU(26),e.ALo(27,"translate"),e.qZA(),e.TgZ(28,"th"),e._uU(29),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"th"),e._uU(32),e.ALo(33,"translate"),e.qZA(),e.TgZ(34,"th"),e._uU(35),e.ALo(36,"translate"),e.qZA(),e.TgZ(37,"th"),e._uU(38),e.ALo(39,"translate"),e.qZA(),e.YNc(40,Gi,3,3,"th",40),e.qZA()),2&i){const t=e.oxw(3);e.xp6(2),e.Oqu(e.lcZ(3,14,"DICHIARAZIONI.LABEL.PERIODO")),e.xp6(3),e.Oqu(e.lcZ(6,16,"DICHIARAZIONI.LABEL.BASE_COMPUTO")),e.xp6(3),e.Oqu(e.lcZ(9,18,"DICHIARAZIONI.LABEL.DISABILI_FORZA")),e.xp6(3),e.Oqu(e.lcZ(12,20,"DICHIARAZIONI.LABEL.NUM_COMPENSATI")),e.xp6(3),e.Oqu(e.lcZ(15,22,"DICHIARAZIONI.LABEL.MOT_SOSPENSIONE")),e.xp6(3),e.Oqu(e.lcZ(18,24,"DICHIARAZIONI.LABEL.%_SOSPENSIONE")),e.xp6(3),e.Oqu(e.lcZ(21,26,"DICHIARAZIONI.LABEL.NUM_LAV_SOSPESI")),e.xp6(3),e.Oqu(e.lcZ(24,28,"DICHIARAZIONI.LABEL.NUM_ESON_CERTIFICATI")),e.xp6(3),e.Oqu(e.lcZ(27,30,"DICHIARAZIONI.LABEL.QUOTA_RISERVA")),e.xp6(3),e.Oqu(e.lcZ(30,32,"DICHIARAZIONI.LABEL.NUM_RIALLINEAM_NAZ")),e.xp6(3),e.Oqu(e.lcZ(33,34,"DICHIARAZIONI.LABEL.GIORNI_LAVORATIVI")),e.xp6(3),e.Oqu(e.lcZ(36,36,"DICHIARAZIONI.LABEL.NUM_ESONERATI")),e.xp6(3),e.Oqu(e.lcZ(39,38,"DICHIARAZIONI.LABEL.IMPORTO")),e.xp6(2),e.Q6J("ngIf",!t.VIEW_MODE)}}function Wi(i,a){if(1&i&&(e.TgZ(0,"b"),e._uU(1),e.qZA(),e._uU(2,"!")),2&i){const t=e.oxw(4);e.xp6(1),e.Oqu(t.tooltipText)}}function ji(i,a){if(1&i&&(e.TgZ(0,"span",60),e._uU(1," * "),e.qZA()),2&i){e.oxw();const t=e.MAs(6);e.Q6J("ngbTooltip",t)}}const Z=function(i,a){return{"insert-item":i,"periodo-sovrapposto":a}};function Xi(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"td",56)(1,"a",61),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit;return e.oxw(3).onClickElimina(o)}),e._UZ(2,"i",62),e.qZA()()}if(2&i){const t=e.oxw().$implicit,n=e.oxw(3);e.Q6J("ngClass",e.WLB(1,Z,(null==t?null:t.idEsoTVersamentoPvPeriodo)===(null==n.insertItem?null:n.insertItem.idEsoTVersamentoPvPeriodo)&&!(null!=t&&t.sovrapposto),null==t?null:t.sovrapposto))}}function Ki(i,a){if(1&i&&(e.TgZ(0,"tr")(1,"td",56),e._uU(2),e.ALo(3,"date"),e.ALo(4,"date"),e.YNc(5,Wi,3,1,"ng-template",null,57,e.W1O),e.YNc(7,ji,2,1,"span",58),e.qZA(),e.TgZ(8,"td",56),e._uU(9),e.qZA(),e.TgZ(10,"td",56),e._uU(11),e.qZA(),e.TgZ(12,"td",56),e._uU(13),e.qZA(),e.TgZ(14,"td",56),e._uU(15),e.qZA(),e.TgZ(16,"td",56),e._uU(17),e.qZA(),e.TgZ(18,"td",56),e._uU(19),e.qZA(),e.TgZ(20,"td",56),e._uU(21),e.qZA(),e.TgZ(22,"td",56),e._uU(23),e.qZA(),e.TgZ(24,"td",56),e._uU(25),e.qZA(),e.TgZ(26,"td",56),e._uU(27),e.qZA(),e.TgZ(28,"td",56),e._uU(29),e.qZA(),e.TgZ(30,"td",56),e._uU(31),e.ALo(32,"number"),e.qZA(),e.YNc(33,Xi,3,4,"td",59),e.qZA()),2&i){const t=a.$implicit,n=e.oxw(3);let o,r,c;e.xp6(1),e.Q6J("ngClass",e.WLB(37,Z,(null==t?null:t.idEsoTVersamentoPvPeriodo)===(null==n.insertItem?null:n.insertItem.idEsoTVersamentoPvPeriodo)&&!(null!=t&&t.sovrapposto),null==t?null:t.sovrapposto)),e.xp6(1),e.hij("",e.xi3(3,28,null==t?null:t.dInizio,"dd/MM/yyyy")+" - "+e.xi3(4,31,null==t?null:t.dFine,"dd/MM/yyyy")," "),e.xp6(5),e.Q6J("ngIf","O"===(null==t?null:t.flgTipo)),e.xp6(1),e.Q6J("ngClass",e.WLB(40,Z,(null==t?null:t.idEsoTVersamentoPvPeriodo)===(null==n.insertItem?null:n.insertItem.idEsoTVersamentoPvPeriodo)&&!(null!=t&&t.sovrapposto),null==t?null:t.sovrapposto)),e.xp6(1),e.Oqu(null==t?null:t.baseComputo),e.xp6(1),e.Q6J("ngClass",e.WLB(43,Z,(null==t?null:t.idEsoTVersamentoPvPeriodo)===(null==n.insertItem?null:n.insertItem.idEsoTVersamentoPvPeriodo)&&!(null!=t&&t.sovrapposto),null==t?null:t.sovrapposto)),e.xp6(1),e.Oqu(null==t?null:t.numDisabiliInForza),e.xp6(1),e.Q6J("ngClass",e.WLB(46,Z,(null==t?null:t.idEsoTVersamentoPvPeriodo)===(null==n.insertItem?null:n.insertItem.idEsoTVersamentoPvPeriodo)&&!(null!=t&&t.sovrapposto),null==t?null:t.sovrapposto)),e.xp6(1),e.Oqu(null==t?null:t.numSoggettiCompensati),e.xp6(1),e.Q6J("ngClass",e.WLB(49,Z,(null==t?null:t.idEsoTVersamentoPvPeriodo)===(null==n.insertItem?null:n.insertItem.idEsoTVersamentoPvPeriodo)&&!(null!=t&&t.sovrapposto),null==t?null:t.sovrapposto)),e.xp6(1),e.Oqu(null==(o=n.getSospensioneByPeriodo(null==t?null:t.dInizio,null==t?null:t.dFine))||null==o.esoDVersamentoMotivoSospensione?null:o.esoDVersamentoMotivoSospensione.dsEsoDVersamentoMotivoSospensione),e.xp6(1),e.Q6J("ngClass",e.WLB(52,Z,(null==t?null:t.idEsoTVersamentoPvPeriodo)===(null==n.insertItem?null:n.insertItem.idEsoTVersamentoPvPeriodo)&&!(null!=t&&t.sovrapposto),null==t?null:t.sovrapposto)),e.xp6(1),e.Oqu(null==(r=n.getSospensioneByPeriodo(null==t?null:t.dInizio,null==t?null:t.dFine))?null:r.percSospensione),e.xp6(1),e.Q6J("ngClass",e.WLB(55,Z,(null==t?null:t.idEsoTVersamentoPvPeriodo)===(null==n.insertItem?null:n.insertItem.idEsoTVersamentoPvPeriodo)&&!(null!=t&&t.sovrapposto),null==t?null:t.sovrapposto)),e.xp6(1),e.Oqu(null==(c=n.getSospensioneByPeriodo(null==t?null:t.dInizio,null==t?null:t.dFine))?null:c.numLavoratoriSospesi),e.xp6(1),e.Q6J("ngClass",e.WLB(58,Z,(null==t?null:t.idEsoTVersamentoPvPeriodo)===(null==n.insertItem?null:n.insertItem.idEsoTVersamentoPvPeriodo)&&!(null!=t&&t.sovrapposto),null==t?null:t.sovrapposto)),e.xp6(1),e.Oqu(null==t?null:t.numEsoneratiAutocertificati),e.xp6(1),e.Q6J("ngClass",e.WLB(61,Z,(null==t?null:t.idEsoTVersamentoPvPeriodo)===(null==n.insertItem?null:n.insertItem.idEsoTVersamentoPvPeriodo)&&!(null!=t&&t.sovrapposto),null==t?null:t.sovrapposto)),e.xp6(1),e.Oqu(null==t?null:t.quotaRiserva),e.xp6(1),e.Q6J("ngClass",e.WLB(64,Z,(null==t?null:t.idEsoTVersamentoPvPeriodo)===(null==n.insertItem?null:n.insertItem.idEsoTVersamentoPvPeriodo)&&!(null!=t&&t.sovrapposto),null==t?null:t.sovrapposto)),e.xp6(1),e.Oqu(null==t?null:t.numRiallineamentoNazionale),e.xp6(1),e.Q6J("ngClass",e.WLB(67,Z,(null==t?null:t.idEsoTVersamentoPvPeriodo)===(null==n.insertItem?null:n.insertItem.idEsoTVersamentoPvPeriodo)&&!(null!=t&&t.sovrapposto),null==t?null:t.sovrapposto)),e.xp6(1),e.Oqu(null==t?null:t.numGgLavorativi),e.xp6(1),e.Q6J("ngClass",e.WLB(70,Z,(null==t?null:t.idEsoTVersamentoPvPeriodo)===(null==n.insertItem?null:n.insertItem.idEsoTVersamentoPvPeriodo)&&!(null!=t&&t.sovrapposto),null==t?null:t.sovrapposto)),e.xp6(1),e.Oqu(null==t?null:t.numLavoratoriEsonerati),e.xp6(1),e.Q6J("ngClass",e.WLB(73,Z,(null==t?null:t.idEsoTVersamentoPvPeriodo)===(null==n.insertItem?null:n.insertItem.idEsoTVersamentoPvPeriodo)&&!(null!=t&&t.sovrapposto),null==t?null:t.sovrapposto)),e.xp6(1),e.Oqu(e.xi3(32,34,null==t?null:t.importo,"0.2-2")),e.xp6(2),e.Q6J("ngIf",!n.VIEW_MODE)}}const re=function(i){return{provincia:i}};function en(i,a){if(1&i&&(e.TgZ(0,"div",4)(1,"colmirwcl-paginated-array-table",50,51),e.YNc(3,$i,41,40,"ng-template",52),e.YNc(4,Ki,34,76,"ng-template",53),e.qZA(),e.TgZ(5,"div",4)(6,"div",54)(7,"label",55),e._uU(8),e.ALo(9,"translate"),e.qZA(),e._uU(10),e.ALo(11,"number"),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("columnNumber",t.VIEW_MODE?11:12)("pagedResponse",t.versamentoPvPeriodo)("limit",t.limit),e.xp6(7),e.hij("",e.xi3(9,5,"DICHIARAZIONI.LABEL.TOT_PERIODI",e.VKq(11,re,null==t.versamenetoProvinciaSelezionata||null==t.versamenetoProvinciaSelezionata.silapDProvincia?null:t.versamenetoProvinciaSelezionata.silapDProvincia.dsSilapDProvincia)),": "),e.xp6(2),e.hij(" ",e.xi3(11,8,t.TOTALE_PERIODI,"0.2-2")," ")}}function tn(i,a){1&i&&(e.TgZ(0,"div",4)(1,"div",45)(2,"h3",46),e._uU(3),e.ALo(4,"translate"),e.qZA()()()),2&i&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"DICHIARAZIONI.LABEL.ELENCO_CALCOLATO")))}function nn(i,a){1&i&&(e.TgZ(0,"tr")(1,"th"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"th"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"th"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"th"),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"th"),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"th"),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"th"),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"th"),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"th"),e._uU(26),e.ALo(27,"translate"),e.qZA(),e.TgZ(28,"th"),e._uU(29),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"th"),e._uU(32),e.ALo(33,"translate"),e.qZA(),e.TgZ(34,"th"),e._uU(35),e.ALo(36,"translate"),e.qZA(),e.TgZ(37,"th"),e._uU(38),e.ALo(39,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,13,"DICHIARAZIONI.LABEL.PERIODO")),e.xp6(3),e.Oqu(e.lcZ(6,15,"DICHIARAZIONI.LABEL.BASE_COMPUTO")),e.xp6(3),e.Oqu(e.lcZ(9,17,"DICHIARAZIONI.LABEL.DISABILI_FORZA")),e.xp6(3),e.Oqu(e.lcZ(12,19,"DICHIARAZIONI.LABEL.NUM_COMPENSATI")),e.xp6(3),e.Oqu(e.lcZ(15,21,"DICHIARAZIONI.LABEL.MOT_SOSPENSIONE")),e.xp6(3),e.Oqu(e.lcZ(18,23,"DICHIARAZIONI.LABEL.%_SOSPENSIONE")),e.xp6(3),e.Oqu(e.lcZ(21,25,"DICHIARAZIONI.LABEL.NUM_LAV_SOSPESI")),e.xp6(3),e.Oqu(e.lcZ(24,27,"DICHIARAZIONI.LABEL.NUM_ESON_CERTIFICATI")),e.xp6(3),e.Oqu(e.lcZ(27,29,"DICHIARAZIONI.LABEL.QUOTA_RISERVA")),e.xp6(3),e.Oqu(e.lcZ(30,31,"DICHIARAZIONI.LABEL.NUM_RIALLINEAM_NAZ")),e.xp6(3),e.Oqu(e.lcZ(33,33,"DICHIARAZIONI.LABEL.GIORNI_LAVORATIVI")),e.xp6(3),e.Oqu(e.lcZ(36,35,"DICHIARAZIONI.LABEL.NUM_ESONERATI")),e.xp6(3),e.Oqu(e.lcZ(39,37,"DICHIARAZIONI.LABEL.IMPORTO")))}function on(i,a){if(1&i&&(e.TgZ(0,"b"),e._uU(1),e.qZA(),e._uU(2,"!")),2&i){const t=e.oxw(4);e.xp6(1),e.Oqu(t.tooltipText)}}function an(i,a){if(1&i&&(e.TgZ(0,"span",60),e._uU(1," * "),e.qZA()),2&i){e.oxw();const t=e.MAs(6);e.Q6J("ngbTooltip",t)}}function rn(i,a){if(1&i&&(e.TgZ(0,"tr")(1,"td",56),e._uU(2),e.ALo(3,"date"),e.ALo(4,"date"),e.YNc(5,on,3,1,"ng-template",null,64,e.W1O),e.YNc(7,an,2,1,"span",58),e.qZA(),e.TgZ(8,"td",56),e._uU(9),e.qZA(),e.TgZ(10,"td",56),e._uU(11),e.qZA(),e.TgZ(12,"td",56),e._uU(13),e.qZA(),e.TgZ(14,"td",56),e._uU(15),e.qZA(),e.TgZ(16,"td",56),e._uU(17),e.qZA(),e.TgZ(18,"td",56),e._uU(19),e.qZA(),e.TgZ(20,"td",56),e._uU(21),e.qZA(),e.TgZ(22,"td",56),e._uU(23),e.qZA(),e.TgZ(24,"td",56),e._uU(25),e.qZA(),e.TgZ(26,"td",56),e._uU(27),e.qZA(),e.TgZ(28,"td",56),e._uU(29),e.qZA(),e.TgZ(30,"td",56),e._uU(31),e.ALo(32,"number"),e.qZA()()),2&i){const t=a.$implicit,n=e.oxw(3);let o,r,c;e.xp6(1),e.Q6J("ngClass",e.WLB(36,Z,(null==t?null:t.idEsoTVersamentoPvPeriodo)===(null==n.insertItem?null:n.insertItem.idEsoTVersamentoPvPeriodo)&&!(null!=t&&t.sovrapposto),null==t?null:t.sovrapposto)),e.xp6(1),e.hij("",e.xi3(3,27,null==t?null:t.dInizio,"dd/MM/yyyy")+" - "+e.xi3(4,30,null==t?null:t.dFine,"dd/MM/yyyy")," "),e.xp6(5),e.Q6J("ngIf","O"===(null==t?null:t.flgTipo)),e.xp6(1),e.Q6J("ngClass",e.WLB(39,Z,(null==t?null:t.idEsoTVersamentoPvPeriodo)===(null==n.insertItem?null:n.insertItem.idEsoTVersamentoPvPeriodo)&&!(null!=t&&t.sovrapposto),null==t?null:t.sovrapposto)),e.xp6(1),e.Oqu(null==t?null:t.baseComputo),e.xp6(1),e.Q6J("ngClass",e.WLB(42,Z,(null==t?null:t.idEsoTVersamentoPvPeriodo)===(null==n.insertItem?null:n.insertItem.idEsoTVersamentoPvPeriodo)&&!(null!=t&&t.sovrapposto),null==t?null:t.sovrapposto)),e.xp6(1),e.Oqu(null==t?null:t.numDisabiliInForza),e.xp6(1),e.Q6J("ngClass",e.WLB(45,Z,(null==t?null:t.idEsoTVersamentoPvPeriodo)===(null==n.insertItem?null:n.insertItem.idEsoTVersamentoPvPeriodo)&&!(null!=t&&t.sovrapposto),null==t?null:t.sovrapposto)),e.xp6(1),e.Oqu(null==t?null:t.numSoggettiCompensati),e.xp6(1),e.Q6J("ngClass",e.WLB(48,Z,(null==t?null:t.idEsoTVersamentoPvPeriodo)===(null==n.insertItem?null:n.insertItem.idEsoTVersamentoPvPeriodo)&&!(null!=t&&t.sovrapposto),null==t?null:t.sovrapposto)),e.xp6(1),e.Oqu(null==(o=n.getSospensioneByPeriodo(null==t?null:t.dInizio,null==t?null:t.dFine))||null==o.esoDVersamentoMotivoSospensione?null:o.esoDVersamentoMotivoSospensione.dsEsoDVersamentoMotivoSospensione),e.xp6(1),e.Q6J("ngClass",e.WLB(51,Z,(null==t?null:t.idEsoTVersamentoPvPeriodo)===(null==n.insertItem?null:n.insertItem.idEsoTVersamentoPvPeriodo)&&!(null!=t&&t.sovrapposto),null==t?null:t.sovrapposto)),e.xp6(1),e.Oqu(null==(r=n.getSospensioneByPeriodo(null==t?null:t.dInizio,null==t?null:t.dFine))?null:r.percSospensione),e.xp6(1),e.Q6J("ngClass",e.WLB(54,Z,(null==t?null:t.idEsoTVersamentoPvPeriodo)===(null==n.insertItem?null:n.insertItem.idEsoTVersamentoPvPeriodo)&&!(null!=t&&t.sovrapposto),null==t?null:t.sovrapposto)),e.xp6(1),e.Oqu(null==(c=n.getSospensioneByPeriodo(null==t?null:t.dInizio,null==t?null:t.dFine))?null:c.numLavoratoriSospesi),e.xp6(1),e.Q6J("ngClass",e.WLB(57,Z,(null==t?null:t.idEsoTVersamentoPvPeriodo)===(null==n.insertItem?null:n.insertItem.idEsoTVersamentoPvPeriodo)&&!(null!=t&&t.sovrapposto),null==t?null:t.sovrapposto)),e.xp6(1),e.Oqu(null==t?null:t.numEsoneratiAutocertificati),e.xp6(1),e.Q6J("ngClass",e.WLB(60,Z,(null==t?null:t.idEsoTVersamentoPvPeriodo)===(null==n.insertItem?null:n.insertItem.idEsoTVersamentoPvPeriodo)&&!(null!=t&&t.sovrapposto),null==t?null:t.sovrapposto)),e.xp6(1),e.Oqu(null==t?null:t.quotaRiserva),e.xp6(1),e.Q6J("ngClass",e.WLB(63,Z,(null==t?null:t.idEsoTVersamentoPvPeriodo)===(null==n.insertItem?null:n.insertItem.idEsoTVersamentoPvPeriodo)&&!(null!=t&&t.sovrapposto),null==t?null:t.sovrapposto)),e.xp6(1),e.Oqu(null==t?null:t.numRiallineamentoNazionale),e.xp6(1),e.Q6J("ngClass",e.WLB(66,Z,(null==t?null:t.idEsoTVersamentoPvPeriodo)===(null==n.insertItem?null:n.insertItem.idEsoTVersamentoPvPeriodo)&&!(null!=t&&t.sovrapposto),null==t?null:t.sovrapposto)),e.xp6(1),e.Oqu(null==t?null:t.numGgLavorativi),e.xp6(1),e.Q6J("ngClass",e.WLB(69,Z,(null==t?null:t.idEsoTVersamentoPvPeriodo)===(null==n.insertItem?null:n.insertItem.idEsoTVersamentoPvPeriodo)&&!(null!=t&&t.sovrapposto),null==t?null:t.sovrapposto)),e.xp6(1),e.Oqu(null==t?null:t.numLavoratoriEsonerati),e.xp6(1),e.Q6J("ngClass",e.WLB(72,Z,(null==t?null:t.idEsoTVersamentoPvPeriodo)===(null==n.insertItem?null:n.insertItem.idEsoTVersamentoPvPeriodo)&&!(null!=t&&t.sovrapposto),null==t?null:t.sovrapposto)),e.xp6(1),e.Oqu(e.xi3(32,33,null==t?null:t.importo,"0.2-2"))}}function sn(i,a){if(1&i&&(e.TgZ(0,"div",4)(1,"colmirwcl-paginated-array-table",50,51),e.YNc(3,nn,40,39,"ng-template",52),e.YNc(4,rn,33,75,"ng-template",53),e.qZA(),e.TgZ(5,"div",4)(6,"div",54)(7,"label",63),e._uU(8),e.ALo(9,"translate"),e.qZA(),e._uU(10),e.ALo(11,"number"),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("columnNumber",11)("pagedResponse",t.versamentoPvPeriodoCalcolati)("limit",t.limit),e.xp6(7),e.hij("",e.xi3(9,5,"DICHIARAZIONI.LABEL.TOT_PERIODI",e.VKq(11,re,null==t.versamenetoProvinciaSelezionata||null==t.versamenetoProvinciaSelezionata.silapDProvincia?null:t.versamenetoProvinciaSelezionata.silapDProvincia.dsSilapDProvincia)),": "),e.xp6(2),e.hij(" ",e.xi3(11,8,t.totaleCalcolato,"0.2-2")," ")}}function ln(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",65)(1,"div",43)(2,"button",66),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onClickConfermaProsegui()}),e._uU(3),e.ALo(4,"translate"),e.qZA()()()}2&i&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"APP.GENERICO.BTN.CONFIRM")))}function cn(i,a){if(1&i&&(e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"h3",5),e._uU(4),e.ALo(5,"translate"),e.qZA()(),e.YNc(6,Li,7,6,"p",6),e.YNc(7,Yi,79,45,"form",7),e.YNc(8,Qi,6,4,"div",8),e.YNc(9,en,12,13,"div",8),e.YNc(10,tn,5,3,"div",8),e.YNc(11,sn,12,13,"div",8),e.YNc(12,ln,5,3,"div",9),e._UZ(13,"div",10),e.qZA()()),2&i){const t=e.oxw();e.xp6(4),e.Oqu(e.lcZ(5,9,"DICHIARAZIONI.LABEL.DICHIARAZIONE_ESONERI")),e.xp6(2),e.Q6J("ngIf",!t.VIEW_MODE),e.xp6(1),e.Q6J("ngIf",!t.VIEW_MODE),e.xp6(1),e.Q6J("ngIf",t.showTable),e.xp6(1),e.Q6J("ngIf",t.showTable),e.xp6(1),e.Q6J("ngIf",t.showTablePeriodiCalcolati),e.xp6(1),e.Q6J("ngIf",t.showTablePeriodiCalcolati),e.xp6(1),e.Q6J("ngIf",!t.VIEW_MODE),e.xp6(1),e.Q6J("innerHTML",null==t.versamento?null:t.versamento.printCalcoloAutomatico,e.oJD)}}let un=(()=>{class i{constructor(t,n,o,r,c,u,d,f,g){this.messageService=t,this.alertMessageService=n,this.translateService=o,this.promptModalService=r,this.spinner=c,this.versamentoService=u,this.datePipe=d,this.logService=f,this.sessionStorageService=g,this.emitConferma=new e.vpe,this.versamentoPvPeriodo=[],this.versamentoPvPeriodoCalcolati=[],this.sysDate=new Date,this.showTable=!1,this.showTablePeriodiCalcolati=!1,this.limit=5,this.totaleCalcolato=0,this.tooltipText="tooltip text",this.form=new l.cw({dataInizio:new l.NI(null),dataFine:new l.NI(null),baseComputoInput:new l.NI(null),disabForzaInput:new l.NI(null),numCompensatiInput:new l.NI(null),numEsoCertInput:new l.NI(null),numRiallineamentoNazionale:new l.NI(null)}),this.dataRangeValidator=()=>{let m=!1;const p=this.f.dataInizio.value,v=this.f.dataFine.value;if(p&&v){const h=new Date(p),O=new Date(v);h.setHours(0,0,0,0),O.setHours(0,0,0,0),m=h.valueOf()>O.valueOf()}return m?{invalidDataRange:{dataInizio:p,dataFine:v}}:null},this.disabiliInForzaValidator=()=>{let m=!1;const p=Number(this.f.disabForzaInput.value),v=Number(this.f.baseComputoInput.value);return v>=0&&(m=p<0||p>v),m?{disabiliInForza:{disabiiliInForza:p}}:null},this.toDayDaRangeValidator=()=>{let m=!1;const p=this.f.dataInizio.value;if(p){const v=new Date(p);v.setHours(0,0,0,0),m=v.valueOf()>this.sysDate.valueOf()}return m?{today:{dataInizio:p}}:null},this.dataInizioAllowedValidator=()=>{let m=!1,p=!1,v=this.form.controls.dataInizio.value;if(!_.c.isNullOrUndefinedOrEmptyField(v)){if(!m&&this.versamentoPvPeriodo&&this.versamentoPvPeriodo.length>0){v=new Date(v),v.setHours(0,0,0,0);for(let h=0;h<this.versamentoPvPeriodo.length&&!m;h++){let O=new Date(this.versamentoPvPeriodo[h].dInizio);O.setHours(0,0,0,0);let z=new Date(this.versamentoPvPeriodo[h].dFine);z.setHours(0,0,0,0),m=v.valueOf()>=O.valueOf()&&v.valueOf()<=z.valueOf()}}if(!m){const h=this.versamenetoProvinciaSelezionata.esoTVersamentoPvSospensiones;h&&h.length>0&&(p=_.c.isNullOrUndefinedOrEmptyField(this.getSospensioneByPeriodo(v,v)))}}return m||p?{dateAllowed:{invalidDataInizioCausaSovrapp:m,invalidDataInizioCausaSosp:p}}:null},this.dataFineAllowedValidator=()=>{let m=!1,p=!1,v=this.form.controls.dataFine.value;if(!_.c.isNullOrUndefinedOrEmptyField(v)&&!m&&this.versamentoPvPeriodo&&this.versamentoPvPeriodo.length>0){v=new Date(v),v.setHours(0,0,0,0);for(let h=0;h<this.versamentoPvPeriodo.length&&!m;h++){let O=new Date(this.versamentoPvPeriodo[h].dInizio);O.setHours(0,0,0,0);let z=new Date(this.versamentoPvPeriodo[h].dFine);z.setHours(0,0,0,0),m=v.valueOf()>=O.valueOf()&&v.valueOf()<=z.valueOf()}if(!m){const h=this.versamenetoProvinciaSelezionata.esoTVersamentoPvSospensiones;h&&h.length>0&&(p=_.c.isNullOrUndefinedOrEmptyField(this.getSospensioneByPeriodo(v,v)))}}return m||p?{dateAllowed:{invalidDataFineCausaSovrapp:m,inavilDataFineCausasosp:p}}:null},this.periodoValidator=()=>{const m=this.form.controls.dataInizio.value,p=this.form.controls.dataFine.value;let y,w,v=!0,q=!1;if(_.c.isNullOrUndefinedOrEmptyField(m)||(y=new Date(m)),_.c.isNullOrUndefinedOrEmptyField(p)||(w=new Date(p)),y&&!isNaN(y.valueOf())&&w&&!isNaN(w.valueOf())){y.setHours(0,0,0,0),w.setHours(0,0,0,0);for(let J=0;J<this.versamentoPvPeriodo.length&&v;J++)if("C"!==this.versamentoPvPeriodo[J].flgTipo){let se=new Date(this.versamentoPvPeriodo[J].dFine);se.setHours(0,0,0,0);let W=new Date(this.versamentoPvPeriodo[J].dInizio);W.setHours(0,0,0,0),v=y.valueOf()>se.valueOf()||y.valueOf()<W.valueOf()&&w.valueOf()<W.valueOf()}q=!v}return q?{periodoValidator:{invalidPeriodo:q}}:null}}get VIEW_MODE(){return this.mode===s.H6.VIEW}get TOTALE_PERIODI(){let t=0;return this.versamentoPvPeriodo&&this.versamentoPvPeriodo.length>0&&this.versamentoPvPeriodo.forEach(n=>{"C"!==n.flgTipo&&(t+=n.importo)}),t}get f(){return this.form.controls}get DICHIARAZIONE_INVALID(){return!!this.form.invalid||_.c.isNullOrUndefined(this.f.dataInizio.value&&this.f.dataFine.value&&this.f.baseComputoInput.value&&this.f.disabForzaInput.value&&this.f.numCompensatiInput.value)}ngOnDestroy(){this.alertMessageService.emptyMessages()}ngOnInit(){this.ruolo=this.sessionStorageService.getItem(s.Uf.SESSION.RUOLO),this.tooltipText=this.getMsgByCode("100109");let t=this.mode===s.H6.VIEW&&(this.ruolo.idSilapDRuolo===s.gD.REGIONE.ID||this.ruolo.idSilapDRuolo===s.gD.AMMINISTRATORE.ID);_.c.isNullOrUndefinedOrEmptyField(this.versamenetoProvinciaSelezionata.esoTVersamentoPvPeriodos)||(this.versamenetoProvinciaSelezionata.esoTVersamentoPvPeriodos.sort((n,o)=>(n.dInizio=new Date(n.dInizio),o.dInizio=new Date(o.dInizio),n.dInizio.setHours(0,0,0,0),o.dInizio.setHours(0,0,0,0),n.dInizio.valueOf()-o.dInizio.valueOf())),this.versamenetoProvinciaSelezionata.esoTVersamentoPvPeriodos.forEach(n=>{"C"!==n.flgTipo&&this.versamentoPvPeriodo.push(_.c.clone(n)),t&&"O"!==n.flgTipo&&(this.versamentoPvPeriodoCalcolati.push(n),"A"===n.flgTipo&&(this.totaleCalcolato=this.totaleCalcolato+n.importo))})),this.showTable=!0,t&&(this.showTablePeriodiCalcolati=!0),this.setFormMode(),this.warnings&&this.warnings.length>0&&this.alertMessageService.setApiMessages(this.warnings),this.spinner.hide()}updateValueAndValidity(t){t.updateValueAndValidity()}setFormMode(){this.f.dataInizio.setValidators([l.kI.required,this.dataRangeValidator,this.periodoValidator]),this.f.dataFine.setValidators([l.kI.required]),this.f.dataInizio.updateValueAndValidity(),this.f.dataFine.updateValueAndValidity(),this.f.baseComputoInput.setValidators([l.kI.required,l.kI.min(0)]),this.f.disabForzaInput.setValidators([l.kI.required,this.disabiliInForzaValidator]),this.f.numCompensatiInput.setValidators([l.kI.required,l.kI.pattern(/^-?\d+$/)]),this.f.numRiallineamentoNazionale.setValidators([l.kI.required,l.kI.pattern(/^-?\d+$/)]),this.f.numRiallineamentoNazionale.setValue("0")}getMsgByCode(t){return this.messageService.getMessaggioByCod(t).dsSilapDMessaggio}onClickReset(){this.form.reset(),this.f.numRiallineamentoNazionale.setValue("0")}onClickElimina(t){var n=this;return(0,x.Z)(function*(){n.alertMessageService.emptyMessages();const o=n.translate((0,T.J)("MODAL.TITLE.PERIODO")),r=n.messageService.getMessaggioByCod("100067"),c=n.translate((0,T.J)("APP.YES")),u=n.translate((0,T.J)("APP.NO")),d={0:n.datePipe.transform(t.dInizio,"dd/MM/yyyy"),1:n.datePipe.transform(t.dFine,"dd/MM/yyyy")},f=_.c.replacePlaceHolder(r.dsSilapDMessaggio,d);(yield n.promptModalService.openPrompt(o,f,c,u,"warning"))?n.eliminaPriodo(t):console.log(`non eliminare${JSON.stringify(n.versamentoPvPeriodo)}`)})()}eliminaPriodo(t){let n;this.spinner.show(),n=t.flgTipo===s.aW.AUTOMATICO?this.versamentoService.cancellaPeriodoAutomaticoProvincia(this.versamenetoProvinciaSelezionata.idEsoTVersamentoProvincia,t):this.versamentoService.cancellaPeriodoProvincia(t),n.subscribe({next:o=>{if(o.esitoPositivo){const r=this.versamentoPvPeriodo.findIndex(c=>t.idEsoTVersamentoPvPeriodo===c.idEsoTVersamentoPvPeriodo);if(this.versamentoPvPeriodo.splice(r,1),t.flgTipo===s.aW.AUTOMATICO){const c=o.periodi;this.versamentoPvPeriodo.forEach(u=>{c.forEach(d=>{u.idEsoTVersamentoPvPeriodo===d.idEsoTVersamentoPvPeriodo&&(u.sovrapposto=d.sovrapposto)})})}this.onClickReset()}else this.alertMessageService.setApiMessages(o.apiMessages);this.spinner.hide()},error:o=>{this.logService.error(this.constructor.name,`eliminaPriodo ${JSON.stringify(o)} `),this.spinner.hide()}})}translate(t){return this.translateService.instant(t)}getMessageByCodDecodificato(t){const n=this.messageService.getMessaggioByCod(t);return _.c.replacePlaceHolder(n.dsSilapDMessaggio,{0:this.versamento.annoRiferimento,1:this.versamento.dsDenominazioneAzienda,2:this.versamento.codFiscale})}getSospensioneByPeriodo(t,n){const o=this.versamenetoProvinciaSelezionata.esoTVersamentoPvSospensiones;let r;if(o&&o.length>0){let c=new Date(t);c.setHours(0,0,0,0);let u=new Date(n);u.setHours(0,0,0,0);for(let d=0;d<o.length&&_.c.isNullOrUndefined(r);d++){let f=new Date(o[d].dInizioSospensione);f.setHours(0,0,0,0);let g=new Date(o[d].dFineSospensione);g.setHours(0,0,0,0),c.valueOf()>=f.valueOf()&&u.valueOf()<=g.valueOf()&&(r=o[d])}}return r}onClickConferma(){var t=this;return(0,x.Z)(function*(){t.spinner.show(),t.form.valid&&t.inviaPeriodo({dInizio:t.f.dataInizio.value,dFine:t.f.dataFine.value,baseComputo:t.f.baseComputoInput.value,numDisabiliInForza:t.f.disabForzaInput.value,numSoggettiCompensati:t.f.numCompensatiInput.value,numEsoneratiAutocertificati:t.f.numEsoCertInput.value,flgTipo:"O",numRiallineamentoNazionale:t.f.numRiallineamentoNazionale.value})})()}inviaPeriodo(t){this.versamentoService.inserisciPeriodoProvincia(this.versamenetoProvinciaSelezionata.idEsoTVersamentoProvincia,t).subscribe({next:n=>{n.esitoPositivo?(this.insertPeridoInTable(n.periodo),this.onClickReset()):this.alertMessageService.setApiMessages(n.apiMessages),this.spinner.hide()},error:n=>{this.spinner.hide()}})}insertPeridoInTable(t){let n=new Date(t.dInizio);n.setHours(0,0,0,0);let o=0;this.versamentoPvPeriodo.forEach((u,d)=>{if("C"!==u.flgTipo){let f=new Date(u.dFine);f.setHours(0,0,0,0),n.valueOf()>f.valueOf()&&(o=d+1)}}),this.insertItem=t;let r=this.versamentoPvPeriodo.splice(0,o,t);this.versamentoPvPeriodo=r.concat(this.versamentoPvPeriodo);const c=Math.ceil(o/this.limit);setTimeout(()=>{this.paginatedTable.goToPage(c),this.spinner.hide()},500)}onClickConfermaProsegui(){this.spinner.show(),this.versamentoService.confermaVersamentoProvincie(this.versamento.idEsoTVersamento).subscribe({next:t=>{t.esitoPositivo?this.emitConferma.emit(t.versamento):(this.alertMessageService.setApiMessages(t.apiMessages),this.spinner.hide())},error:t=>{console.error(`${JSON.stringify(t)}`),this.spinner.hide()}})}onClickRipristinaDati(){var t=this;return(0,x.Z)(function*(){const n=t.messageService.getMessaggioByCod("100101"),o=t.translate((0,T.J)("DICHIARAZIONE.MODAL.RIPRISTINO_DATI.TITLE")),r=t.translate((0,T.J)("APP.YES")),c=t.translate((0,T.J)("APP.NO")),d=_.c.replacePlaceHolder(n.dsSilapDMessaggio,{0:t.versamenetoProvinciaSelezionata.silapDProvincia.dsSilapDProvincia});(yield t.promptModalService.openPrompt(o,d,r,c,"warning"))&&t.modificaSospensioni()})()}modificaSospensioni(){this.spinner.show(),this.versamentoService.modificaSospensioniProvincia(!0,this.versamenetoProvinciaSelezionata).subscribe({next:t=>{console.log(t),t.esitoPositivo&&this.pristinePeriodi(t.versamento),this.spinner.hide()},error:t=>{this.spinner.hide(),console.error(`onClickRipristinaDati ${t}`)}})}pristinePeriodi(t){const n=t.esoTVersamentoProvincias;this.versamentoPvPeriodo=[];const o=n.find(r=>this.versamenetoProvinciaSelezionata.idEsoTVersamentoProvincia=r.idEsoTVersamentoProvincia);_.c.isNullOrUndefined(o)||(o.esoTVersamentoPvPeriodos.sort((r,c)=>(r.dInizio=new Date(r.dInizio),c.dInizio=new Date(c.dInizio),r.dInizio.setHours(0,0,0,0),c.dInizio.setHours(0,0,0,0),r.dInizio.valueOf()-c.dInizio.valueOf())),this.versamentoPvPeriodo=_.c.clone(o.esoTVersamentoPvPeriodos))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(P.e),e.Y36(R.O),e.Y36(S.sK),e.Y36(V.p),e.Y36(N.t2),e.Y36(D.gt),e.Y36(I.uU),e.Y36(b.$),e.Y36(M.u))},i.\u0275cmp=e.Xpm({type:i,selectors:[["colmirwcl-dichiarazione"]],viewQuery:function(t,n){if(1&t&&(e.Gf(Ni,5),e.Gf(Ri,5),e.Gf(zi,5)),2&t){let o;e.iGM(o=e.CRH())&&(n.d_dataFine=o.first),e.iGM(o=e.CRH())&&(n.d_dataInizio=o.first),e.iGM(o=e.CRH())&&(n.paginatedTable=o.first)}},inputs:{mode:"mode",versamento:"versamento",warnings:"warnings",versamenetoProvinciaSelezionata:"versamenetoProvinciaSelezionata"},outputs:{emitConferma:"emitConferma"},decls:2,vars:1,consts:[[1,"container-body"],["class","card",4,"ngIf"],[1,"card"],[1,"card-body"],[1,"row"],[1,"custom-h3"],["class","text-muted",4,"ngIf"],[3,"formGroup",4,"ngIf"],["class","row",4,"ngIf"],["class","row justify-content-end",4,"ngIf"],[3,"innerHTML"],[1,"text-muted"],[1,"oblg"],[3,"formGroup"],[1,"mb-5","col-sm-12","col-md-4"],["for","dataInizio"],[1,"col-sm-8"],[1,"input-group"],["type","text","data-provide","datepicker","formControlName","dataInizio","id","dataInizio","placeholder","Data da","ngbDatepicker","","maxlength","10",1,"form-control",3,"minDate","maxDate","keyup","dateSelect"],["d_dataInizio","ngbDatepicker"],[1,"input-group-addon"],["type","button",1,"btn","btn-outline-primary","calendar",3,"click"],[1,"sr-only"],[1,"far","fa-calendar-alt","fa-lg"],["class","text-danger",4,"ngIf"],["for","dataFine"],["type","text","formControlName","dataFine","id","dataFine","placeholder","Data a","ngbDatepicker","","maxlength","10",1,"form-control",3,"minDate","maxDate","keyup","dateSelect"],["d_dataFine","ngbDatepicker"],["for","baseComputo"],["type","text","colmirwclOnlyNumber","","id","percentSosp","formControlName","baseComputoInput","maxlength","6",1,"form-control",3,"keyup"],[1,"col-sm-12","col-md-4"],["for","disabForza"],["type","text","colmirwclOnlyNumber","","id","disabForza","formControlName","disabForzaInput","maxlength","6",1,"form-control"],["for","numCompensati"],["type","text","colmirwclOnlyNegativePositiveNumber","","id","numCompensati","formControlName","numCompensatiInput","maxlength","6",1,"form-control"],["for","numEsoCert"],["type","text","colmirwclOnlyNumber","","id","numEsoCert","formControlName","numEsoCertInput","maxlength","6",1,"form-control"],["for","numRiallineam"],["type","text","colmirwclOnlyNegativePositiveNumber","","id","numRiallineam","formControlName","numRiallineamentoNazionale","maxlength","6",1,"form-control"],[1,"text-danger"],[4,"ngIf"],[1,"col"],["type","button",1,"btn","btn-outline-secondary","btn-sm",3,"click"],[1,"col-auto"],["type","button",1,"btn","btn-sm","btn-primary",3,"disabled","click"],[1,"col","align-self-start"],[1,"title"],["class","col align-self-end",4,"ngIf"],[1,"col","align-self-end"],["type","button",1,"btn","btn-outline-secondary","btn-sm","btn-ripristina-dati",3,"click"],[3,"columnNumber","pagedResponse","limit"],["paginatedTable",""],["colmirwclPaginationHead",""],["colmirwclPaginationBody",""],[1,"mb-5","col-sm-12","col-md-6","mt-4"],["for","totPeriodi"],[3,"ngClass"],["tipContent1",""],["class","operatore",3,"ngbTooltip",4,"ngIf"],[3,"ngClass",4,"ngIf"],[1,"operatore",3,"ngbTooltip"],[3,"click"],["title","Elimina",1,"fas","fa-trash-alt"],["for","totAziendaPeriodi"],["tipContent2",""],[1,"row","justify-content-end"],["type","button",1,"btn","btn-sm","btn-primary",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,cn,14,11,"div",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",n.form))},directives:[I.O5,l._Y,l.JL,l.sg,l.Fj,A.J4,l.JJ,l.u,l.nD,B,xi,Pi.e,G.Q,Q.Q,I.mk,A._L],pipes:[S.X$,I.uU,I.JJ],styles:["table[_ngcontent-%COMP%]{border-collapse:collapse;width:100%;margin-bottom:20px}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:7px;text-align:left}td[_ngcontent-%COMP%]{border-bottom:1px solid #dee2e6}.custom-h3[_ngcontent-%COMP%]{margin-top:0}.insert-item[_ngcontent-%COMP%]{background-color:#00000013!important}h3.title[_ngcontent-%COMP%]{width:40.4em}.btn-ripristina-dati[_ngcontent-%COMP%]{margin-top:2em;float:right;width:14em}.periodo-sovrapposto[_ngcontent-%COMP%]{background-color:#f006!important}.operatore[_ngcontent-%COMP%]{font-weight:700;font-size:1.2em;padding:3%}"]}),i})();function dn(i,a){if(1&i&&(e.TgZ(0,"option",12),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.Q6J("ngValue",t),e.xp6(1),e.hij(" ",null==t||null==t.silapDProvincia?null:t.silapDProvincia.dsSilapDProvincia,"")}}function mn(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",4)(1,"form",7)(2,"div",8)(3,"label",9),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"select",10),e.NdJ("change",function(){return e.CHM(t),e.oxw().onChangeProvincia()}),e.YNc(7,dn,2,2,"option",11),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.form),e.xp6(3),e.Oqu(e.lcZ(5,3,"PROVINCE.FIELD.SEL_PROV")),e.xp6(3),e.Q6J("ngForOf",t.versamentoProvince)}}function pn(i,a){if(1&i&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"date"),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.ALo(8,"date"),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.ALo(13,"date"),e.qZA(),e.TgZ(14,"td"),e._uU(15),e.ALo(16,"date"),e.qZA()()),2&i){const t=a.$implicit;e.xp6(2),e.Oqu(e.xi3(3,6,null==t?null:t.dRichiesta,"dd/MM/yyyy")),e.xp6(3),e.Oqu(null==t?null:t.percRichiesta),e.xp6(2),e.Oqu(e.xi3(8,9,null==t?null:t.dConcessione,"dd/MM/yyyy")),e.xp6(3),e.Oqu(null==t?null:t.percConcessione),e.xp6(2),e.Oqu(e.xi3(13,12,null==t?null:t.dScadenza,"dd/MM/yyyy")),e.xp6(3),e.Oqu(e.xi3(16,15,null==t?null:t.dDiniego,"dd/MM/yyyy"))}}function _n(i,a){if(1&i&&(e.TgZ(0,"div",4)(1,"div",13)(2,"h3",14),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"table")(6,"thead")(7,"tr")(8,"th"),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"th"),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"th"),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"th"),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.TgZ(20,"th"),e._uU(21),e.ALo(22,"translate"),e.qZA(),e.TgZ(23,"th"),e._uU(24),e.ALo(25,"translate"),e.qZA()()(),e.TgZ(26,"tbody"),e.YNc(27,pn,17,18,"tr",15),e.qZA()()()),2&i){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,8,"PROVINCE.LABEL.DATI_ESON_PARZIALE")),e.xp6(6),e.Oqu(e.lcZ(10,10,"PROVINCE.LABEL.DATA_RICHIESTA")),e.xp6(3),e.Oqu(e.lcZ(13,12,"PROVINCE.LABEL.%_RICHIESTA")),e.xp6(3),e.Oqu(e.lcZ(16,14,"PROVINCE.LABEL.DATA_CONCESSIONE")),e.xp6(3),e.Oqu(e.lcZ(19,16,"PROVINCE.LABEL.%_CONCESSA")),e.xp6(3),e.Oqu(e.lcZ(22,18,"PROVINCE.LABEL.DATA_SCADENZA")),e.xp6(3),e.Oqu(e.lcZ(25,20,"PROVINCE.LABEL.DATA_DINIEGO")),e.xp6(3),e.Q6J("ngForOf",null==t.versamenetoProvinciaSelezionata?null:t.versamenetoProvinciaSelezionata.esoTVersamentoPvEsoneros)}}function fn(i,a){if(1&i&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"date"),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.ALo(10,"date"),e.qZA()()),2&i){const t=a.$implicit;e.xp6(2),e.Oqu(e.xi3(3,4,null==t?null:t.dStipula,"dd/MM/yyyy")),e.xp6(3),e.Oqu(null==t||null==t.esoDVersamentoTipoConvenzione?null:t.esoDVersamentoTipoConvenzione.dsEsoDVersamentoTipoConvenzione),e.xp6(2),e.Oqu(null==t?null:t.numPosizioniAperte),e.xp6(2),e.Oqu(e.xi3(10,7,null==t?null:t.dScadenza,"dd/MM/yyyy"))}}function vn(i,a){if(1&i&&(e.TgZ(0,"div",4)(1,"div",13)(2,"h3",14),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"table")(6,"thead")(7,"tr")(8,"th"),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"th"),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"th"),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"th"),e._uU(18),e.ALo(19,"translate"),e.qZA()()(),e.TgZ(20,"tbody"),e.YNc(21,fn,11,10,"tr",15),e.qZA()()()),2&i){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,6,"PROVINCE.LABEL.DATI_CONVENZIONE")),e.xp6(6),e.Oqu(e.lcZ(10,8,"PROVINCE.LABEL.DATA_STIPULA")),e.xp6(3),e.Oqu(e.lcZ(13,10,"PROVINCE.LABEL.TIPOLOGIA")),e.xp6(3),e.Oqu(e.lcZ(16,12,"PROVINCE.LABEL.NUM_POSIZIONI_APERTE")),e.xp6(3),e.Oqu(e.lcZ(19,14,"PROVINCE.LABEL.DATA_SCADENZA")),e.xp6(3),e.Q6J("ngForOf",null==t.versamenetoProvinciaSelezionata?null:t.versamenetoProvinciaSelezionata.esoTVersamentoPvConvenziones)}}function gn(i,a){if(1&i&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA()()),2&i){const t=a.$implicit;e.xp6(2),e.Oqu(null==t?null:t.annoRiferimento),e.xp6(2),e.Oqu(null==t?null:t.baseComputoProvinciale),e.xp6(2),e.Oqu(null==t?null:t.quotaRiservaDisabili),e.xp6(2),e.Oqu(null==t?null:t.numDisabiliInForza),e.xp6(2),e.Oqu(null==t?null:t.numSoggettiCompensatiDisabili),e.xp6(2),e.Oqu(null==t?null:t.numEsoneratiAutocertificati)}}function hn(i,a){if(1&i&&e._UZ(0,"div",17),2&i){const t=e.oxw(2);e.Q6J("innerHTML",t.getMessageByCodDecodificato("100099"),e.oJD)}}function In(i,a){if(1&i&&(e.TgZ(0,"div",4)(1,"div",13)(2,"h3",14),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"table")(6,"thead")(7,"tr")(8,"th"),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"th"),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"th"),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"th"),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.TgZ(20,"th"),e._uU(21),e.ALo(22,"translate"),e.qZA(),e.TgZ(23,"th"),e._uU(24),e.ALo(25,"translate"),e.qZA()()(),e.TgZ(26,"tbody"),e.YNc(27,gn,13,6,"tr",15),e.qZA()(),e.YNc(28,hn,1,1,"div",16),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,9,"PROVINCE.LABEL.DATI_PROSPETTI_INFO")),e.xp6(6),e.Oqu(e.lcZ(10,11,"PROVINCE.LABEL.ANNO")),e.xp6(3),e.Oqu(e.lcZ(13,13,"PROVINCE.LABEL.BASE_COMPUTO")),e.xp6(3),e.Oqu(e.lcZ(16,15,"PROVINCE.LABEL.QUOTA_RISERVA")),e.xp6(3),e.Oqu(e.lcZ(19,17,"PROVINCE.LABEL.DISABILI_FORZA")),e.xp6(3),e.Oqu(e.lcZ(22,19,"PROVINCE.LABEL.NUM_COMPENSAZIONE")),e.xp6(3),e.Oqu(e.lcZ(25,21,"PROVINCE.LABEL.NUM_ESON_AUTOCERT")),e.xp6(3),e.Q6J("ngForOf",t.versamentoPvProspettoWrapper),e.xp6(1),e.Q6J("ngIf",t.prospettoRiallineamentoNazionale)}}function An(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"colmirwcl-giorni-lavorativi",25),e.NdJ("emitConferma",function(o){e.CHM(t),e.oxw();const r=e.MAs(3);return e.oxw().confermaGiorniLavorativi(o,r)}),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("mode",t.mode)("initialVersamento",t.initialVersamento)("versamenetoProvinciaSelezionata",t.versamenetoProvinciaSelezionata)}}function Cn(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"colmirwcl-sospensioni",26),e.NdJ("emitConferma",function(o){e.CHM(t),e.oxw();const r=e.MAs(3);return e.oxw().confermaSospensioni(o,r)}),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("initialVersamento",t.initialVersamento)("versamenetoProvinciaSelezionataInitial",t.versamenetoProvinciaSelezionata)("mode",t.mode)}}function Tn(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"colmirwcl-dichiarazione",27),e.NdJ("emitConferma",function(o){return e.CHM(t),e.oxw(2).confermaDichiarazioneVersamento(o)}),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("warnings",t.warnings)("versamento",t.initialVersamento)("versamenetoProvinciaSelezionata",t.versamenetoProvinciaSelezionata)("mode",t.mode)}}function Zn(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"ul",18,19),e.NdJ("activeIdChange",function(o){return e.CHM(t),e.oxw().active=o}),e.TgZ(4,"li",20)(5,"a",21),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.YNc(8,An,1,3,"ng-template",22),e.qZA(),e.TgZ(9,"li",23)(10,"a",21),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.YNc(13,Cn,1,3,"ng-template",22),e.qZA(),e.TgZ(14,"li",23)(15,"a",21),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.YNc(18,Tn,1,4,"ng-template",22),e.qZA()(),e._UZ(19,"div",24),e.qZA()()}if(2&i){const t=e.MAs(3),n=e.oxw();e.xp6(2),e.Q6J("activeId",n.active),e.xp6(2),e.Q6J("ngbNavItem",0),e.xp6(2),e.Oqu(e.lcZ(7,10,"PROVINCE.TABS.TILE.GIORNI_LAVORATIVI")),e.xp6(3),e.Q6J("disabled",!n.VIEW_MODE&&n.active<1)("ngbNavItem",1),e.xp6(2),e.Oqu(e.lcZ(12,12,"PROVINCE.TABS.TILE.SOSPENSIONI")),e.xp6(3),e.Q6J("disabled",!n.VIEW_MODE&&n.active<2)("ngbNavItem",2),e.xp6(2),e.Oqu(e.lcZ(17,14,"PROVINCE.TABS.TILE.DETTAGLIO_DICHIARAZIONE")),e.xp6(3),e.Q6J("ngbNavOutlet",t)}}let Sn=(()=>{class i{constructor(t,n,o,r,c,u){this.messageService=t,this.spinner=n,this.versamentoEsoneriService=o,this.alertMessageService=r,this.logService=c,this.sessionStorageService=u,this.emitConferma=new e.vpe,this.active=0}get VIEW_MODE(){return this.mode===s.H6.VIEW}ngOnInit(){this.spinner.show(),this.messaggioAccordionInfo=this.messageService.getMessaggioByCod("100001"),this.versamentoCorrente=_.c.clone(this.initialVersamento),this.versamentoProvince=this.versamentoCorrente.esoTVersamentoProvincias,this.versamentoProvince.sort((t,n)=>function On(i,a){return i>a?1:i<a?-1:0}(t.silapDProvincia.dsSilapDProvincia,n.silapDProvincia.dsSilapDProvincia)),this.initForm(),this.form.controls.versamentoProvincia.patchValue(this.versamentoProvince[0]),this.onChangeProvincia(),this.spinner.hide()}initForm(){this.form=new l.cw({versamentoProvincia:new l.NI})}onChangeProvincia(){if(this.active=0,this.versamenetoProvinciaSelezionata=this.form.controls.versamentoProvincia.value,this.versamentoPvProspettoWrapper=[],!this.versamenetoProvinciaSelezionata)return;const t=this.versamentoCorrente.esoTVersamentoProspettos,n=1===t.length?t[0].annoRiferimento:this.versamentoCorrente.annoRiferimento-1;let o,r;t&&t.length>0&&t.forEach(c=>{c.annoRiferimento===n&&(o=c),c.esoTVersamentoPvProspettos.forEach(u=>{u.silapDProvincia.id===this.versamenetoProvinciaSelezionata.silapDProvincia.id&&(this.versamentoPvProspettoWrapper.push({annoRiferimento:c.annoRiferimento,baseComputoProvinciale:u.baseComputoProvinciale,quotaRiservaDisabili:u.quotaRiservaDisabili,numDisabiliInForza:u.numDisabiliInForza,numSoggettiCompensatiDisabili:u.catCompensazioneDisabili===s.MY.RIDUZIONE?"-"+u.numSoggettiCompensatiDisabili:u.catCompensazioneDisabili===s.MY.ECCESSO?"+"+u.numSoggettiCompensatiDisabili:""+u.numSoggettiCompensatiDisabili,numEsoneratiAutocertificati:u.numEsoneratiAutocertificati}),c.annoRiferimento===n&&(r=u))})}),this.calcolaRiallineamentoNazionale(o,r)}confermaGiorniLavorativi(t,n){if(this.active<0)return;this.spinner.show();const o=t;this.versamenetoProvinciaSelezionata.numGgLavorativiSettimanali=o.numGgLavorativiSettimanali,this.versamenetoProvinciaSelezionata.dFestaPatronale=o.dFestaPatronale,this.versamenetoProvinciaSelezionata.esoTVersamentoPvGgExtraFestivis=o.esoTVersamentoPvGgExtraFestivis,(this.mode===s.H6.INS?this.versamentoEsoneriService.salvaGGLavorativiProvincia(o):this.versamentoEsoneriService.modificaGGLavorativiProvincia(o)).subscribe({next:c=>{c.esitoPositivo?(this.setDispositions(c.versamento),n.select(this.active+1)):(this.alertMessageService.setApiMessages(c.apiMessages),this.spinner.hide())},error:c=>{this.logService.error(this.constructor.name,`loadMessage: ${JSON.stringify(c)}`),this.spinner.hide()}})}confermaSospensioni(t,n){this.active<0||(this.spinner.show(),this.versamenetoProvinciaSelezionata.esoTVersamentoPvSospensiones=t,(this.mode===s.H6.INS?this.versamentoEsoneriService.salvaSospensioniProvincia(this.versamenetoProvinciaSelezionata):this.versamentoEsoneriService.modificaSospensioniProvincia(!1,this.versamenetoProvinciaSelezionata)).subscribe({next:r=>{r.esitoPositivo?(this.setDispositions(r.versamento,r.apiMessages),n.select(this.active+1)):(this.alertMessageService.setApiMessages(r.apiMessages),this.spinner.hide())},error:r=>{this.logService.error(this.constructor.name,`loadMessage: ${JSON.stringify(r)}`),this.spinner.hide()}}))}setDispositions(t,n){this.initialVersamento=t,this.sessionStorageService.setItem(s.Uf.SESSION.VERSAMENTO,this.initialVersamento),this.versamentoCorrente=_.c.clone(this.initialVersamento),this.versamentoProvince=this.versamentoCorrente.esoTVersamentoProvincias;const o=this.versamentoProvince.find(r=>r.idEsoTVersamentoProvincia===this.versamenetoProvinciaSelezionata.idEsoTVersamentoProvincia);this.versamenetoProvinciaSelezionata=o,this.form.controls.versamentoProvincia.patchValue(this.versamenetoProvinciaSelezionata),n&&n.length>0&&(this.warnings=n)}confermaDichiarazioneVersamento(t){this.emitConferma.emit(t)}getMessageByCodDecodificato(t){const n=this.messageService.getMessaggioByCod(t);return _.c.replacePlaceHolder(n.dsSilapDMessaggio,{0:this.prospettoRiallineamentoNazionale.annoRiferimento,1:this.riallineamentoNazionale})}calcolaRiallineamentoNazionale(t,n){if(t&&n){const o=n.quotaRiservaDisabili,r=t.categoriaAzienda;if(this.riallineamentoNazionale=0,r===s.Ny.A){const c=Number(n.baseComputoProvinciale);let f,u=.07*c-Math.floor(.07*c);f=Number(u.toPrecision(2))>.5?Math.round(.07*c):Math.floor(.07*c),this.riallineamentoNazionale=Math.round(o-f)}else this.riallineamentoNazionale=r===s.Ny.B?o-2:r===s.Ny.C?o-1:0;this.prospettoRiallineamentoNazionale=0!==this.riallineamentoNazionale?t:null}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(P.e),e.Y36(N.t2),e.Y36(D.gt),e.Y36(R.O),e.Y36(b.$),e.Y36(M.u))},i.\u0275cmp=e.Xpm({type:i,selectors:[["colmirwcl-province"]],inputs:{mode:"mode",initialVersamento:"initialVersamento"},outputs:{emitConferma:"emitConferma"},decls:13,vars:9,consts:[[1,"container"],[3,"messaggio"],[1,"card"],[1,"card-body"],[1,"row"],["class","row",4,"ngIf"],["class","card",4,"ngIf"],[3,"formGroup"],[1,"mb3","col-sm-12","col-md-4"],["for","province"],["formControlName","versamentoProvincia","id","province",1,"form-select",3,"change"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],[1,"col-sm-12","col-md-6"],[1,"title"],[4,"ngFor","ngForOf"],["class","alert-info info-box-quota-riserva",3,"innerHTML",4,"ngIf"],[1,"alert-info","info-box-quota-riserva",3,"innerHTML"],["ngbNav","",1,"nav-tabs",3,"activeId","activeIdChange"],["nav","ngbNav"],[3,"ngbNavItem"],["ngbNavLink",""],["ngbNavContent",""],[3,"disabled","ngbNavItem"],[3,"ngbNavOutlet"],[3,"mode","initialVersamento","versamenetoProvinciaSelezionata","emitConferma"],[3,"initialVersamento","versamenetoProvinciaSelezionataInitial","mode","emitConferma"],[3,"warnings","versamento","versamenetoProvinciaSelezionata","mode","emitConferma"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"colmirwcl-accordion-info",1),e.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3"),e._uU(6),e.ALo(7,"translate"),e.qZA()(),e.YNc(8,mn,8,5,"div",5),e.YNc(9,_n,28,22,"div",5),e.YNc(10,vn,22,16,"div",5),e.YNc(11,In,29,23,"div",5),e.qZA()(),e.YNc(12,Zn,20,16,"div",6),e.qZA()),2&t&&(e.xp6(1),e.Q6J("messaggio",n.messaggioAccordionInfo),e.xp6(5),e.Oqu(e.lcZ(7,7,"PROVINCE.FIELD.ELENCO_PROVINCE")),e.xp6(2),e.Q6J("ngIf",n.form),e.xp6(1),e.Q6J("ngIf",n.versamenetoProvinciaSelezionata),e.xp6(1),e.Q6J("ngIf",n.versamenetoProvinciaSelezionata),e.xp6(1),e.Q6J("ngIf",n.versamenetoProvinciaSelezionata&&(null==n.versamentoPvProspettoWrapper?null:n.versamentoPvProspettoWrapper.length)>0),e.xp6(1),e.Q6J("ngIf",n.versamenetoProvinciaSelezionata))},directives:[H,I.O5,l._Y,l.JL,l.sg,l.EJ,l.JJ,l.u,I.sg,l.YN,l.Kr,A.Pz,A.nv,A.Vx,A.uN,Gt,Ei,un,A.tO],pipes:[S.X$,I.uU],styles:["table[_ngcontent-%COMP%]{border-collapse:collapse;width:100%;table-layout:fixed}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:8px;text-align:left}td[_ngcontent-%COMP%]{border-bottom:1px solid #dee2e6}.custom-h3[_ngcontent-%COMP%]{margin-top:0}.info-box-quota-riserva[_ngcontent-%COMP%]{margin-top:.5em}"]}),i})();function En(i,a){if(1&i&&(e.TgZ(0,"div")(1,"div",11)(2,"div",12)(3,"label",13),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"span",14),e._uU(7),e.qZA()(),e.TgZ(8,"div",15)(9,"label",16),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"span",14),e._uU(13),e.qZA()(),e.TgZ(14,"div",17)(15,"label",18),e._uU(16),e.ALo(17,"translate"),e.qZA()(),e.TgZ(18,"div",19)(19,"label",20),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"span",14),e._uU(23),e.qZA()(),e.TgZ(24,"div",19)(25,"label",21),e._uU(26),e.ALo(27,"translate"),e.qZA(),e.TgZ(28,"span",14),e._uU(29),e.qZA()(),e.TgZ(30,"div",19)(31,"label",22),e._uU(32),e.ALo(33,"translate"),e.qZA(),e.TgZ(34,"span",14),e._uU(35),e.qZA()(),e.TgZ(36,"div",17)(37,"label",23),e._uU(38),e.ALo(39,"translate"),e.qZA(),e.TgZ(40,"span",14),e._uU(41),e.qZA()()()()),2&i){const t=e.oxw();e.xp6(4),e.Oqu(e.lcZ(5,13,"RIEPILOGO.LABEL.CF")),e.xp6(3),e.Oqu(null==t.versamentoCorrente?null:t.versamentoCorrente.codFiscale),e.xp6(3),e.Oqu(e.lcZ(11,15,"RIEPILOGO.LABEL.DENOMINAZIONE_AZIENDA")),e.xp6(3),e.Oqu(null==t.versamentoCorrente?null:t.versamentoCorrente.dsDenominazioneAzienda),e.xp6(3),e.Oqu(e.lcZ(17,17,"RIEPILOGO.LABEL.SEDE_LEGALE")),e.xp6(4),e.Oqu(e.lcZ(21,19,"RIEPILOGO.LABEL.COMUNE")),e.xp6(3),e.Oqu((null==t.versamentoCorrente||null==t.versamentoCorrente.versamentoSede||null==t.versamentoCorrente.versamentoSede.comune?null:t.versamentoCorrente.versamentoSede.comune.id)+(null!=t.versamentoCorrente&&null!=t.versamentoCorrente.versamentoSede&&null!=t.versamentoCorrente.versamentoSede.comune&&t.versamentoCorrente.versamentoSede.comune.id?", ":"")+(null==t.versamentoCorrente||null==t.versamentoCorrente.versamentoSede||null==t.versamentoCorrente.versamentoSede.comune?null:t.versamentoCorrente.versamentoSede.comune.descr)),e.xp6(3),e.Oqu(e.lcZ(27,21,"RIEPILOGO.LABEL.INDIRIZZO")),e.xp6(3),e.Oqu(null==t.versamentoCorrente||null==t.versamentoCorrente.versamentoSede?null:t.versamentoCorrente.versamentoSede.dsIndirizzo),e.xp6(3),e.Oqu(e.lcZ(33,23,"RIEPILOGO.LABEL.CAP")),e.xp6(3),e.Oqu(null==t.versamentoCorrente||null==t.versamentoCorrente.versamentoSede?null:t.versamentoCorrente.versamentoSede.codCap),e.xp6(3),e.Oqu(e.lcZ(39,25,"RIEPILOGO.LABEL.CCNL")),e.xp6(3),e.Oqu(null!=t.versamentoCorrente&&null!=t.versamentoCorrente.silapDCcnl&&t.versamentoCorrente.silapDCcnl.cod?(null==t.versamentoCorrente?null:t.versamentoCorrente.silapDCcnl.cod)+(null==t.versamentoCorrente||null==t.versamentoCorrente.silapDCcnl?null:t.versamentoCorrente.silapDCcnl.descr):"")}}function xn(i,a){if(1&i&&(e.TgZ(0,"div")(1,"div",11)(2,"div",12)(3,"label",24),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"span",14),e._uU(7),e.qZA()(),e.TgZ(8,"div",15)(9,"label",25),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"span",14),e._uU(13),e.ALo(14,"number"),e.qZA()(),e.TgZ(15,"div",12)(16,"label",26),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"span",14),e._uU(20),e.ALo(21,"translate"),e.qZA()(),e.TgZ(22,"div",12)(23,"label",27),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.TgZ(26,"span",14),e._uU(27),e.qZA()()()()),2&i){const t=e.oxw();e.xp6(4),e.Oqu(e.lcZ(5,8,"RIEPILOGO.LABEL.ANNO_RIF")),e.xp6(3),e.Oqu(null==t.versamentoCorrente?null:t.versamentoCorrente.annoRiferimento),e.xp6(3),e.Oqu(e.lcZ(11,10,"RIEPILOGO.LABEL.CREDITO_RESIDUO")),e.xp6(3),e.Oqu(e.xi3(14,12,null==t.versamentoCorrente?null:t.versamentoCorrente.numCreditoResiduo,"0.2-2")),e.xp6(4),e.Oqu(e.lcZ(18,15,"RIEPILOGO.LABEL.VERSAMENTO")),e.xp6(3),e.Oqu(e.lcZ(21,17,1===(null==t.versamentoCorrente?null:t.versamentoCorrente.numRate)?"DATI_AZIENDALI.FIELD.VERSAMENTO_1":"DATI_AZIENDALI.FIELD.VERSAMENTO_2")),e.xp6(4),e.Oqu(e.lcZ(25,19,"RIEPILOGO.LABEL.MAIL_RIF")),e.xp6(3),e.Oqu(null==t.versamentoCorrente?null:t.versamentoCorrente.dsEmailRiferimento)}}function Dn(i,a){if(1&i&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.ALo(9,"number"),e.qZA()()),2&i){const t=a.$implicit;e.xp6(2),e.Oqu(null==t?null:t.provincia),e.xp6(2),e.Oqu(null==t?null:t.giorniLavorativi),e.xp6(2),e.Oqu(null==t?null:t.numLavEsonerati),e.xp6(2),e.Oqu(e.xi3(9,4,null==t?null:t.importo,"0.2-2"))}}function Pn(i,a){if(1&i&&(e.TgZ(0,"tr",36)(1,"td"),e._uU(2),e.ALo(3,"date"),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA()()),2&i){const t=a.$implicit;e.xp6(2),e.Oqu(e.xi3(3,3,null==t?null:t.dtStato,"dd/MM/yyyy")),e.xp6(3),e.Oqu(null==t||null==t.esoDVersamentoStato?null:t.esoDVersamentoStato.descr),e.xp6(2),e.Oqu(null==t?null:t.dsNote)}}function Nn(i,a){if(1&i&&(e.TgZ(0,"div")(1,"table")(2,"thead")(3,"tr")(4,"th"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"th"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"th"),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"th"),e._uU(14),e.ALo(15,"translate"),e.qZA()()(),e.TgZ(16,"tbody"),e.YNc(17,Dn,10,7,"tr",30),e.qZA()(),e.TgZ(18,"div",31)(19,"label",32),e._uU(20),e.ALo(21,"translate"),e.qZA(),e._UZ(22,"br"),e._uU(23),e.qZA(),e.TgZ(24,"div",33)(25,"h3",34),e._uU(26),e.ALo(27,"translate"),e.qZA()(),e.TgZ(28,"div",12)(29,"label",35),e._uU(30),e.ALo(31,"translate"),e.qZA(),e._UZ(32,"br"),e._uU(33),e.qZA(),e.TgZ(34,"table")(35,"thead")(36,"tr",36)(37,"th"),e._uU(38),e.ALo(39,"translate"),e.qZA(),e.TgZ(40,"th"),e._uU(41),e.ALo(42,"translate"),e.qZA(),e.TgZ(43,"th"),e._uU(44),e.ALo(45,"translate"),e.qZA()()(),e.TgZ(46,"tbody"),e.YNc(47,Pn,8,6,"tr",37),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(5),e.Oqu(e.lcZ(6,14,"RIEPILOGO.LABEL.PROVINCIA")),e.xp6(3),e.Oqu(e.lcZ(9,16,"RIEPILOGO.LABEL.GIORNI_LAVORATIVI")),e.xp6(3),e.Oqu(e.lcZ(12,18,"RIEPILOGO.LABEL.NUM_ESONERATI")),e.xp6(3),e.Oqu(e.lcZ(15,20,"RIEPILOGO.LABEL.IMPORTO")),e.xp6(3),e.Q6J("ngForOf",t.dichiarazioneVersamenti),e.xp6(3),e.Oqu(e.lcZ(21,22,"RIEPILOGO.LABEL.TOT_AZIENDA")),e.xp6(3),e.hij(" ",t.totaleImporto," "),e.xp6(3),e.Oqu(e.lcZ(27,24,"RIEPILOGO.TITLE_ITER_DICHIA_VERS")),e.xp6(4),e.Oqu(e.lcZ(31,26,"RIEPILOGO.LABEL.PROTOCOLLO")),e.xp6(3),e.hij(" ",(null!=t.versamentoCorrente&&t.versamentoCorrente.annoProtocollo?(null==t.versamentoCorrente?null:t.versamentoCorrente.annoProtocollo)+"/":"")+(null!=t.versamentoCorrente&&t.versamentoCorrente.numProtocollo?null==t.versamentoCorrente?null:t.versamentoCorrente.numProtocollo:"")," "),e.xp6(5),e.Oqu(e.lcZ(39,28,"RIEPILOGO.LABEL.DATA")),e.xp6(3),e.Oqu(e.lcZ(42,30,"RIEPILOGO.LABEL.STATO")),e.xp6(3),e.Oqu(e.lcZ(45,32,"RIEPILOGO.LABEL.NOTE")),e.xp6(3),e.Q6J("ngForOf",null==t.versamentoCorrente?null:t.versamentoCorrente.esoTVersamentoStatos)}}function Rn(i,a){1&i&&(e.TgZ(0,"ngb-accordion",28,29)(2,"ngb-panel",7),e.ALo(3,"translate"),e.YNc(4,Nn,48,34,"ng-template",4),e.qZA()()),2&i&&(e.Q6J("closeOthers",!0)("destroyOnHide",!1),e.xp6(2),e.Q6J("title",e.lcZ(3,3,"RIEPILOGO.TITLE_DICHIA_VERS")))}function zn(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"p",41),e._uU(1),e.ALo(2,"translate"),e.TgZ(3,"span",42),e._uU(4,"*"),e.qZA(),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"form",43)(8,"div",11)(9,"div",12)(10,"label"),e._uU(11),e.ALo(12,"translate"),e.TgZ(13,"span",44),e._uU(14,"*"),e.qZA()()(),e.TgZ(15,"div",12)(16,"div",45),e._UZ(17,"input",46),e.TgZ(18,"label",47),e._uU(19),e.ALo(20,"translate"),e.qZA()(),e.TgZ(21,"div",45),e._UZ(22,"input",48),e.TgZ(23,"label",49),e._uU(24),e.ALo(25,"translate"),e.qZA()()()(),e.TgZ(26,"div",11)(27,"div",50)(28,"label",51),e._uU(29),e.ALo(30,"translate"),e.TgZ(31,"span",44),e._uU(32,"*"),e.qZA()(),e._UZ(33,"textarea",52),e.qZA()()(),e.TgZ(34,"div",53)(35,"div",54)(36,"button",55),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onClickAutorizza()}),e._uU(37),e.ALo(38,"translate"),e.qZA()()()}if(2&i){const t=e.oxw(2);e.xp6(1),e.hij("",e.lcZ(2,11,"APP.GENERICO.CAMPI_CONTR")," "),e.xp6(4),e.hij(" ",e.lcZ(6,13,"APP.GENERICO.OBBLIGO"),""),e.xp6(2),e.Q6J("formGroup",t.form),e.xp6(4),e.Oqu(e.lcZ(12,15,"RIEPILOGO.AUTORIZZA.LABEL.RADIO")),e.xp6(6),e.Q6J("value",4),e.xp6(2),e.hij(" ",e.lcZ(20,17,"RIEPILOGO.AUTORIZZA.FIELD.SI")," "),e.xp6(3),e.Q6J("value",5),e.xp6(2),e.hij(" ",e.lcZ(25,19,"RIEPILOGO.AUTORIZZA.FIELD.NO")," "),e.xp6(5),e.Oqu(e.lcZ(30,21,"RIEPILOGO.AUTORIZZA.FIELD.NOTE")),e.xp6(7),e.Q6J("disabled",!(null!=t.form&&t.form.valid)),e.xp6(1),e.Oqu(e.lcZ(38,23,"RIEPILOGO.AUTORIZZA.BTN.AGGIORNA_STATO"))}}function Ln(i,a){1&i&&(e.TgZ(0,"ngb-accordion",38,39)(2,"ngb-panel",40),e.ALo(3,"translate"),e.YNc(4,zn,39,25,"ng-template",4),e.qZA()()),2&i&&(e.Q6J("closeOthers",!0)("destroyOnHide",!1),e.xp6(2),e.Q6J("title",e.lcZ(3,3,"RIEPILOGO.ACCORDION.TITLE.AUTORIZZA")))}function bn(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",53)(1,"div",54)(2,"button",56),e.NdJ("click",function(){return e.CHM(t),e.oxw().onClickInvio()}),e._uU(3),e.ALo(4,"translate"),e.qZA()()()}2&i&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"RIEPILOGO.BTN.INVIO")))}let Vn=(()=>{class i{constructor(t,n,o,r,c,u,d,f,g,m,p){this.sessionStorageService=t,this.translateService=n,this.messageService=o,this.promptModalService=r,this.versamentoEsoneriService=c,this.utilitiesService=u,this.alertMessageService=d,this.datePipe=f,this.decimalPipe=g,this.spinner=m,this.logService=p,this.emitConfermainvio=new e.vpe,this.emitAutorizzazione=new e.vpe}get VIEW_MODE(){return this.mode===s.H6.VIEW}get SHOW_BTN_INVIO(){return this.mode!==s.H6.VIEW&&this.ruolo.idSilapDRuolo!==s.gD.REGIONE.ID}get f(){return this.form.controls}get SEZIONE_AUTORIZZA(){let t=!1;if(this.mode===s.H6.VIEW&&(this.ruolo.idSilapDRuolo===s.gD.REGIONE.ID||this.ruolo.idSilapDRuolo===s.gD.AMMINISTRATORE.ID)){const n=this.versamentoCorrente.esoTVersamentoStatos;for(let o=0;o<n.length&&!t;o++)t="S"===n[o].flgCurrentRecord&&n[o].esoDVersamentoStato.id===s.uT.MODIFICATA.ID}return t}ngOnInit(){this.messaggioAccordionInfo=this.messageService.getMessaggioByCod("100001"),this.ruolo=this.sessionStorageService.getItem(s.Uf.SESSION.RUOLO),this.versamentoCorrente=_.c.clone(this.initialVersamento),this.SEZIONE_AUTORIZZA&&this.initForm(),this.currentDate=new Date(this.utilitiesService.getCurrentDate()),this.buildWrapperLists(),window.scrollTo({top:0,behavior:"smooth"}),this.spinner.hide()}buildWrapperLists(){const t=this.versamentoCorrente.esoTVersamentoProvincias;if(t&&t.length>0){this.dichiarazioneVersamenti=[];let n=0;t.forEach(c=>{const u=c.silapDProvincia.dsSilapDProvincia;let d=0,f=0,g=0;c.esoTVersamentoPvPeriodos.forEach(m=>{"C"!=m.flgTipo&&(d+=m.numGgLavorativi,f+=m.numLavoratoriEsonerati,g+=m.importo)}),this.dichiarazioneVersamenti.push({provincia:u,giorniLavorativi:d,numLavEsonerati:f,importo:g}),n+=g});const o=this.decimalPipe.transform(this.versamentoCorrente.numCreditoResiduo,"0.2-2"),r=n-this.versamentoCorrente.numCreditoResiduo;this.totaleImporto=`${this.decimalPipe.transform(n,"0.2-2")} - ${o} = ${this.decimalPipe.transform(r<0?0:r,"0.2-2")}`,this.showLists=!0}}initForm(){this.form=new l.cw({idDstato:new l.NI(s.uT.AUTORIZZATA.ID,l.kI.required),dsNote:new l.NI(null,l.kI.required)})}onClickAutorizza(){var t=this;return(0,x.Z)(function*(){const n=t.messageService.getMessaggioByCod("100029"),o=t.translate((0,T.J)("RIEPILOGO.MODAL.TITLE.AUTORIZZA")),r={0:String(t.versamentoCorrente.annoRiferimento),1:t.versamentoCorrente.dsDenominazioneAzienda,2:t.versamentoCorrente.codFiscale,3:t.datePipe.transform(t.currentDate,"dd/MM/yyyy")};let c=_.c.replacePlaceHolder(n.dsSilapDMessaggio,r);const u=t.translate((0,T.J)("APP.YES")),d=t.translate((0,T.J)("APP.NO"));(yield t.promptModalService.openPrompt(o,c,u,d,"warning"))&&t.aggiornaStato()})()}aggiornaStato(){var t=this;return(0,x.Z)(function*(){t.alertMessageService.emptyMessages();const n=t.currentDate.getFullYear(),o=t.f.idDstato.value;_.c.clone(t.versamentoCorrente);let c={idEsoTVersamento:t.versamentoCorrente.idEsoTVersamento,esoDVersamentoStato:{id:o},dsNote:t.f.dsNote.value},u=!0;if(o===s.uT.AUTORIZZATA.ID&&n-(t.initialVersamento.annoRiferimento+1)){const f=t.messageService.getMessaggioByCod("100031");if(f.silapDTipoMessaggio.idSilapDTipoMessaggio===s.A3.ERROR)return void t.alertMessageService.setSingleErrorMessage(f.dsSilapDMessaggio);const g=t.translate((0,T.J)("RIEPILOGO.MODAL.TITLE.AUTORIZZA")),m={0:String(t.versamentoCorrente.annoRiferimento),1:t.versamentoCorrente.dsDenominazioneAzienda,2:t.versamentoCorrente.codFiscale,3:t.datePipe.transform(t.currentDate,"dd/MM/yyyy")},p=_.c.replacePlaceHolder(f.dsSilapDMessaggio,m),v=t.translate((0,T.J)("APP.YES")),h=t.translate((0,T.J)("APP.NO"));u=yield t.promptModalService.openPrompt(g,p,v,h,"warning")}u&&(t.spinner.show(),t.versamentoEsoneriService.autorizzaVersamento(c).subscribe({next:d=>{d.esitoPositivo?(c.dtStato=new Date,c.esoDVersamentoStato.descr=c.esoDVersamentoStato.id===s.uT.AUTORIZZATA.ID?s.uT.AUTORIZZATA.DS:s.uT.NON_AUTORIZZATA.DS,t.versamentoCorrente.esoTVersamentoStatos.forEach(f=>{f.flgCurrentRecord="N"}),c.flgCurrentRecord="S",t.versamentoCorrente.esoTVersamentoStatos.push(c),t.emitAutorizzazione.emit(t.versamentoCorrente.esoTVersamentoStatos),d.msg?t.alertMessageService.setSingleSuccessMessage(d.msg.dsSilapDMessaggio):d.apiMessages&&d.apiMessages.length>0&&t.alertMessageService.setApiMessages(d.apiMessages)):t.alertMessageService.setApiMessages(d.apiMessages),t.spinner.hide()},error:d=>{console.log(t.constructor.name,`errore autorizzaVersamento: ${JSON.stringify(d)}`),t.spinner.hide()}}))})()}translate(t){return this.translateService.instant(t)}onClickInvio(){this.spinner.show(),this.versamentoEsoneriService.confermaInviaVersamento(this.versamentoCorrente.idEsoTVersamento).subscribe({next:t=>{if(t.esitoPositivo){const n=t.versamento;this.alertMessageService.setApiMessages(t.apiMessages),this.emitConfermainvio.emit(n)}else this.alertMessageService.setApiMessages(t.apiMessages),this.spinner.hide()},error:t=>{this.logService.error(this.constructor.name,`loadMessage: ${JSON.stringify(t)}`),this.spinner.hide()}})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(M.u),e.Y36(S.sK),e.Y36(P.e),e.Y36(V.p),e.Y36(D.gt),e.Y36(Y.e),e.Y36(R.O),e.Y36(I.uU),e.Y36(I.JJ),e.Y36(N.t2),e.Y36(b.$))},i.\u0275cmp=e.Xpm({type:i,selectors:[["colmirwcl-visualizza-dichiarazione-versamento"]],inputs:{mode:"mode",initialVersamento:"initialVersamento"},outputs:{emitConfermainvio:"emitConfermainvio",emitAutorizzazione:"emitAutorizzazione"},decls:17,vars:17,consts:[[3,"messaggio"],["activeIds","panelArea0","id","accordion-area0",3,"closeOthers","destroyOnHide"],["accordionArea0",""],["id","panelArea0",3,"title"],["ngbPanelContent",""],["activeIds","panelArea1","id","accordion-area1",3,"closeOthers","destroyOnHide"],["accordionArea1",""],[3,"title"],["activeIds","panelArea2","id","accordion-area2",3,"closeOthers","destroyOnHide",4,"ngIf"],["activeIds","panelAreaAutorizza","id","accordion-autorizza",3,"closeOthers","destroyOnHide",4,"ngIf"],["class","row justify-content-end",4,"ngIf"],[1,"row"],[1,"mb-3","col-sm-12","col-md-4"],["for","codFiscaleDatiAziendali"],[1,"valore"],[1,"mb-5","col-sm-12","col-md-6","mb-2"],["for","denominAzienda"],[1,"mb-3","col-sm-12","mb-2"],["for","sedeLegale"],[1,"mb-5","col-sm-12","col-md-4"],["for","comune"],["for","indirizzo"],["for","cap"],["for","ccnl"],["for","annoRif"],["for","creditoResiduo"],["for","versamento"],["for","mailRif"],["activeIds","panelArea2","id","accordion-area2",3,"closeOthers","destroyOnHide"],["accordionArea2",""],[4,"ngFor","ngForOf"],[1,"mb-5","col-sm-12","col-md-4","mt-4"],["for","totAzienda"],[1,"mb-3","col-sm-12","col-md-6"],[1,"title"],["for","titleIter"],[1,"tableIter"],["class","tableIter",4,"ngFor","ngForOf"],["activeIds","panelAreaAutorizza","id","accordion-autorizza",3,"closeOthers","destroyOnHide"],["accordionAutorizza",""],["id","panelAreaAutorizza",3,"title"],[1,"text-muted"],[1,"oblg"],[3,"formGroup"],["title","campo obbligatorio",1,"oblg"],[1,"form-check","form-check-inline"],["formControlName","idDstato","type","radio","id","autorizzaSi",1,"form-check-input",3,"value"],["for","autorizzaSi",1,"form-check-label"],["formControlName","idDstato","type","radio","id","autorizzaNo",1,"form-check-input",3,"value"],["for","autorizzaNo",1,"form-check-label"],[1,"mb-3","col-12"],["for","noteAutorizza"],["formControlName","dsNote","id","noteAutorizza","maxlength","300","rows","4"],[1,"row","justify-content-end"],[1,"col-auto"],["type","button",1,"btn","btn-sm","btn-primary",3,"disabled","click"],["type","button",1,"btn","btn-sm","btn-primary",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"h2"),e._uU(1),e.ALo(2,"translate"),e.qZA(),e._UZ(3,"colmirwcl-accordion-info",0),e.TgZ(4,"ngb-accordion",1,2)(6,"ngb-panel",3),e.ALo(7,"translate"),e.YNc(8,En,42,27,"ng-template",4),e.qZA()(),e.TgZ(9,"ngb-accordion",5,6)(11,"ngb-panel",7),e.ALo(12,"translate"),e.YNc(13,xn,28,21,"ng-template",4),e.qZA()(),e.YNc(14,Rn,5,5,"ngb-accordion",8),e.YNc(15,Ln,5,5,"ngb-accordion",9),e.YNc(16,bn,5,3,"div",10)),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,11,"NAV_MAIN.WIZARD.STEP_3.TITLE")),e.xp6(2),e.Q6J("messaggio",n.messaggioAccordionInfo),e.xp6(1),e.Q6J("closeOthers",!0)("destroyOnHide",!1),e.xp6(2),e.Q6J("title",e.lcZ(7,13,"RIEPILOGO.TITLE_DATI")),e.xp6(3),e.Q6J("closeOthers",!0)("destroyOnHide",!1),e.xp6(2),e.Q6J("title",e.lcZ(12,15,"RIEPILOGO.TITLE_DICHIARAZIONE")),e.xp6(3),e.Q6J("ngIf",n.showLists),e.xp6(1),e.Q6J("ngIf",n.SEZIONE_AUTORIZZA),e.xp6(1),e.Q6J("ngIf",n.SHOW_BTN_INVIO))},directives:[H,A.gY,A.Gk,A.gW,I.O5,I.sg,l._Y,l.JL,l.sg,l.Fj,l._,l.JJ,l.u,l.nD],pipes:[S.X$,I.JJ,I.uU],styles:[".title[_ngcontent-%COMP%]{font-size:20px;font-weight:700}table[_ngcontent-%COMP%]{border-collapse:collapse;width:100%}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:8px}td[_ngcontent-%COMP%]{border-color:inherit;border-style:solid;border-width:0;border-bottom-width:1px;border-color:#dee2e6}.tableIter[_ngcontent-%COMP%]{padding-left:3px}.valore[_ngcontent-%COMP%]{display:block}textarea[_ngcontent-%COMP%]{width:100%}"]}),i})();function Mn(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"colmirwcl-dati-aziendali",10),e.NdJ("emitConferma",function(o){e.CHM(t);const r=e.oxw(2),c=e.MAs(5);return r.conferma(o,c)}),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("mode",t.mode)("initialVersamento",t.versamento)}}function qn(i,a){if(1&i&&e.YNc(0,Mn,1,2,"colmirwcl-dati-aziendali",9),2&i){const t=e.oxw();e.Q6J("ngIf",t.versamento)}}function yn(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"colmirwcl-province",10),e.NdJ("emitConferma",function(o){e.CHM(t);const r=e.oxw(),c=e.MAs(5);return r.conferma(o,c)}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("mode",t.mode)("initialVersamento",t.versamento)}}function Un(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"colmirwcl-visualizza-dichiarazione-versamento",11),e.NdJ("emitConfermainvio",function(o){return e.CHM(t),e.oxw().confermaInvio(o)})("emitAutorizzazione",function(o){return e.CHM(t),e.oxw().autorizzazione(o)}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("mode",t.mode)("initialVersamento",t.versamento)}}const wn=["validatedXlsxFile"];function Jn(i,a){1&i&&(e.TgZ(0,"span",26),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"PREVISIONE_DICHIARAZIONE.VALIDATION.FORMAT_FILE")))}function Hn(i,a){if(1&i&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Oqu(t.getMsgValidazioneByCode("100027"))}}function Bn(i,a){if(1&i&&(e.TgZ(0,"div",27),e.YNc(1,Hn,2,1,"p",28),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.f||null==t.f.email||null==t.f.email.errors?null:t.f.email.errors.pattern)}}function Yn(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",3)(1,"p",4),e._uU(2),e.ALo(3,"translate"),e.TgZ(4,"span",5),e._uU(5,"*"),e.qZA()(),e.TgZ(6,"form",6)(7,"div",7)(8,"div",8)(9,"label",9),e._uU(10),e.ALo(11,"translate"),e.TgZ(12,"span",10),e._uU(13,"*"),e.qZA()(),e._UZ(14,"br"),e.TgZ(15,"input",11,12),e.NdJ("change",function(o){return e.CHM(t),e.oxw().chooseFile(o)}),e.qZA(),e._UZ(17,"br"),e.YNc(18,Jn,3,3,"span",13),e.qZA()(),e.TgZ(19,"div",7)(20,"div",14)(21,"label",15),e._uU(22),e.ALo(23,"translate"),e.TgZ(24,"span",10),e._uU(25,"*"),e.qZA()(),e._UZ(26,"br")(27,"input",16),e.qZA(),e.TgZ(28,"div",17)(29,"label",18),e._uU(30),e.ALo(31,"translate"),e.TgZ(32,"span",10),e._uU(33,"*"),e.qZA()(),e._UZ(34,"br")(35,"input",19),e.YNc(36,Bn,2,1,"div",20),e.qZA()(),e.TgZ(37,"div",7)(38,"div",21)(39,"button",22),e.NdJ("click",function(){return e.CHM(t),e.oxw().onClickReset()}),e._uU(40),e.ALo(41,"uppercase"),e.ALo(42,"translate"),e.qZA()(),e.TgZ(43,"div",23)(44,"button",24),e.NdJ("click",function(){return e.CHM(t),e.oxw().onClickDownloadFile()}),e._uU(45),e.ALo(46,"translate"),e.qZA()(),e.TgZ(47,"div",23)(48,"button",25),e.NdJ("click",function(){return e.CHM(t),e.oxw().onClickUploadFile()}),e._uU(49),e.ALo(50,"translate"),e.qZA()()()()()}if(2&i){const t=e.oxw();e.xp6(2),e.hij("",e.lcZ(3,11,"APP.GENERICO.CAMPI_CONTR")," "),e.xp6(4),e.Q6J("formGroup",t.form),e.xp6(4),e.Oqu(e.lcZ(11,13,"PREVISIONE_DICHIARAZIONE.LABEL.FILE")),e.xp6(8),e.Q6J("ngIf",t.validateFile("fileXLSX")),e.xp6(4),e.Oqu(e.lcZ(23,15,"PREVISIONE_DICHIARAZIONE.LABEL.ANNO")),e.xp6(8),e.Oqu(e.lcZ(31,17,"PREVISIONE_DICHIARAZIONE.LABEL.EMAIL")),e.xp6(6),e.Q6J("ngIf",null==t.f||null==t.f.email?null:t.f.email.invalid),e.xp6(4),e.Oqu(e.lcZ(41,19,e.lcZ(42,21,"APP.GENERICO.BTN.RIMUOVI_FILTRI_UPPER_C"))),e.xp6(5),e.Oqu(e.lcZ(46,23,"PREVISIONE_DICHIARAZIONE.BUTTON.DOWNLOAD_TEMPLATE")),e.xp6(3),e.Q6J("disabled",!t.form.valid||t.INVALID_FILE),e.xp6(1),e.Oqu(e.lcZ(50,25,"PREVISIONE_DICHIARAZIONE.BUTTON.UPLOAD"))}}const Qn=[{path:"",redirectTo:s.ln.MODULE.COLMIR.HOME_PAGE,pathMatch:"full"},{path:s.ln.MODULE.COLMIR.HOME_PAGE,component:fe},{path:"ricerca-versamento-esoneri",component:Tt},{path:"nav-main",component:(()=>{class i{constructor(t,n,o,r,c,u,d,f,g){this.translateService=t,this.promptModalService=n,this.location=o,this.spinner=r,this.logService=c,this.sessionStorageService=u,this.versamentoService=d,this.alertMessageService=f,this.router=g,this.active=0}get VIEW_MODE(){return this.mode===s.H6.VIEW}ngOnDestroy(){this.sessionStorageService.clearItems(s.Uf.SESSION.VERSAMENTO),this.sessionStorageService.clearItems(s.Uf.SESSION.WIZARD_MODE),this.alertMessageService.emptyMessages()}ngOnInit(){this.spinner.show();const t=this.sessionStorageService.getItem(s.Uf.SESSION.WIZARD_MODE);this.mode=t.mode,this.sessionStorageService.storage$.subscribe(n=>{this.versamento=JSON.parse(n.getItem(s.Uf.SESSION.VERSAMENTO))}),this.spinner.hide()}onClickTornaElenco(){var t=this;return(0,x.Z)(function*(){if(t.mode===s.H6.VIEW)return void t.location.back();const n=t.translate((0,T.J)("NAV_MAIN_DICH_VER.MODAL.TITLE")),r=t.translate((0,T.J)("APP.YES")),c=t.translate((0,T.J)("APP.NO"));(yield t.promptModalService.openPrompt(n,"Sei sicuro di voler uscire? Eventuali dati non confermati e salvati verranno persi.",r,c,"warning"))&&t.location.back()})()}translate(t){return this.translateService.instant(t)}conferma(t,n){this.active<0||(this.versamento=t,this.sessionStorageService.setItem(s.Uf.SESSION.VERSAMENTO,t),this.mode=s.H6.EDIT,n.select(this.active+1),window.scrollTo({top:0,behavior:"smooth"}))}confermaInvio(t){this.versamento=this.versamento,this.mode=s.H6.VIEW,this.sessionStorageService.setItem(s.Uf.SESSION.WIZARD_MODE,{mode:this.mode}),this.spinner.hide()}autorizzazione(t){this.versamento.esoTVersamentoStatos=t}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(S.sK),e.Y36(V.p),e.Y36(I.Ye),e.Y36(N.t2),e.Y36(b.$),e.Y36(M.u),e.Y36(D.gt),e.Y36(R.O),e.Y36(L.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["colmirwcl-nav-main-dichiarazione-versamento"]],decls:28,vars:19,consts:[[1,"torna"],["type","button",1,"btn","btn-outline-secondary","btn-sm",3,"click"],["ngbNav","",1,"stepper",3,"activeId","activeIdChange"],["nav","ngbNav"],[3,"ngbNavItem"],["ngbNavLink",""],["ngbNavContent",""],[3,"disabled","ngbNavItem"],[3,"ngbNavOutlet"],[3,"mode","initialVersamento","emitConferma",4,"ngIf"],[3,"mode","initialVersamento","emitConferma"],[3,"mode","initialVersamento","emitConfermainvio","emitAutorizzazione"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"button",1),e.NdJ("click",function(){return n.onClickTornaElenco()}),e._uU(2),e.ALo(3,"translate"),e.qZA()(),e.TgZ(4,"ul",2,3),e.NdJ("activeIdChange",function(r){return n.active=r}),e.TgZ(6,"li",4)(7,"a",5)(8,"span"),e._uU(9,"1"),e.qZA(),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.YNc(12,qn,1,1,"ng-template",6),e.qZA(),e.TgZ(13,"li",7)(14,"a",5)(15,"span"),e._uU(16,"2"),e.qZA(),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.YNc(19,yn,1,2,"ng-template",6),e.qZA(),e.TgZ(20,"li",7)(21,"a",5)(22,"span"),e._uU(23,"3"),e.qZA(),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.YNc(26,Un,1,2,"ng-template",6),e.qZA()(),e._UZ(27,"div",8)),2&t){const o=e.MAs(5);e.xp6(2),e.Oqu(e.lcZ(3,11,"NAV_MAIN.BUTTON.TORNA_ELENCO")),e.xp6(2),e.Q6J("activeId",n.active),e.xp6(2),e.Q6J("ngbNavItem",0),e.xp6(4),e.hij(" ",e.lcZ(11,13,"NAV_MAIN.WIZARD.STEP_1.TITLE"),""),e.xp6(3),e.Q6J("disabled",!n.VIEW_MODE&&n.active<1)("ngbNavItem",1),e.xp6(4),e.hij(" ",e.lcZ(18,15,"NAV_MAIN.WIZARD.STEP_2.TITLE"),""),e.xp6(3),e.Q6J("disabled",!n.VIEW_MODE&&n.active<2)("ngbNavItem",2),e.xp6(4),e.hij(" ",e.lcZ(25,17,"NAV_MAIN.WIZARD.STEP_3.TITLE"),""),e.xp6(3),e.Q6J("ngbNavOutlet",o)}},directives:[A.Pz,A.nv,A.Vx,A.uN,I.O5,qt,Sn,Vn,A.tO],pipes:[S.X$],styles:["silplibwcl-alert-message[_ngcontent-%COMP%]{width:100%}ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{display:inline;padding-right:3px}.stepper[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{margin:0 2%}.stepper[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:first-child{margin-left:19%}.sezione-title[_ngcontent-%COMP%]{font-weight:700;color:#213366;margin-top:4%}"]}),i})()},{path:"previsione-dichiarazione",component:(()=>{class i{constructor(t,n,o,r,c,u){this.parametroService=t,this.spinner=n,this.utilitiesService=o,this.customVersamentoEsoneriService=r,this.messageService=c,this.alertMessageService=u}get INVALID_FILE(){return this.validateFile("fileXLSX")}get f(){return this.form.controls}ngOnDestroy(){this.alertMessageService.emptyMessages()}ngOnInit(){const t=new Date;this.annoCorrente=t.getFullYear(),this.asyncNgOnInit().finally(()=>{this.initForm()})}asyncNgOnInit(){var t=this;return(0,x.Z)(function*(){const n=yield t.parametroService.getParametroByCod(ee.x.COD.MAILC);t.emailRegex=n.dsValore})()}initForm(){this.form=new l.cw({file:new l.NI(null,l.kI.required),anno:new l.NI(this.annoCorrente,l.kI.required),email:new l.NI(null,[l.kI.required,l.kI.pattern(this.emailRegex)])})}onClickReset(){this.alertMessageService.emptyMessages(),this.form.reset(),this.form.controls.anno.patchValue(this.annoCorrente),this.fileXLSX=null}onClickUploadFile(){this.spinner.show(),this.alertMessageService.emptyMessages(),this.customVersamentoEsoneriService.uploadPrevisioneDichiarazioniCustom(this.form.controls.anno.value,this.fileXLSX,this.form.controls.email.value).subscribe({next:o=>{if(o.esitoPositivo){const r=o.msg;let u=[];u.push({code:"0000",error:!1,message:r.dsSilapDMessaggio,tipo:r.silapDTipoMessaggio.idSilapDTipoMessaggio}),this.alertMessageService.setApiMessages(u),this.form.reset(),this.form.controls.anno.patchValue(this.annoCorrente),this.fileXLSX=null}else this.alertMessageService.setApiMessages(o.apiMessages);this.spinner.hide()},error:o=>{console.error(`onClickUploadFile ${o}`)}})}onClickDownloadFile(){this.spinner.show(),this.alertMessageService.emptyMessages(),this.customVersamentoEsoneriService.downloadPrevisioneDichiarazioniTemplate("response").subscribe({next:t=>{console.log(`onClickDownloadFile: ${JSON.stringify(t)}`),this.utilitiesService.downloadBlobFile(`${s.UK.TEMPLATE_PREVISIONI}.xlsx`,t.body),this.spinner.hide()},error:t=>{console.log(this.constructor.name,`errore onClickEsportaFile: ${JSON.stringify(t)}`),this.spinner.hide()}})}chooseFile(t){this.fileXLSX=t.target.files[0]}validateFile(t){let n=!1;return"fileXLSX"===t&&this.fileXLSX&&(n=!this.fileXLSX.name.toLowerCase().endsWith(".xlsx")),n}getMsgValidazioneByCode(t){return this.messageService.getMessaggioByCod(t).dsSilapDMessaggio}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(te.s),e.Y36(N.t2),e.Y36(Y.e),e.Y36(K),e.Y36(P.e),e.Y36(R.O))},i.\u0275cmp=e.Xpm({type:i,selectors:[["colmirwcl-previsione-dichiarazione"]],viewQuery:function(t,n){if(1&t&&e.Gf(wn,5),2&t){let o;e.iGM(o=e.CRH())&&(n.fileInput=o.first)}},decls:3,vars:1,consts:[[1,"container"],[1,"card"],["class","card-body",4,"ngIf"],[1,"card-body"],[1,"text-muted"],[1,"oblg"],[3,"formGroup"],[1,"row"],[1,"mb-3","col-10"],["for","inputFile"],["title","campo obbligatorio",1,"oblg"],["type","file","accept",".xlsx","title","Scegli un file xlsx...","formControlName","file","id","inputFile",1,"custom-file-input","text-muted",3,"change"],["validatedXlsxFile",""],["style","color: red",4,"ngIf"],[1,"mb-3","col-3"],["for","anno"],["colmirwclOnlyNumber","","formControlName","anno","maxlength","4","type","text","id","anno"],[1,"mb-3","col-9"],["for","mail"],["type","text","formControlName","email","oninput","this.value = this.value.trim()","id","mail"],["class","text-danger",4,"ngIf"],[1,"col"],["type","button",1,"btn","btn-outline-secondary","btn-sm",3,"click"],[1,"col-auto"],["type","button",1,"btn","btn-primary","ml-auto","btn-lg","verify",3,"click"],["type","button",1,"btn","btn-primary","ml-auto","btn-lg","verify",3,"disabled","click"],[2,"color","red"],[1,"text-danger"],[4,"ngIf"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,Yn,51,27,"div",2),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("ngIf",n.form))},directives:[I.O5,l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,B,l.nD],pipes:[S.X$,I.gd],styles:['.custom-file-input[_ngcontent-%COMP%]{border:1px solid #ccc;display:inline-block;cursor:pointer}.custom-file-label[_ngcontent-%COMP%]:before{content:"seleziona"}#mail[_ngcontent-%COMP%]{width:20em}#inputFile[_ngcontent-%COMP%]{width:43em}.custom-file-button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;padding:10px 20px;border:none;cursor:pointer}.hidden-input[_ngcontent-%COMP%]{display:none}']}),i})()}];let Gn=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[L.Bz.forChild(Qn)]]}),i})();var $n=C(3231);let Wn=(()=>{class i extends A.NG{parse(t){if(!t)return null;const n=t.trim().split("/");return n.length<3||!F(n[0])||!F(n[1])||!F(n[2])||+n[2]<1e3?null:{day:+n[0],month:+n[1],year:+n[2]}}format(t){return t?`${F(t.day)?$(t.day,2):""}/${F(t.month)?$(t.month,2):""}/${$(t.year,4)}`:""}}return i.\u0275fac=function(){let a;return function(n){return(a||(a=e.n5z(i)))(n||i)}}(),i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})();function F(i){return!isNaN(+i)}function $(i,a,t="0"){return`${t.repeat(a/t.length)}${i}`.slice(-a)}let jn=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[{provide:A.DO,useClass:A.s5},{provide:A.NG,useClass:Wn}],imports:[[I.ez,Gn,$n.z,S.aw]]}),i})()}}]);